const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BR0oiPy3.js","assets/qrcode-NovMiFzP.js"])))=>i.map(i=>d[i]);
import{d as ke,b as B,c as r,o as s,a as e,e as ge,n as U,r as Fe,t,f as N,g as q,u as V,h as oe,i as _,j as $e,w as X,v as le,F as J,k as ee,l as oa,m as Ie,p as At,q as xe,s as de,x as Nt,y as Ft,z as na,A as la,B as ia,C as nt,D as Bt,E as da,G as ua,H as ca,I as qt,J as ga,K as ut,L as Lt,M as ot,N as pa}from"./vue-vendor-whJcvE-1.js";import{a as _e}from"./axios-vendor-xsH4HHeE.js";import{r as lt,a as ya,b as Be,c as Qt,d as Ne,e as De,f as ct,g as it,h as gt,i as Ze,j as Ee,k as ft,l as wt,m as Ue,n as Ge,o as Wt,p as va,q as Vt,s as xa,t as ma,u as Zt,v as ba,w as ka,x as ha,y as Mt,z as fa,A as Rt,B as wa,C as _a,D as $a,E as Pt}from"./heroicons-Bj72tfci.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const v of i)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&o(w)}).observe(document,{childList:!0,subtree:!0});function n(i){const v={};return i.integrity&&(v.integrity=i.integrity),i.referrerPolicy&&(v.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?v.credentials="include":i.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function o(i){if(i.ep)return;i.ep=!0;const v=n(i);fetch(i.href,v)}})();const za="modulepreload",Sa=function(c){return"/"+c},Ot={},Ut=function(l,n,o){let i=Promise.resolve();if(n&&n.length>0){let w=function(F){return Promise.all(F.map(y=>Promise.resolve(y).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const T=document.querySelector("meta[property=csp-nonce]"),I=(T==null?void 0:T.nonce)||(T==null?void 0:T.getAttribute("nonce"));i=w(n.map(F=>{if(F=Sa(F),F in Ot)return;Ot[F]=!0;const y=F.endsWith(".css"),f=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${F}"]${f}`))return;const g=document.createElement("link");if(g.rel=y?"stylesheet":za,y||(g.as="script"),g.crossOrigin="",g.href=F,I&&g.setAttribute("nonce",I),document.head.appendChild(g),y)return new Promise((k,m)=>{g.addEventListener("load",k),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${F}`)))})}))}function v(w){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=w,window.dispatchEvent(T),!T.defaultPrevented)throw w}return i.then(w=>{for(const T of w||[])T.status==="rejected"&&v(T.reason);return l().catch(v)})},Ca={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors duration-200"},ja={class:"p-3 sm:p-5"},Ia={class:"flex items-center"},Ta={class:"flex-shrink-0"},Ma={class:"ml-3 sm:ml-5 w-0 flex-1"},Ra={class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},Pa={class:"text-base sm:text-lg font-medium text-gray-900 dark:text-white"},Oa={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},we=ke({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{},subtitle:{}},setup(c){const l=c,n=B(()=>({blue:"text-blue-400",green:"text-green-400",red:"text-red-400",purple:"text-purple-400",yellow:"text-yellow-400"})[l.color]);return(o,i)=>(s(),r("div",Ca,[e("div",ja,[e("div",Ia,[e("div",Ta,[typeof o.icon!="string"?(s(),ge(Fe(o.icon),{key:0,class:U([n.value,"h-5 w-5 sm:h-6 sm:w-6"])},null,8,["class"])):(s(),r("span",{key:1,class:U([n.value,"text-lg sm:text-xl"])},t(o.icon),3))]),e("div",Ma,[e("dl",null,[e("dt",Ra,t(o.title),1),e("dd",Pa,t(o.value),1),o.subtitle?(s(),r("dd",Oa,t(o.subtitle),1)):N("",!0)])])])])]))}}),Gt=ke({__name:"StatusBadge",props:{status:{},checked_in:{type:Boolean}},setup(c){const l=c,n=B(()=>l.status?l.status:l.checked_in?"ZAMELDOWANY":"NIEZAMELDOWANY"),o=B(()=>{if(l.status)switch(l.status){case"FINISHED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"DNF":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"DSQ":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return l.checked_in?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"});return(i,v)=>(s(),r("span",{class:U([o.value,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},t(n.value),3))}}),Da={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-3 border border-gray-200 dark:border-gray-700 transition-colors duration-200"},Ea={class:"flex items-center space-x-3 mb-2"},Aa={class:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-base font-bold flex-shrink-0"},Na={class:"font-bold text-gray-900 dark:text-white leading-tight text-lg"},Fa={class:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 mb-3 text-sm"},Ba={class:"flex items-center space-x-1 min-w-0"},qa={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},La={class:"flex items-center space-x-1 min-w-0 xs:flex-shrink-0"},Qa={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},Wa={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3"},Va={class:"flex items-center space-x-2"},Za={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ua={key:0,class:"flex space-x-2"},Ga=ke({__name:"ZawodnikCard",props:{zawodnik:{},isAdmin:{type:Boolean}},emits:["edit"],setup(c){const l=n=>{const o=Math.floor(n/60),i=(n%60).toFixed(2);return`${o}:${i.padStart(5,"0")}`};return(n,o)=>(s(),r("div",Da,[e("div",Ea,[e("span",Aa,t(n.zawodnik.nr_startowy),1),e("h3",Na,t(n.zawodnik.imie)+" "+t(n.zawodnik.nazwisko),1)]),e("div",Fa,[e("div",Ba,[q(V(lt),{class:"h-4 w-4 text-blue-500 dark:text-blue-400 flex-shrink-0"}),e("span",qa,t(n.zawodnik.klub),1)]),e("div",La,[q(V(ya),{class:"h-4 w-4 text-green-500 dark:text-green-400 flex-shrink-0"}),e("span",Qa,t(n.zawodnik.kategoria),1)])]),e("div",Wa,[e("div",Va,[q(V(Be),{class:"h-5 w-5 text-purple-500 dark:text-purple-400"}),e("span",Za,t(n.zawodnik.czas_przejazdu_s?l(n.zawodnik.czas_przejazdu_s):"-"),1)]),q(Gt,{status:n.zawodnik.status,checked_in:n.zawodnik.checked_in},null,8,["status","checked_in"])]),n.isAdmin?(s(),r("div",Ua,[e("button",{onClick:o[0]||(o[0]=i=>n.$emit("edit",n.zawodnik)),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 transition-colors duration-200"},[q(V(Qt),{class:"h-3 w-3 mr-1"}),o[1]||(o[1]=oe(" Edytuj "))])])):N("",!0)]))}}),Ka={class:"space-y-6"},Ha={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Ja={class:"flex items-center space-x-3"},Ya={key:0,class:"flex justify-center items-center h-64"},Xa={key:1,class:"bg-red-50 border border-red-200 rounded-md p-4"},es={class:"flex"},ts={class:"ml-3"},as={class:"mt-2 text-sm text-red-700"},ss={key:2},rs={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6"},os={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200 mb-6"},ns={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ls=["value"],is={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},ds={class:"flex flex-wrap gap-3"},us={class:"mt-4 flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4"},cs={class:"space-y-8"},gs={class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},ps={class:"space-y-8"},ys={class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4"},vs={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4"},xs={class:"grid grid-cols-2 gap-4 text-sm"},ms={class:"ml-1 text-gray-900 dark:text-white"},bs={class:"ml-1 text-gray-900 dark:text-white"},ks={key:1,class:"mb-6"},hs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},fs={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},ws={class:"space-y-1"},_s={class:"text-xs"},$s={key:2,class:"mb-6"},zs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ss={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},Cs={class:"space-y-1"},js={class:"text-xs"},Is={key:3,class:"mb-6"},Ts={class:"border-2 border-yellow-300 dark:border-yellow-600 rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/20"},Ms={class:"space-y-2"},Rs={key:0},Ps={key:1},Os={key:2},Ds={key:3},Es={class:"text-xs"},As={key:4,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ns=ke({__name:"DrabinkaPucharowa",setup(c){const l=_(null),n=_(!0),o=_(null),i=_({kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"}),v=_([]),w=_([]),T=B(()=>{if(!l.value)return{};const{podsumowanie:M,...C}=l.value;return C}),I=B(()=>Object.keys(T.value).sort()),F=B(()=>{var x;if(!l.value)return{};const{podsumowanie:M,...C}=l.value;let W={};if(i.value.kategoria)C[i.value.kategoria]&&(W[i.value.kategoria]=C[i.value.kategoria]);else for(const[R,Q]of Object.entries(C))(v.value.length===0||v.value.includes(R))&&(W[R]=Q);if(i.value.plec||w.value.length>0){const R=i.value.plec||(w.value.length===1?w.value[0]:"");if(R){const Q={};for(const[K,L]of Object.entries(W)){const P={};for(const[h,E]of Object.entries(L))h===R&&(P[h]=E);Object.keys(P).length>0&&(Q[K]=P)}W=Q}}if(i.value.faza){const R=i.value.faza,Q={};for(const[K,L]of Object.entries(W)){const P={};for(const[h,E]of Object.entries(L)){const H={...E};R==="ćwierćfinały"?(delete H.półfinały,delete H.finał):R==="półfinały"?(delete H.ćwierćfinały,delete H.finał):R==="finał"&&(delete H.ćwierćfinały,delete H.półfinały),((x=H[R])==null?void 0:x.length)>0&&(P[h]=H)}Object.keys(P).length>0&&(Q[K]=P)}W=Q}const b=Object.keys(W).sort((R,Q)=>{switch(i.value.sortowanie){case"kategoria_desc":return Q.localeCompare(R);case"zawodnikow_desc":return k(W[Q])-k(W[R]);case"zawodnikow_asc":return k(W[R])-k(W[Q]);default:return R.localeCompare(Q)}}),d={};return b.forEach(R=>{d[R]=W[R]}),d}),y=B(()=>v.value.length===I.value.length),f=B(()=>w.value.length===2||i.value.plec===""),g=B(()=>{let M=0;for(const C of Object.values(F.value))M+=k(C);return M}),k=M=>{var W,b;let C=0;for(const d of Object.values(M))if(typeof d=="object"&&d!==null){const x=["ćwierćfinały","półfinały","finał"];for(const R of x)if(((W=d[R])==null?void 0:W.length)>0)for(const Q of d[R])C+=((b=Q.zawodnicy)==null?void 0:b.length)||0}return C},m=M=>{if(!M)return"-";const C=Math.floor(M/60),W=(M%60).toFixed(2);return`${C}:${W.padStart(5,"0")}`},j=()=>{i.value={kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"},v.value=[],w.value=[]},G=()=>{y.value?(v.value=[],i.value.kategoria=""):(v.value=[...I.value],i.value.kategoria="")},A=()=>{f.value?(w.value=["Mężczyźni"],i.value.plec="Mężczyźni"):(w.value=["Mężczyźni","Kobiety"],i.value.plec="")},z=()=>{i.value.faza==="finał"?i.value.faza="":i.value.faza="finał"},S=async()=>{try{n.value=!0,o.value=null;const M=await _e.get("/api/drabinka");l.value=M.data.data||M.data}catch{o.value="Nie udało się załadować drabinki turniejowej"}finally{n.value=!1}};return $e(()=>{S()}),(M,C)=>{var W,b,d,x,R,Q;return s(),r("div",Ka,[e("div",Ha,[e("div",Ja,[q(V(Ne),{class:"h-8 w-8 text-yellow-600"}),C[4]||(C[4]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Drabinka Pucharowa SKATECROSS",-1))]),C[5]||(C[5]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," System turniejowy z grupami 4-osobowymi - do ćwierćfinałów awansuje maksymalnie 16 najlepszych zawodników ",-1))]),n.value?(s(),r("div",Ya,C[6]||(C[6]=[e("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-500"},null,-1)]))):o.value?(s(),r("div",Xa,[e("div",es,[q(V(De),{class:"h-5 w-5 text-red-400"}),e("div",ts,[C[7]||(C[7]=e("h3",{class:"text-sm font-medium text-red-800"},"Błąd ładowania drabinki",-1)),e("p",as,t(o.value),1)])])])):(s(),r("div",ss,[e("div",rs,[q(we,{title:"Zawodnicy w turnieju",value:((W=l.value.podsumowanie)==null?void 0:W.łączna_liczba_zawodników)||0,icon:V(ct),color:"blue"},null,8,["value","icon"]),q(we,{title:"W ćwierćfinałach",value:((b=l.value.podsumowanie)==null?void 0:b.w_ćwierćfinałach)||0,icon:V(Ne),color:"green"},null,8,["value","icon"]),q(we,{title:"Mężczyźni",value:((x=(d=l.value.podsumowanie)==null?void 0:d.podział_płeć)==null?void 0:x.mężczyźni)||0,icon:V(it),color:"purple"},null,8,["value","icon"]),q(we,{title:"Kobiety",value:((Q=(R=l.value.podsumowanie)==null?void 0:R.podział_płeć)==null?void 0:Q.kobiety)||0,icon:V(it),color:"red"},null,8,["value","icon"])]),e("div",os,[e("div",{class:"flex items-center justify-between mb-6"},[C[9]||(C[9]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:j,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},C[8]||(C[8]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",ns,[e("div",null,[C[11]||(C[11]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),X(e("select",{"onUpdate:modelValue":C[0]||(C[0]=K=>i.value.kategoria=K),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[C[10]||(C[10]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(I.value,K=>(s(),r("option",{key:K,value:K},t(K),9,ls))),128))],512),[[le,i.value.kategoria]])]),e("div",null,[C[13]||(C[13]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),X(e("select",{"onUpdate:modelValue":C[1]||(C[1]=K=>i.value.plec=K),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},C[12]||(C[12]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"Mężczyźni"},"Mężczyźni",-1),e("option",{value:"Kobiety"},"Kobiety",-1)]),512),[[le,i.value.plec]])]),e("div",null,[C[15]||(C[15]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🎯"),e("span",null,"Faza turnieju")])],-1)),X(e("select",{"onUpdate:modelValue":C[2]||(C[2]=K=>i.value.faza=K),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},C[14]||(C[14]=[e("option",{value:""},"Wszystkie fazy",-1),e("option",{value:"ćwierćfinały"},"Ćwierćfinały",-1),e("option",{value:"półfinały"},"Półfinały",-1),e("option",{value:"finał"},"Finał",-1)]),512),[[le,i.value.faza]])]),e("div",null,[C[17]||(C[17]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":C[3]||(C[3]=K=>i.value.sortowanie=K),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},C[16]||(C[16]=[e("option",{value:"kategoria_asc"},"Kategoria (A-Z)",-1),e("option",{value:"kategoria_desc"},"Kategoria (Z-A)",-1),e("option",{value:"zawodnikow_desc"},"Liczba zawodników (malejąco)",-1),e("option",{value:"zawodnikow_asc"},"Liczba zawodników (rosnąco)",-1)]),512),[[le,i.value.sortowanie]])])]),e("div",is,[C[20]||(C[20]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"⚡"),e("span",null,"Operacje grupowe")])],-1)),e("div",ds,[e("button",{onClick:G,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",y.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[e("span",null,t(y.value?"✅":"☐"),1),e("span",null,t(y.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" kategorie ("+t(I.value.length)+")",1)],2),e("button",{onClick:A,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",f.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent"])},[e("span",null,t(f.value?"✅":"☐"),1),e("span",null,t(f.value?"Tylko jedna płeć":"Obie płcie"),1)],2),e("button",{onClick:z,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",i.value.faza==="finał"?"bg-yellow-700 text-white shadow-inner border-yellow-800":"bg-yellow-600 text-white hover:bg-yellow-700 border-transparent"])},[C[18]||(C[18]=e("span",null,"🏆",-1)),e("span",null,t(i.value.faza==="finał"?"Pokaż wszystkie":"Tylko finały"),1)],2),e("button",{onClick:j,class:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent bg-gray-600 text-white hover:bg-gray-700"},C[19]||(C[19]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))])]),e("div",us,[e("div",null," Wyświetlane kategorie: "+t(Object.keys(F.value).length)+" z "+t(Object.keys(T.value).length),1),e("div",null," Łączna liczba zawodników: "+t(g.value),1)])]),e("div",cs,[(s(!0),r(J,null,ee(F.value,(K,L)=>(s(),r("div",{key:L,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},[e("h3",gs,"🏆 "+t(L),1),e("div",ps,[(s(!0),r(J,null,ee(K,(P,h)=>{var E,H,ie,Z,pe,ue;return X((s(),r("div",{key:h,class:"border-l-4 border-indigo-500 pl-4"},[e("h4",ys,t(String(h)==="Mężczyźni"?"👨 Mężczyźni":"👩 Kobiety"),1),P.statystyki?(s(),r("div",vs,[e("div",xs,[e("div",null,[C[21]||(C[21]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Łącznie:",-1)),e("span",ms,t(P.statystyki.łącznie_zawodników),1)]),e("div",null,[C[22]||(C[22]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"W ćwierćfinałach:",-1)),e("span",bs,t(P.statystyki.w_ćwierćfinałach),1)])])])):N("",!0),((E=P.ćwierćfinały)==null?void 0:E.length)>0&&(!i.value.faza||i.value.faza==="ćwierćfinały")?(s(),r("div",ks,[C[23]||(C[23]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥇 Ćwierćfinały",-1)),e("div",hs,[(s(!0),r(J,null,ee(P.ćwierćfinały,re=>(s(),r("div",{key:re.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[e("div",fs,"Grupa "+t(re.grupa)+" (awansuje "+t(re.awansują)+")",1),e("div",ws,[(s(!0),r(J,null,ee(re.zawodnicy,(ae,ce)=>(s(),r("div",{key:ae.nr_startowy,class:U(["text-sm p-2 rounded",ce<re.awansują?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[oe(t(ae.nr_startowy)+". "+t(ae.imie)+" "+t(ae.nazwisko)+" ",1),e("div",_s,t(m(ae.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):N("",!0),((H=P.półfinały)==null?void 0:H.length)>0&&(!i.value.faza||i.value.faza==="półfinały")?(s(),r("div",$s,[C[24]||(C[24]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥈 Półfinały",-1)),e("div",zs,[(s(!0),r(J,null,ee(P.półfinały,re=>(s(),r("div",{key:re.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[e("div",Ss,"Grupa "+t(re.grupa)+" (awansuje "+t(re.awansują)+")",1),e("div",Cs,[(s(!0),r(J,null,ee(re.zawodnicy,(ae,ce)=>(s(),r("div",{key:ae.nr_startowy,class:U(["text-sm p-2 rounded",ce<re.awansują?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[oe(t(ae.nr_startowy)+". "+t(ae.imie)+" "+t(ae.nazwisko)+" ",1),e("div",js,t(m(ae.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):N("",!0),((ie=P.finał)==null?void 0:ie.length)>0&&(!i.value.faza||i.value.faza==="finał")?(s(),r("div",Is,[C[25]||(C[25]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🏆 Finał",-1)),e("div",Ts,[(s(!0),r(J,null,ee(P.finał,re=>(s(),r("div",{key:re.grupa},[e("div",Ms,[(s(!0),r(J,null,ee(re.zawodnicy,(ae,ce)=>(s(),r("div",{key:ae.nr_startowy,class:U(["text-sm p-3 rounded font-medium",ce===0?"bg-yellow-200 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-100":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[ce===0?(s(),r("span",Rs,"🥇")):ce===1?(s(),r("span",Ps,"🥈")):ce===2?(s(),r("span",Os,"🥉")):(s(),r("span",Ds,t(ce+1)+".",1)),oe(" "+t(ae.nr_startowy)+". "+t(ae.imie)+" "+t(ae.nazwisko)+" ",1),e("div",Es,t(m(ae.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):N("",!0),!((Z=P.ćwierćfinały)!=null&&Z.length)&&!((pe=P.półfinały)!=null&&pe.length)&&!((ue=P.finał)!=null&&ue.length)?(s(),r("div",As,[q(V(Ne),{class:"h-12 w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),C[26]||(C[26]=e("p",null,"Brak zawodników w tej kategorii",-1))])):N("",!0)])),[[oa,w.value.length===0||w.value.includes(String(h))||i.value.plec===""||i.value.plec===String(h)]])}),128))])]))),128))])]))])}}}),Te=(c,l)=>{const n=c.__vccOpts||c;for(const[o,i]of l)n[o]=i;return n},Fs=Te(Ns,[["__scopeId","data-v-cdc06006"]]),Bs={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},qs={class:"relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-lg bg-white dark:bg-gray-800"},Ls={class:"flex justify-between items-center pb-4 border-b dark:border-gray-600"},Qs={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ws={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Vs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zs=["value"],Us={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Gs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ks={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},Hs={class:"text-sm text-red-700"},Js={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md"},Ys={class:"text-sm text-green-700"},Xs={class:"flex justify-end space-x-3 mt-6 pt-4 border-t dark:border-gray-600"},er=["disabled"],tr=ke({__name:"EditZawodnikModal",props:{show:{type:Boolean},zawodnik:{}},emits:["close","updated","deleted"],setup(c,{emit:l}){const n=c,o=l,i=_({nr_startowy:0,imie:"",nazwisko:"",kategoria:"",plec:"",klub:"",czas_przejazdu:"",status:""}),v=_(null),w=_(!1),T=_(""),I=_(""),F=_([]);$e(async()=>{try{const k=await _e.get("/api/kluby");k.data&&k.data.nazwy_klubow&&k.data.nazwy_klubow.length>0?F.value=k.data.nazwy_klubow:n.zawodnik&&(F.value=[n.zawodnik.klub].filter(Boolean))}catch{n.zawodnik?F.value=[n.zawodnik.klub].filter(Boolean):F.value=[]}}),Ie(()=>n.zawodnik,k=>{k&&n.show&&(v.value={...k},i.value={nr_startowy:k.nr_startowy,imie:k.imie,nazwisko:k.nazwisko,kategoria:k.kategoria,plec:k.plec,klub:k.klub||"",czas_przejazdu:y(k.czas_przejazdu_s),status:k.status||"DNF"},T.value="",I.value="")});const y=k=>{if(!k)return"";const m=Math.floor(k/60),j=(k%60).toFixed(3);return m>0?`${m}:${j.padStart(6,"0")}`:j},f=()=>o("close"),g=async()=>{var k,m;w.value=!0,T.value="",I.value="";try{if(v.value){const j=await _e.put(`/api/zawodnicy/${v.value.nr_startowy}`,{imie:i.value.imie,nazwisko:i.value.nazwisko,kategoria:i.value.kategoria,plec:i.value.plec,klub:i.value.klub});await _e.put("/api/wyniki",{nr_startowy:i.value.nr_startowy,czas_przejazdu_s:i.value.czas_przejazdu,status:i.value.status}),I.value="Zawodnik został zaktualizowany!"}else{const j=await _e.post("/api/zawodnicy",{nr_startowy:i.value.nr_startowy,imie:i.value.imie,nazwisko:i.value.nazwisko,kategoria:i.value.kategoria,plec:i.value.plec,klub:i.value.klub});await _e.put("/api/wyniki",{nr_startowy:i.value.nr_startowy,czas_przejazdu_s:i.value.czas_przejazdu,status:i.value.status}),I.value="Zawodnik został dodany!"}setTimeout(()=>{o("updated"),f()},1e3)}catch(j){T.value=((m=(k=j.response)==null?void 0:k.data)==null?void 0:m.error)||j.message||"Wystąpił błąd podczas zapisywania"}finally{w.value=!1}};return(k,m)=>k.show?(s(),r("div",Bs,[e("div",qs,[e("div",Ls,[e("h3",Qs,t(v.value?`Edycja zawodnika #${v.value.nr_startowy}`:"Dodaj nowego zawodnika"),1),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[q(V(gt),{class:"h-6 w-6"})])]),e("form",{onSubmit:At(g,["prevent"]),class:"mt-4 text-xl space-y-6"},[e("div",Ws,[e("div",null,[m[9]||(m[9]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Imię",-1)),X(e("input",{"onUpdate:modelValue":m[0]||(m[0]=j=>i.value.imie=j),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[xe,i.value.imie]])]),e("div",null,[m[10]||(m[10]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nazwisko",-1)),X(e("input",{"onUpdate:modelValue":m[1]||(m[1]=j=>i.value.nazwisko=j),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[xe,i.value.nazwisko]])])]),e("div",Vs,[e("div",null,[m[11]||(m[11]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nr startowy",-1)),X(e("input",{"onUpdate:modelValue":m[2]||(m[2]=j=>i.value.nr_startowy=j),type:"number",required:"",min:"1",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[xe,i.value.nr_startowy,void 0,{number:!0}]])]),e("div",null,[m[14]||(m[14]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Klub",-1)),F.value.length>0?X((s(),r("select",{key:0,"onUpdate:modelValue":m[3]||(m[3]=j=>i.value.klub=j),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[m[12]||(m[12]=e("option",{value:"",disabled:""},"Wybierz klub...",-1)),(s(!0),r(J,null,ee(F.value,j=>(s(),r("option",{key:j,value:j},t(j),9,Zs))),128))],512)),[[le,i.value.klub]]):(s(),r(J,{key:1},[X(e("input",{"onUpdate:modelValue":m[4]||(m[4]=j=>i.value.klub=j),type:"text",required:"",placeholder:"Wpisz klub",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[xe,i.value.klub]]),m[13]||(m[13]=e("p",{class:"text-xs text-red-500 mt-1"},"Brak klubów w bazie! Wpisz ręcznie.",-1))],64))])]),e("div",Us,[e("div",null,[m[16]||(m[16]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Płeć",-1)),X(e("select",{"onUpdate:modelValue":m[5]||(m[5]=j=>i.value.plec=j),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},m[15]||(m[15]=[e("option",{value:"M"},"👨 Mężczyzna",-1),e("option",{value:"K"},"👩 Kobieta",-1)]),512),[[le,i.value.plec]])]),e("div",null,[m[18]||(m[18]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Kategoria",-1)),X(e("select",{"onUpdate:modelValue":m[6]||(m[6]=j=>i.value.kategoria=j),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},m[17]||(m[17]=[de('<option value="Junior A">🏷️ Junior A</option><option value="Junior B">🏷️ Junior B</option><option value="Junior C">🏷️ Junior C</option><option value="Junior D">🏷️ Junior D</option><option value="Masters">🏷️ Masters</option><option value="Senior">🏷️ Senior</option>',6)]),512),[[le,i.value.kategoria]])])]),e("div",Gs,[e("div",null,[m[19]||(m[19]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Czas przejazdu",-1)),X(e("input",{"onUpdate:modelValue":m[7]||(m[7]=j=>i.value.czas_przejazdu=j),type:"text",placeholder:"MM:SS.ms lub SS.ms",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[xe,i.value.czas_przejazdu]]),m[20]||(m[20]=e("p",{class:"text-xs text-gray-500 mt-1"},"Format: MM:SS.ms lub SS.ms (np. 1:23.456 lub 45.123)",-1))]),e("div",null,[m[22]||(m[22]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),X(e("select",{"onUpdate:modelValue":m[8]||(m[8]=j=>i.value.status=j),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},m[21]||(m[21]=[e("option",{value:"NOT_STARTED"},"⏳ Nie wystartował",-1),e("option",{value:"FINISHED"},"✅ Ukończył",-1),e("option",{value:"DNF"},"❌ Nie ukończył",-1),e("option",{value:"DSQ"},"🚫 Dyskwalifikacja",-1)]),512),[[le,i.value.status]])])]),T.value?(s(),r("div",Ks,[e("p",Hs,t(T.value),1)])):N("",!0),I.value?(s(),r("div",Js,[e("p",Ys,t(I.value),1)])):N("",!0),e("div",Xs,[e("button",{type:"button",onClick:f,class:"px-6 py-2 text-base font-semibold text-indigo-700 bg-indigo-100 rounded-full hover:bg-indigo-200 transition-colors"},"✖ Anuluj"),e("button",{type:"submit",disabled:w.value,class:"px-6 py-2 text-base font-semibold text-white bg-green-400 rounded-full hover:bg-green-500 disabled:opacity-50 transition-colors"},t(w.value?"⏳ Zapisywanie...":"💾 Zapisz"),9,er)])],32)])])):N("",!0)}}),ar={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},sr={class:"flex items-center space-x-3"},rr={class:"flex items-center space-x-4"},or=["disabled"],nr={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},lr={class:"-mb-px flex space-x-8 overflow-x-auto"},ir=["onClick"],dr={key:0,class:"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 py-0.5 px-2 rounded-full text-xs"},ur={key:0,class:"flex justify-center py-12"},cr={class:"text-center"},gr={key:1},pr={key:0,class:"space-y-6"},yr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},vr={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},xr={class:"flex items-center gap-4"},mr={class:"relative w-64"},br={key:0,class:"absolute -bottom-5 left-0 text-xs text-gray-500 dark:text-gray-400"},kr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},hr=["value"],fr=["value"],wr={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},_r={class:"flex items-center gap-4"},$r={class:"text-sm text-gray-600 dark:text-gray-400"},zr={key:0},Sr={key:1},Cr={class:"flex items-center gap-2"},jr={key:0,class:"flex items-center space-x-2"},Ir=["disabled"],Tr=["disabled"],Mr={class:"text-xs text-gray-600 dark:text-gray-400 px-2"},Rr=["disabled"],Pr=["disabled"],Or={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Dr={class:"overflow-x-auto"},Er={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ar={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Nr={key:0},Fr={colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},Br={key:0},qr={key:1},Lr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Qr={key:0},Wr={key:1},Vr={key:2},Zr={key:3},Ur={class:"px-6 py-4 whitespace-nowrap"},Gr={class:"text-sm font-medium text-gray-900 dark:text-white"},Kr={class:"text-xs text-gray-500 dark:text-gray-400"},Hr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Jr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Yr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600 dark:text-purple-400"},Xr={key:1,class:"space-y-6"},eo={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},to={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},ao={class:"flex items-center gap-4"},so={class:"relative w-64"},ro={key:0,class:"absolute -bottom-5 left-0 text-xs text-gray-500 dark:text-gray-400"},oo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},no=["value"],lo=["value"],io={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},uo={class:"flex items-center gap-4"},co={class:"text-sm text-gray-600 dark:text-gray-400"},go={key:0},po={key:1},yo={class:"flex items-center gap-2"},vo={key:0,class:"flex items-center space-x-2"},xo=["disabled"],mo=["disabled"],bo={class:"text-xs text-gray-600 dark:text-gray-400 px-2"},ko=["disabled"],ho=["disabled"],fo={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},wo={class:"overflow-x-auto"},_o={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$o={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},zo={key:0},So={colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},Co={key:0},jo={key:1},Io={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},To={key:0},Mo={key:1},Ro={key:2},Po={key:3},Oo={class:"px-6 py-4 whitespace-nowrap"},Do={class:"text-sm font-medium text-gray-900 dark:text-white"},Eo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ao={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},No={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600 dark:text-purple-400"},Fo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Bo={key:2,class:"space-y-6"},qo={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Lo={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},Qo={class:"flex items-center gap-4"},Wo={class:"relative w-64"},Vo={key:0,class:"absolute -bottom-5 left-0 text-xs text-gray-500 dark:text-gray-400"},Zo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Uo=["value"],Go=["value"],Ko={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ho={class:"flex items-center gap-4"},Jo={class:"text-sm text-gray-600 dark:text-gray-400"},Yo={key:0},Xo={key:1},en={class:"flex items-center gap-2"},tn={key:0,class:"flex items-center space-x-2"},an=["disabled"],sn=["disabled"],rn={class:"text-xs text-gray-600 dark:text-gray-400 px-2"},on=["disabled"],nn=["disabled"],ln={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},dn={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},un={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},cn={key:0},gn={colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},pn={key:0},yn={key:1},vn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},xn={key:0},mn={key:1},bn={class:"px-6 py-4 whitespace-nowrap"},kn={class:"text-sm font-medium text-gray-900 dark:text-white"},hn={class:"text-sm text-gray-500 dark:text-gray-400"},fn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},wn={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},_n={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},$n={class:"px-6 py-4 whitespace-nowrap text-sm text-red-500 dark:text-red-400"},zn={key:3,class:"space-y-6"},Sn={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jn={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},In={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Tn={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Mn={key:0},Rn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Pn={key:0},On={key:1},Dn={key:2},En={key:3},An={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Nn={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600 dark:text-blue-400"},Fn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Bn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},qn={key:4,class:"space-y-6"},Ln={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Qn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wn={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Vn={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Zn={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Un={key:0},Gn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Kn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Hn={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},Jn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Yn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Xn={key:5,class:"space-y-6"},el={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},tl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},al={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},sl={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},rl={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ol={key:0},nl={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},ll={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},il={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-600"},dl={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-400"},ul={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-700"},cl={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-purple-600"},gl={key:2,class:"text-center py-12"},pl=3e4,yl=ke({__name:"Rankingi",setup(c){const l=_(!1),n=_("2025"),o=_("times"),i=_(0),v=_([]),w=_([]),T=_([]),I=_([]),F=_([]),y=_([]),f=_(""),g=_(""),k=_(""),m=_("completed"),j=_("time_asc"),G=_(1),A=_(25),z=_(""),S=_({current_page:1,total_pages:1,total_results:0,per_page:25,has_next:!1,has_prev:!1,start_index:1,end_index:0}),M=_(""),C=_(""),W=_(""),b=_("pozycja_asc"),d=_(""),x=_(1),R=_(25),Q=_({current_page:1,total_pages:1,total_results:0,per_page:25,has_next:!1,has_prev:!1,start_index:1,end_index:0}),K=_(""),L=_(""),P=_(""),h=_("punkty_desc"),E=_(""),H=_(1),ie=_(25),Z=_({current_page:1,total_pages:1,total_results:0,per_page:25,has_next:!1,has_prev:!1,start_index:1,end_index:0}),pe=_(null),ue=_("punkty_desc"),re=_(null),ae=_("punkty_desc"),ce=_(null),ye=_("zlote_desc"),Se=[{id:"times",name:"Wyniki Czasowe ⏱️",icon:Be},{id:"general",name:"Generalna",icon:Ne},{id:"individual",name:"Indywidualna",icon:ct},{id:"clubs-total",name:"Klubowa - Suma",icon:lt},{id:"clubs-top3",name:"Klubowa - TOP3",icon:lt},{id:"medals",name:"Medale",icon:Ne}],he=_(["Junior D","Junior C","Junior B","Junior A","Senior","Master"]),qe=B(()=>[...new Set(w.value.map(a=>a.klub).filter(Boolean))].sort());B(()=>[...new Set(w.value.map(a=>a.plec).filter(Boolean))].sort());const Ke=B(()=>{let $=w.value;if(d.value.trim()){const Y=d.value.trim().toLowerCase();$=$.filter(te=>`${te.imie} ${te.nazwisko}`.toLowerCase().includes(Y)||te.nazwisko.toLowerCase().includes(Y)||te.imie.toLowerCase().includes(Y))}M.value&&($=$.filter(Y=>Y.kategoria===M.value)),C.value&&($=$.filter(Y=>Y.klub===C.value)),W.value&&($=$.filter(Y=>Y.plec===W.value)),b.value==="pozycja_asc"?$.sort((Y,te)=>parseFloat(te.punkty)-parseFloat(Y.punkty)):b.value==="pozycja_desc"?$.sort((Y,te)=>parseFloat(Y.punkty)-parseFloat(te.punkty)):b.value==="punkty_desc"?$.sort((Y,te)=>parseFloat(te.punkty)-parseFloat(Y.punkty)):b.value==="punkty_asc"?$.sort((Y,te)=>parseFloat(Y.punkty)-parseFloat(te.punkty)):b.value==="nazwisko_asc"?$.sort((Y,te)=>Y.nazwisko.localeCompare(te.nazwisko)):b.value==="nazwisko_desc"?$.sort((Y,te)=>te.nazwisko.localeCompare(Y.nazwisko)):b.value==="klub_asc"?$.sort((Y,te)=>(Y.klub||"").localeCompare(te.klub||"")):b.value==="kategoria_asc"?$.sort((Y,te)=>Y.kategoria.localeCompare(te.kategoria)):b.value==="starty_desc"&&$.sort((Y,te)=>parseInt(te.liczba_zawodow)-parseInt(Y.liczba_zawodow));const a=$.length,u=Math.ceil(a/R.value),ne=(x.value-1)*R.value+1,ve=Math.min(x.value*R.value,a);Q.value={current_page:x.value,total_pages:u,total_results:a,per_page:R.value,has_next:x.value<u,has_prev:x.value>1,start_index:a>0?ne:0,end_index:a>0?ve:0};const ze=(x.value-1)*R.value,Oe=ze+R.value;return $.slice(ze,Oe)}),He=B(()=>{let $=T.value;if(E.value.trim()){const Y=E.value.trim().toLowerCase();$=$.filter(te=>`${te.imie} ${te.nazwisko}`.toLowerCase().includes(Y)||te.nazwisko.toLowerCase().includes(Y)||te.imie.toLowerCase().includes(Y))}K.value&&($=$.filter(Y=>Y.kategoria===K.value)),L.value&&($=$.filter(Y=>Y.klub===L.value)),P.value&&($=$.filter(Y=>Y.plec===P.value)),h.value==="punkty_desc"?$.sort((Y,te)=>parseFloat(te.punkty_koncowe)-parseFloat(Y.punkty_koncowe)):h.value==="punkty_asc"?$.sort((Y,te)=>parseFloat(Y.punkty_koncowe)-parseFloat(te.punkty_koncowe)):h.value==="nazwisko_asc"?$.sort((Y,te)=>Y.nazwisko.localeCompare(te.nazwisko)):h.value==="nazwisko_desc"?$.sort((Y,te)=>te.nazwisko.localeCompare(Y.nazwisko)):h.value==="kategoria_asc"?$.sort((Y,te)=>Y.kategoria.localeCompare(te.kategoria)):h.value==="starty_desc"?$.sort((Y,te)=>parseInt(te.uczestnictwa)-parseInt(Y.uczestnictwa)):h.value==="odrzucone_desc"&&$.sort((Y,te)=>parseInt(te.odrzucone||0)-parseInt(Y.odrzucone||0));const a=$.length,u=Math.ceil(a/ie.value),ne=(H.value-1)*ie.value+1,ve=Math.min(H.value*ie.value,a);Z.value={current_page:H.value,total_pages:u,total_results:a,per_page:ie.value,has_next:H.value<u,has_prev:H.value>1,start_index:a>0?ne:0,end_index:a>0?ve:0};const ze=(H.value-1)*ie.value,Oe=ze+ie.value;return $.slice(ze,Oe)}),Je=B(()=>{let $=I.value;return pe.value&&($=$.filter(a=>parseInt(a.liczba_zawodnikow)>=parseInt(pe.value))),ue.value==="punkty_desc"?$.sort((a,u)=>parseFloat(u.laczne_punkty)-parseFloat(a.laczne_punkty)):ue.value==="punkty_asc"?$.sort((a,u)=>parseFloat(a.laczne_punkty)-parseFloat(u.laczne_punkty)):ue.value==="srednia_desc"?$.sort((a,u)=>parseFloat(u.srednia)-parseFloat(a.srednia)):ue.value==="srednia_asc"?$.sort((a,u)=>parseFloat(a.srednia)-parseFloat(u.srednia)):ue.value==="zawodnicy_desc"?$.sort((a,u)=>parseInt(u.liczba_zawodnikow)-parseInt(a.liczba_zawodnikow)):ue.value==="zawodnicy_asc"?$.sort((a,u)=>parseInt(a.liczba_zawodnikow)-parseInt(u.liczba_zawodnikow)):ue.value==="nazwa_asc"?$.sort((a,u)=>a.klub.localeCompare(u.klub)):ue.value==="nazwa_desc"&&$.sort((a,u)=>u.klub.localeCompare(a.klub)),$}),Ye=B(()=>{let $=F.value;return re.value&&($=$.filter(a=>parseInt(a.aktywne_kategorie)>=parseInt(re.value))),ae.value==="punkty_desc"?$.sort((a,u)=>parseFloat(u.punkty_top3)-parseFloat(a.punkty_top3)):ae.value==="punkty_asc"?$.sort((a,u)=>parseFloat(a.punkty_top3)-parseFloat(u.punkty_top3)):ae.value==="kategorie_desc"?$.sort((a,u)=>parseInt(u.aktywne_kategorie)-parseInt(a.aktywne_kategorie)):ae.value==="kategorie_asc"?$.sort((a,u)=>parseInt(a.aktywne_kategorie)-parseInt(u.aktywne_kategorie)):ae.value==="balance_desc"?$.sort((a,u)=>parseFloat(u.balance)-parseFloat(a.balance)):ae.value==="balance_asc"?$.sort((a,u)=>parseFloat(a.balance)-parseFloat(u.balance)):ae.value==="nazwa_asc"?$.sort((a,u)=>a.klub.localeCompare(u.klub)):ae.value==="nazwa_desc"&&$.sort((a,u)=>u.klub.localeCompare(a.klub)),$}),Xe=B(()=>{let $=y.value;return ce.value&&($=$.filter(a=>parseInt(a.zlote)>=parseInt(ce.value))),ye.value==="zlote_desc"?$.sort((a,u)=>parseInt(u.zlote)-parseInt(a.zlote)||parseInt(u.srebrne)-parseInt(a.srebrne)||parseInt(u.brazowe)-parseInt(a.brazowe)):ye.value==="zlote_asc"?$.sort((a,u)=>parseInt(a.zlote)-parseInt(u.zlote)):ye.value==="srebrne_desc"?$.sort((a,u)=>parseInt(u.srebrne)-parseInt(a.srebrne)):ye.value==="srebrne_asc"?$.sort((a,u)=>parseInt(a.srebrne)-parseInt(u.srebrne)):ye.value==="brazowe_desc"?$.sort((a,u)=>parseInt(u.brazowe)-parseInt(a.brazowe)):ye.value==="brazowe_asc"?$.sort((a,u)=>parseInt(a.brazowe)-parseInt(u.brazowe)):ye.value==="lacznie_desc"?$.sort((a,u)=>parseInt(u.lacznie)-parseInt(a.lacznie)):ye.value==="lacznie_asc"?$.sort((a,u)=>parseInt(a.lacznie)-parseInt(u.lacznie)):ye.value==="nazwa_asc"?$.sort((a,u)=>a.klub.localeCompare(u.klub)):ye.value==="nazwa_desc"&&$.sort((a,u)=>u.klub.localeCompare(a.klub)),$}),et=B(()=>w.value.length===0&&T.value.length===0&&I.value.length===0&&y.value.length===0),Re=async()=>{if(l.value){console.log("🚫 Refresh już w toku, przerywam");return}l.value=!0,console.log("🔄 ROZPOCZYNAM refresh rankings...");try{await Promise.all([Ct(),jt(),It(),Tt()]),o.value==="times"&&await fe(),i.value=Date.now(),console.log("✅ ZAKOŃCZONO refresh rankings - wszystkie dane pobrane")}catch($){console.error("❌ Error fetching rankings:",$)}finally{l.value=!1}},vt=()=>{ce.value=null,ye.value="zlote_desc"};Ie(o,($,a)=>{console.log("🔀 Tab changed:",a,"->",$),Pe&&(clearTimeout(Pe),Pe=null,console.log("🧹 Cleared search timeout on tab change")),a==="times"&&$!=="times"&&(console.log("🧹 Leaving times tab - clearing search query and additional cleanup"),z.value=""),$==="times"?(console.log("🔄 Switching to times tab - fetching time ranking"),fe()):Date.now()-i.value>pl?(console.log("📅 Cache wygasł, pobieram dane dla",$),$==="individual"?Ct():$==="general"?jt():$.includes("clubs")?It():$==="medals"&&Tt()):console.log("📊 Using cached data for",$)}),Ie(n,()=>{console.log("📅 Zmiana sezonu na:",n.value),Re()}),$e(()=>{Re()});const fe=async()=>{var $,a,u,ne;if(o.value!=="times"){console.log("🚫 fetchTimeRanking canceled - not on times tab (current:",o.value,")");return}console.log("🕐 Pobieranie rankingu czasowego...");try{const ve=new URLSearchParams({typ:"best",status:m.value,limit:A.value.toString(),page:G.value.toString(),sort:j.value});f.value&&ve.append("kategoria",f.value),g.value&&ve.append("plec",g.value),k.value&&ve.append("klub",k.value),z.value.trim()&&ve.append("search",z.value.trim()),console.log("📡 Fetching time ranking with params:",ve.toString());const ze=await fetch(`/api/rankings/times?${ve}&_t=${Date.now()}`);if(console.log("📡 Time ranking response status:",ze.status),o.value!=="times"){console.log("🚫 fetchTimeRanking result discarded - tab changed during fetch");return}if(ze.ok){const Oe=await ze.json();console.log("✅ Time ranking data received:",((a=($=Oe.data)==null?void 0:$.ranking)==null?void 0:a.length)||0,"items"),v.value=((u=Oe.data)==null?void 0:u.ranking)||[],S.value=((ne=Oe.data)==null?void 0:ne.pagination)||S.value,console.log("✅ timeRanking updated, length:",v.value.length),console.log("📊 Pagination:",S.value)}else console.error("❌ Time ranking response not ok:",ze.status,ze.statusText)}catch(ve){console.error("❌ Error fetching time ranking:",ve)}},xt=()=>{S.value.has_next&&(G.value++,fe())},mt=()=>{S.value.has_prev&&(G.value--,fe())},Le=$=>{$>=1&&$<=S.value.total_pages&&(G.value=$,fe())},bt=()=>{G.value=1,fe()};Ie([m],()=>{console.log("🔄 Time ranking filters changed, fetching new data..."),G.value=1,fe()}),Ie([f,g,k,j],()=>{console.log("🔄 Time ranking filters/sort changed, fetching new data..."),G.value=1,fe()}),Ie(z,($,a)=>{console.log("🔍 Search query changed:",a,"->",$,"Active tab:",o.value),o.value==="times"?ra($):console.log("🚫 Search ignored - not on times tab")});const Qe=()=>{f.value="",g.value="",k.value="",m.value="completed",j.value="time_asc",z.value="",G.value=1,A.value=25},kt=()=>{Q.value.has_next&&x.value++},O=()=>{Q.value.has_prev&&x.value--},p=$=>{$>=1&&$<=Q.value.total_pages&&(x.value=$)},D=()=>{x.value=1},Ce=()=>{Z.value.has_next&&H.value++},be=()=>{Z.value.has_prev&&H.value--},je=$=>{$>=1&&$<=Z.value.total_pages&&(H.value=$)},me=()=>{H.value=1},tt=()=>{M.value="",C.value="",W.value="",b.value="pozycja_asc",d.value="",x.value=1,R.value=25},at=()=>{K.value="",L.value="",P.value="",h.value="punkty_desc",E.value="",H.value=1,ie.value=25},ta=()=>{pe.value=null,ue.value="punkty_desc"},aa=()=>{re.value=null,ae.value="punkty_desc"},sa=$=>{if(!$)return"--:--";const a=parseFloat($),u=Math.floor(a/60),ne=(a%60).toFixed(3);return`${u}:${ne.padStart(6,"0")}`},Ct=async()=>{var $;console.log("🔍 Pobieranie rankingu indywidualnego...");try{const a=await fetch(`/api/rankings/individual?season=${n.value}&_t=${Date.now()}`);if(console.log("📡 Individual response status:",a.status),a.ok){const u=await a.json();console.log("✅ Individual data received:",(($=u.data)==null?void 0:$.length)||0,"items"),w.value=u.data||[],console.log("✅ individualRanking updated, length:",w.value.length)}else console.error("❌ Individual ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching individual ranking:",a)}},jt=async()=>{var $;console.log("🔍 Pobieranie rankingu generalnego...");try{const a=await fetch(`/api/rankings/general?season=${n.value}&_t=${Date.now()}`);if(console.log("📡 General response status:",a.status),a.ok){const u=await a.json();console.log("✅ General data received:",(($=u.data)==null?void 0:$.length)||0,"items"),T.value=u.data||[],console.log("✅ generalRanking updated, length:",T.value.length)}else console.error("❌ General ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching general ranking:",a)}},It=async()=>{var $,a;console.log("🔍 Pobieranie rankingów klubowych...");try{const[u,ne]=await Promise.all([fetch(`/api/rankings/clubs/total?season=${n.value}&_t=${Date.now()}`),fetch(`/api/rankings/clubs/top3?season=${n.value}&_t=${Date.now()}`)]);if(console.log("📡 Club total response status:",u.status),console.log("📡 Club top3 response status:",ne.status),u.ok){const ve=await u.json();console.log("✅ Club total data received:",(($=ve.data)==null?void 0:$.length)||0,"items"),I.value=ve.data||[],console.log("✅ clubRankingTotal updated, length:",I.value.length)}else console.error("❌ Club total ranking response not ok:",u.status,u.statusText);if(ne.ok){const ve=await ne.json();console.log("✅ Club top3 data received:",((a=ve.data)==null?void 0:a.length)||0,"items"),F.value=ve.data||[],console.log("✅ clubRankingTop3 updated, length:",F.value.length)}else console.error("❌ Club top3 ranking response not ok:",ne.status,ne.statusText)}catch(u){console.error("❌ Error fetching club rankings:",u)}},Tt=async()=>{var $;console.log("🔍 Pobieranie rankingu medalowego...");try{const a=await fetch(`/api/rankings/medals?season=${n.value}&_t=${Date.now()}`);if(console.log("📡 Medal response status:",a.status),a.ok){const u=await a.json();console.log("✅ Medal data received:",(($=u.data)==null?void 0:$.length)||0,"items"),y.value=u.data||[],console.log("✅ medalRanking updated, length:",y.value.length)}else console.error("❌ Medal ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching medal ranking:",a)}};let Pe=null;const ra=$=>{if(Pe&&clearTimeout(Pe),o.value!=="times"){console.log("🚫 Search debounce canceled - not on times tab");return}if(!$||$.trim()===""){console.log("🔍 Search cleared - fetching full list immediately"),G.value=1,fe();return}Pe=setTimeout(()=>{o.value==="times"?(console.log("🔍 Debounced search executing for query:",$),G.value=1,fe()):console.log("🚫 Debounced search canceled - tab changed during timeout"),Pe=null},500)};return($,a)=>(s(),r("div",null,[e("div",ar,[e("div",sr,[q(V(Ze),{class:"h-8 w-8 text-purple-600 dark:text-purple-400"}),a[31]||(a[31]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Rankingi SKATECROSS",-1))]),e("div",rr,[X(e("select",{"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),class:"rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},a[32]||(a[32]=[e("option",{value:"2025"},"Sezon 2025",-1),e("option",{value:"2024"},"Sezon 2024",-1)]),512),[[le,n.value]]),e("button",{onClick:Re,disabled:l.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50"},[q(V(Ee),{class:U(["h-4 w-4 mr-2",l.value?"animate-spin":""])},null,8,["class"]),a[33]||(a[33]=oe(" Odśwież "))],8,or)])]),e("div",nr,[e("nav",lr,[(s(),r(J,null,ee(Se,u=>e("button",{key:u.id,onClick:ne=>o.value=u.id,class:U(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2",o.value===u.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(s(),ge(Fe(u.icon),{class:"h-5 w-5"})),e("span",null,t(u.name),1),u.count?(s(),r("span",dr,t(u.count),1)):N("",!0)],10,ir)),64))])]),l.value?(s(),r("div",ur,[e("div",cr,[q(V(Ee),{class:"h-8 w-8 text-purple-500 animate-spin mx-auto mb-4"}),a[34]||(a[34]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Ładowanie rankingów...",-1))])])):(s(),r("div",gr,[o.value==="times"?(s(),r("div",pr,[e("div",yr,[e("div",vr,[e("div",xr,[a[36]||(a[36]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("div",mr,[a[35]||(a[35]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])],-1)),X(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>z.value=u),type:"text",placeholder:"Szukaj zawodników...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm pl-10 pr-3 py-2 transition-all duration-200"},null,512),[[xe,z.value]]),z.value?(s(),r("div",br,t(S.value.total_results)+" wyników ",1)):N("",!0)])]),e("button",{onClick:Qe,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[37]||(a[37]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść",-1)]))]),e("div",kr,[e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),X(e("select",{"onUpdate:modelValue":a[2]||(a[2]=u=>f.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[38]||(a[38]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(he.value,u=>(s(),r("option",{key:u,value:u},t(u),9,hr))),128))],512),[[le,f.value]])]),e("div",null,[a[41]||(a[41]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),X(e("select",{"onUpdate:modelValue":a[3]||(a[3]=u=>g.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[40]||(a[40]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"M"},"Mężczyźni",-1),e("option",{value:"K"},"Kobiety",-1)]),512),[[le,g.value]])]),e("div",null,[a[43]||(a[43]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),X(e("select",{"onUpdate:modelValue":a[4]||(a[4]=u=>k.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[42]||(a[42]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(qe.value,u=>(s(),r("option",{key:u,value:u},t(u),9,fr))),128))],512),[[le,k.value]])]),e("div",null,[a[45]||(a[45]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[5]||(a[5]=u=>j.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[44]||(a[44]=[de('<option value="time_asc" data-v-4dffd3a8>Czas (najlepszy)</option><option value="time_desc" data-v-4dffd3a8>Czas (najgorszy)</option><option value="name_asc" data-v-4dffd3a8>Nazwisko (A-Z)</option><option value="name_desc" data-v-4dffd3a8>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-4dffd3a8>Kategoria (A-Z)</option><option value="klub_asc" data-v-4dffd3a8>Klub (A-Z)</option>',6)]),512),[[le,j.value]])])])]),e("div",wr,[e("div",_r,[a[48]||(a[48]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Wyniki Czasowe",-1)),e("div",$r,[S.value.total_results>0?(s(),r("span",zr," Wyniki "+t(S.value.start_index)+"-"+t(S.value.end_index)+" z "+t(S.value.total_results),1)):(s(),r("span",Sr,"Brak wyników"))]),e("div",Cr,[a[47]||(a[47]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Na stronę:",-1)),X(e("select",{"onUpdate:modelValue":a[6]||(a[6]=u=>A.value=u),onChange:bt,class:"text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-2 py-1 focus:border-purple-500 focus:ring-1 focus:ring-purple-500"},a[46]||(a[46]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[le,A.value]])])]),S.value.total_pages>1?(s(),r("div",jr,[e("button",{onClick:a[7]||(a[7]=u=>Le(1)),disabled:S.value.current_page===1,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏮️ ",8,Ir),e("button",{onClick:mt,disabled:!S.value.has_prev,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ← ",8,Tr),e("span",Mr,t(S.value.current_page)+"/"+t(S.value.total_pages),1),e("button",{onClick:xt,disabled:!S.value.has_next,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," → ",8,Rr),e("button",{onClick:a[8]||(a[8]=u=>Le(S.value.total_pages)),disabled:S.value.current_page===S.value.total_pages,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏭️ ",8,Pr)])):N("",!0)]),e("div",Or,[e("div",Dr,[e("table",Er,[a[49]||(a[49]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Czas")])],-1)),e("tbody",Ar,[v.value.length===0?(s(),r("tr",Nr,[e("td",Fr,[z.value?(s(),r("div",Br,' Brak wyników dla wyszukiwania: "'+t(z.value)+'" ',1)):(s(),r("div",qr," Brak zawodników spełniających wybrane kryteria "))])])):N("",!0),(s(!0),r(J,null,ee(v.value,(u,ne)=>(s(),r("tr",{key:u.nr_startowy,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Lr,[u.pozycja===1?(s(),r("span",Qr,"🥇")):u.pozycja===2?(s(),r("span",Wr,"🥈")):u.pozycja===3?(s(),r("span",Vr,"🥉")):(s(),r("span",Zr,t(u.pozycja),1))]),e("td",Ur,[e("div",Gr,t(u.imie)+" "+t(u.nazwisko),1),e("div",Kr,"Nr "+t(u.nr_startowy),1)]),e("td",Hr,t(u.klub),1),e("td",Jr,t(u.kategoria),1),e("td",Yr,t(sa(u.total_time)),1)]))),128))])])])])])):N("",!0),o.value==="individual"?(s(),r("div",Xr,[e("div",eo,[e("div",to,[e("div",ao,[a[51]||(a[51]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("div",so,[a[50]||(a[50]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])],-1)),X(e("input",{"onUpdate:modelValue":a[9]||(a[9]=u=>d.value=u),type:"text",placeholder:"Szukaj zawodników...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm pl-10 pr-3 py-2 transition-all duration-200"},null,512),[[xe,d.value]]),d.value?(s(),r("div",ro,t(Q.value.total_results)+" wyników ",1)):N("",!0)])]),e("button",{onClick:tt,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[52]||(a[52]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść",-1)]))]),e("div",oo,[e("div",null,[a[54]||(a[54]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),X(e("select",{"onUpdate:modelValue":a[10]||(a[10]=u=>M.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[53]||(a[53]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(he.value,u=>(s(),r("option",{key:u,value:u},t(u),9,no))),128))],512),[[le,M.value]])]),e("div",null,[a[56]||(a[56]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),X(e("select",{"onUpdate:modelValue":a[11]||(a[11]=u=>C.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[55]||(a[55]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(qe.value,u=>(s(),r("option",{key:u,value:u},t(u),9,lo))),128))],512),[[le,C.value]])]),e("div",null,[a[58]||(a[58]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),X(e("select",{"onUpdate:modelValue":a[12]||(a[12]=u=>W.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[57]||(a[57]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"M"},"Mężczyźni",-1),e("option",{value:"K"},"Kobiety",-1)]),512),[[le,W.value]])]),e("div",null,[a[60]||(a[60]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[13]||(a[13]=u=>b.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[59]||(a[59]=[de('<option value="pozycja_asc" data-v-4dffd3a8>Pozycja (najlepsi)</option><option value="pozycja_desc" data-v-4dffd3a8>Pozycja (najgorsi)</option><option value="punkty_desc" data-v-4dffd3a8>Punkty (malejąco)</option><option value="punkty_asc" data-v-4dffd3a8>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-4dffd3a8>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-4dffd3a8>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-4dffd3a8>Kategoria (A-Z)</option><option value="starty_desc" data-v-4dffd3a8>Starty (malejąco)</option>',8)]),512),[[le,b.value]])])])]),e("div",io,[e("div",uo,[a[63]||(a[63]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Indywidualna",-1)),e("div",co,[Q.value.total_results>0?(s(),r("span",go," Wyniki "+t(Q.value.start_index)+"-"+t(Q.value.end_index)+" z "+t(Q.value.total_results),1)):(s(),r("span",po,"Brak wyników"))]),e("div",yo,[a[62]||(a[62]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Na stronę:",-1)),X(e("select",{"onUpdate:modelValue":a[14]||(a[14]=u=>R.value=u),onChange:D,class:"text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded px-2 py-1 focus:ring-2 focus:ring-purple-500"},a[61]||(a[61]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[le,R.value]])])]),Q.value.total_pages>1?(s(),r("div",vo,[e("button",{onClick:a[15]||(a[15]=u=>p(1)),disabled:Q.value.current_page===1,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏮️ ",8,xo),e("button",{onClick:O,disabled:!Q.value.has_prev,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ← ",8,mo),e("span",bo,t(Q.value.current_page)+"/"+t(Q.value.total_pages),1),e("button",{onClick:kt,disabled:!Q.value.has_next,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," → ",8,ko),e("button",{onClick:a[16]||(a[16]=u=>p(Q.value.total_pages)),disabled:Q.value.current_page===Q.value.total_pages,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏭️ ",8,ho)])):N("",!0)]),e("div",fo,[e("div",wo,[e("table",_o,[a[64]||(a[64]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty")])],-1)),e("tbody",$o,[Ke.value.length===0?(s(),r("tr",zo,[e("td",So,[d.value?(s(),r("div",Co,' Brak wyników dla wyszukiwania: "'+t(d.value)+'" ',1)):(s(),r("div",jo," Brak zawodników spełniających wybrane kryteria "))])])):N("",!0),(s(!0),r(J,null,ee(Ke.value,(u,ne)=>(s(),r("tr",{key:u.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Io,[ne===0?(s(),r("span",To,"🥇")):ne===1?(s(),r("span",Mo,"🥈")):ne===2?(s(),r("span",Ro,"🥉")):(s(),r("span",Po,t(ne+1),1))]),e("td",Oo,[e("div",Do,t(u.imie)+" "+t(u.nazwisko),1)]),e("td",Eo,t(u.klub),1),e("td",Ao,t(u.kategoria),1),e("td",No,t(u.punkty)+" pkt",1),e("td",Fo,t(u.liczba_zawodow),1)]))),128))])])])])])):N("",!0),o.value==="general"?(s(),r("div",Bo,[e("div",qo,[e("div",Lo,[e("div",Qo,[a[66]||(a[66]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("div",Wo,[a[65]||(a[65]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])],-1)),X(e("input",{"onUpdate:modelValue":a[17]||(a[17]=u=>E.value=u),type:"text",placeholder:"Szukaj zawodników...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm pl-10 pr-3 py-2 transition-all duration-200"},null,512),[[xe,E.value]]),E.value?(s(),r("div",Vo,t(Z.value.total_results)+" wyników ",1)):N("",!0)])]),e("button",{onClick:at,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[67]||(a[67]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść",-1)]))]),e("div",Zo,[e("div",null,[a[69]||(a[69]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),X(e("select",{"onUpdate:modelValue":a[18]||(a[18]=u=>K.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[68]||(a[68]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(he.value,u=>(s(),r("option",{key:u,value:u},t(u),9,Uo))),128))],512),[[le,K.value]])]),e("div",null,[a[71]||(a[71]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),X(e("select",{"onUpdate:modelValue":a[19]||(a[19]=u=>L.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[70]||(a[70]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(qe.value,u=>(s(),r("option",{key:u,value:u},t(u),9,Go))),128))],512),[[le,L.value]])]),e("div",null,[a[73]||(a[73]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),X(e("select",{"onUpdate:modelValue":a[20]||(a[20]=u=>P.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[72]||(a[72]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"M"},"Mężczyźni",-1),e("option",{value:"K"},"Kobiety",-1)]),512),[[le,P.value]])]),e("div",null,[a[75]||(a[75]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[21]||(a[21]=u=>h.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[74]||(a[74]=[de('<option value="punkty_desc" data-v-4dffd3a8>Punkty (malejąco)</option><option value="punkty_asc" data-v-4dffd3a8>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-4dffd3a8>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-4dffd3a8>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-4dffd3a8>Kategoria (A-Z)</option><option value="starty_desc" data-v-4dffd3a8>Starty (malejąco)</option><option value="odrzucone_desc" data-v-4dffd3a8>Odrzucone (malejąco)</option>',7)]),512),[[le,h.value]])])])]),e("div",Ko,[e("div",Ho,[a[78]||(a[78]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Generalna (n-2)",-1)),e("div",Jo,[Z.value.total_results>0?(s(),r("span",Yo," Wyniki "+t(Z.value.start_index)+"-"+t(Z.value.end_index)+" z "+t(Z.value.total_results),1)):(s(),r("span",Xo,"Brak wyników"))]),e("div",en,[a[77]||(a[77]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Na stronę:",-1)),X(e("select",{"onUpdate:modelValue":a[22]||(a[22]=u=>ie.value=u),onChange:me,class:"text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded px-2 py-1 focus:ring-2 focus:ring-purple-500"},a[76]||(a[76]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[le,ie.value]])])]),Z.value.total_pages>1?(s(),r("div",tn,[e("button",{onClick:a[23]||(a[23]=u=>je(1)),disabled:Z.value.current_page===1,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏮️ ",8,an),e("button",{onClick:be,disabled:!Z.value.has_prev,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ← ",8,sn),e("span",rn,t(Z.value.current_page)+"/"+t(Z.value.total_pages),1),e("button",{onClick:Ce,disabled:!Z.value.has_next,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," → ",8,on),e("button",{onClick:a[24]||(a[24]=u=>je(Z.value.total_pages)),disabled:Z.value.current_page===Z.value.total_pages,class:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," ⏭️ ",8,nn)])):N("",!0)]),e("div",ln,[e("table",dn,[a[79]||(a[79]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty końcowe"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Odrzucone")])],-1)),e("tbody",un,[He.value.length===0?(s(),r("tr",cn,[e("td",gn,[E.value?(s(),r("div",pn,' Brak wyników dla wyszukiwania: "'+t(E.value)+'" ',1)):(s(),r("div",yn," Brak zawodników spełniających wybrane kryteria "))])])):N("",!0),(s(!0),r(J,null,ee(He.value,(u,ne)=>(s(),r("tr",{key:u.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",vn,[ne===0?(s(),r("span",xn,"🏆")):(s(),r("span",mn,t(ne+1),1))]),e("td",bn,[e("div",kn,t(u.imie)+" "+t(u.nazwisko),1),e("div",hn,t(u.klub),1)]),e("td",fn,t(u.kategoria),1),e("td",wn,t(u.punkty_koncowe)+" pkt",1),e("td",_n,t(u.uczestnictwa),1),e("td",$n,t(u.odrzucone||0),1)]))),128))])])])])):N("",!0),o.value==="clubs-total"?(s(),r("div",zn,[e("div",Sn,[e("div",{class:"flex items-center justify-between mb-6"},[a[81]||(a[81]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:ta,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[80]||(a[80]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",Cn,[e("div",null,[a[82]||(a[82]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Min. zawodników")])],-1)),X(e("input",{"onUpdate:modelValue":a[25]||(a[25]=u=>pe.value=u),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[xe,pe.value]])]),e("div",null,[a[84]||(a[84]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[26]||(a[26]=u=>ue.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[83]||(a[83]=[de('<option value="punkty_desc" data-v-4dffd3a8>Punkty (malejąco)</option><option value="punkty_asc" data-v-4dffd3a8>Punkty (rosnąco)</option><option value="srednia_desc" data-v-4dffd3a8>Średnia (malejąco)</option><option value="srednia_asc" data-v-4dffd3a8>Średnia (rosnąco)</option><option value="zawodnicy_desc" data-v-4dffd3a8>Zawodnicy (malejąco)</option><option value="zawodnicy_asc" data-v-4dffd3a8>Zawodnicy (rosnąco)</option><option value="nazwa_asc" data-v-4dffd3a8>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-4dffd3a8>Nazwa (Z-A)</option>',8)]),512),[[le,ue.value]])])])]),a[87]||(a[87]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Suma Punktów"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Wszystkie punkty zawodników klubu ")],-1)),e("div",jn,[e("table",In,[a[86]||(a[86]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łączne punkty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnicy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Średnia")])],-1)),e("tbody",Tn,[Je.value.length===0?(s(),r("tr",Mn,a[85]||(a[85]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):N("",!0),(s(!0),r(J,null,ee(Je.value,(u,ne)=>(s(),r("tr",{key:u.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Rn,[ne===0?(s(),r("span",Pn,"🏆")):ne===1?(s(),r("span",On,"🥈")):ne===2?(s(),r("span",Dn,"🥉")):(s(),r("span",En,t(ne+1),1))]),e("td",An,t(u.klub),1),e("td",Nn,t(u.laczne_punkty)+" pkt",1),e("td",Fn,t(u.liczba_zawodnikow),1),e("td",Bn,t(parseFloat(u.srednia).toFixed(1))+" pkt",1)]))),128))])])])])):N("",!0),o.value==="clubs-top3"?(s(),r("div",qn,[e("div",Ln,[e("div",{class:"flex items-center justify-between mb-6"},[a[89]||(a[89]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:aa,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[88]||(a[88]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",Qn,[e("div",null,[a[90]||(a[90]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Min. aktywnych kategorii")])],-1)),X(e("input",{"onUpdate:modelValue":a[27]||(a[27]=u=>re.value=u),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[xe,re.value]])]),e("div",null,[a[92]||(a[92]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[28]||(a[28]=u=>ae.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[91]||(a[91]=[de('<option value="punkty_desc" data-v-4dffd3a8>Punkty Top 3 (malejąco)</option><option value="punkty_asc" data-v-4dffd3a8>Punkty Top 3 (rosnąco)</option><option value="kategorie_desc" data-v-4dffd3a8>Kategorie (malejąco)</option><option value="kategorie_asc" data-v-4dffd3a8>Kategorie (rosnąco)</option><option value="balance_desc" data-v-4dffd3a8>Równowaga (malejąco)</option><option value="balance_asc" data-v-4dffd3a8>Równowaga (rosnąco)</option><option value="nazwa_asc" data-v-4dffd3a8>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-4dffd3a8>Nazwa (Z-A)</option>',8)]),512),[[le,ae.value]])])])]),a[95]||(a[95]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Top 3"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," 3 najlepszych zawodników z każdej kategorii ")],-1)),e("div",Wn,[e("table",Vn,[a[94]||(a[94]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty Top 3"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Równowaga")])],-1)),e("tbody",Zn,[Ye.value.length===0?(s(),r("tr",Un,a[93]||(a[93]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):N("",!0),(s(!0),r(J,null,ee(Ye.value,(u,ne)=>(s(),r("tr",{key:u.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Gn,t(ne+1),1),e("td",Kn,t(u.klub),1),e("td",Hn,t(u.punkty_top3)+" pkt",1),e("td",Jn,t(u.aktywne_kategorie),1),e("td",Yn,t(u.balance),1)]))),128))])])])])):N("",!0),o.value==="medals"?(s(),r("div",Xn,[e("div",el,[e("div",{class:"flex items-center justify-between mb-6"},[a[97]||(a[97]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:vt,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[96]||(a[96]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",tl,[e("div",null,[a[98]||(a[98]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🥇"),e("span",null,"Min. złotych medali")])],-1)),X(e("input",{"onUpdate:modelValue":a[29]||(a[29]=u=>ce.value=u),type:"number",min:"0",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[xe,ce.value]])]),e("div",null,[a[100]||(a[100]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":a[30]||(a[30]=u=>ye.value=u),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[99]||(a[99]=[de('<option value="zlote_desc" data-v-4dffd3a8>Złote (malejąco)</option><option value="zlote_asc" data-v-4dffd3a8>Złote (rosnąco)</option><option value="srebrne_desc" data-v-4dffd3a8>Srebrne (malejąco)</option><option value="srebrne_asc" data-v-4dffd3a8>Srebrne (rosnąco)</option><option value="brazowe_desc" data-v-4dffd3a8>Brązowe (malejąco)</option><option value="brazowe_asc" data-v-4dffd3a8>Brązowe (rosnąco)</option><option value="lacznie_desc" data-v-4dffd3a8>Łącznie (malejąco)</option><option value="lacznie_asc" data-v-4dffd3a8>Łącznie (rosnąco)</option><option value="nazwa_asc" data-v-4dffd3a8>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-4dffd3a8>Nazwa (Z-A)</option>',10)]),512),[[le,ye.value]])])])]),a[103]||(a[103]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Medalowa"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Złote, srebrne i brązowe medale ")],-1)),e("div",al,[e("table",sl,[a[102]||(a[102]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥇 Złote"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥈 Srebrne"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥉 Brązowe"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łącznie")])],-1)),e("tbody",rl,[Xe.value.length===0?(s(),r("tr",ol,a[101]||(a[101]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):N("",!0),(s(!0),r(J,null,ee(Xe.value,(u,ne)=>(s(),r("tr",{key:u.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",nl,t(ne+1),1),e("td",ll,t(u.klub),1),e("td",il,t(u.zlote),1),e("td",dl,t(u.srebrne),1),e("td",ul,t(u.brazowe),1),e("td",cl,t(u.lacznie),1)]))),128))])])])])):N("",!0)])),!l.value&&et.value?(s(),r("div",gl,[q(V(Ze),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a[105]||(a[105]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Brak danych rankingowych",-1)),a[106]||(a[106]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Rankingi będą dostępne po zakończeniu pierwszych zawodów w sezonie. ",-1)),e("button",{onClick:Re,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700"},[q(V(Ee),{class:"h-4 w-4 mr-2"}),a[104]||(a[104]=oe(" Sprawdź ponownie "))])])):N("",!0)]))}}),vl=Te(yl,[["__scopeId","data-v-4dffd3a8"]]);/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Kt;const pt=c=>Kt=c,Ht=Symbol();function _t(c){return c&&typeof c=="object"&&Object.prototype.toString.call(c)==="[object Object]"&&typeof c.toJSON!="function"}var Ve;(function(c){c.direct="direct",c.patchObject="patch object",c.patchFunction="patch function"})(Ve||(Ve={}));function xl(){const c=Nt(!0),l=c.run(()=>_({}));let n=[],o=[];const i=Ft({install(v){pt(i),i._a=v,v.provide(Ht,i),v.config.globalProperties.$pinia=i,o.forEach(w=>n.push(w)),o=[]},use(v){return this._a?n.push(v):o.push(v),this},_p:n,_a:null,_e:c,_s:new Map,state:l});return i}const Jt=()=>{};function Dt(c,l,n,o=Jt){c.push(l);const i=()=>{const v=c.indexOf(l);v>-1&&(c.splice(v,1),o())};return!n&&ua()&&ca(i),i}function Ae(c,...l){c.slice().forEach(n=>{n(...l)})}const ml=c=>c(),Et=Symbol(),ht=Symbol();function $t(c,l){c instanceof Map&&l instanceof Map?l.forEach((n,o)=>c.set(o,n)):c instanceof Set&&l instanceof Set&&l.forEach(c.add,c);for(const n in l){if(!l.hasOwnProperty(n))continue;const o=l[n],i=c[n];_t(i)&&_t(o)&&c.hasOwnProperty(n)&&!nt(o)&&!Bt(o)?c[n]=$t(i,o):c[n]=o}return c}const bl=Symbol();function kl(c){return!_t(c)||!c.hasOwnProperty(bl)}const{assign:Me}=Object;function hl(c){return!!(nt(c)&&c.effect)}function fl(c,l,n,o){const{state:i,actions:v,getters:w}=l,T=n.state.value[c];let I;function F(){T||(n.state.value[c]=i?i():{});const y=ga(n.state.value[c]);return Me(y,v,Object.keys(w||{}).reduce((f,g)=>(f[g]=Ft(B(()=>{pt(n);const k=n._s.get(c);return w[g].call(k,k)})),f),{}))}return I=Yt(c,F,l,n,o,!0),I}function Yt(c,l,n={},o,i,v){let w;const T=Me({actions:{}},n),I={deep:!0};let F,y,f=[],g=[],k;const m=o.state.value[c];!v&&!m&&(o.state.value[c]={}),_({});let j;function G(d){let x;F=y=!1,typeof d=="function"?(d(o.state.value[c]),x={type:Ve.patchFunction,storeId:c,events:k}):($t(o.state.value[c],d),x={type:Ve.patchObject,payload:d,storeId:c,events:k});const R=j=Symbol();qt().then(()=>{j===R&&(F=!0)}),y=!0,Ae(f,x,o.state.value[c])}const A=v?function(){const{state:x}=n,R=x?x():{};this.$patch(Q=>{Me(Q,R)})}:Jt;function z(){w.stop(),f=[],g=[],o._s.delete(c)}const S=(d,x="")=>{if(Et in d)return d[ht]=x,d;const R=function(){pt(o);const Q=Array.from(arguments),K=[],L=[];function P(H){K.push(H)}function h(H){L.push(H)}Ae(g,{args:Q,name:R[ht],store:C,after:P,onError:h});let E;try{E=d.apply(this&&this.$id===c?this:C,Q)}catch(H){throw Ae(L,H),H}return E instanceof Promise?E.then(H=>(Ae(K,H),H)).catch(H=>(Ae(L,H),Promise.reject(H))):(Ae(K,E),E)};return R[Et]=!0,R[ht]=x,R},M={_p:o,$id:c,$onAction:Dt.bind(null,g),$patch:G,$reset:A,$subscribe(d,x={}){const R=Dt(f,d,x.detached,()=>Q()),Q=w.run(()=>Ie(()=>o.state.value[c],K=>{(x.flush==="sync"?y:F)&&d({storeId:c,type:Ve.direct,events:k},K)},Me({},I,x)));return R},$dispose:z},C=ia(M);o._s.set(c,C);const b=(o._a&&o._a.runWithContext||ml)(()=>o._e.run(()=>(w=Nt()).run(()=>l({action:S}))));for(const d in b){const x=b[d];if(nt(x)&&!hl(x)||Bt(x))v||(m&&kl(x)&&(nt(x)?x.value=m[d]:$t(x,m[d])),o.state.value[c][d]=x);else if(typeof x=="function"){const R=S(x,d);b[d]=R,T.actions[d]=x}}return Me(C,b),Me(da(C),b),Object.defineProperty(C,"$state",{get:()=>o.state.value[c],set:d=>{G(x=>{Me(x,d)})}}),o._p.forEach(d=>{Me(C,w.run(()=>d({store:C,app:o._a,pinia:o,options:T})))}),m&&v&&n.hydrate&&n.hydrate(C.$state,m),F=!0,y=!0,C}/*! #__NO_SIDE_EFFECTS__ */function zt(c,l,n){let o,i;const v=typeof l=="function";typeof c=="string"?(o=c,i=v?n:l):(i=c,o=c.id);function w(T,I){const F=la();return T=T||(F?na(Ht,null):null),T&&pt(T),T=Kt,T._s.has(o)||(v?Yt(o,l,i,T):fl(o,i,T)),T._s.get(o)}return w.$id=o,w}const St=zt("athletes",()=>{const c=_({athletes:[],loading:!1,error:null,lastFetch:null,searchQuery:"",filters:{kategoria:"",klub:"",plec:"",status:""}}),l=B(()=>c.value.athletes),n=B(()=>{let A=c.value.athletes;if(c.value.searchQuery){const z=c.value.searchQuery.toLowerCase();A=A.filter(S=>S.imie.toLowerCase().includes(z)||S.nazwisko.toLowerCase().includes(z)||S.klub.toLowerCase().includes(z)||S.nr_startowy.toString().includes(z))}return c.value.filters.kategoria&&(A=A.filter(z=>z.kategoria===c.value.filters.kategoria)),c.value.filters.klub&&(A=A.filter(z=>z.klub===c.value.filters.klub)),c.value.filters.plec&&(A=A.filter(z=>z.plec===c.value.filters.plec)),c.value.filters.status&&(c.value.filters.status==="checked_in"?A=A.filter(z=>z.checked_in===!0):c.value.filters.status==="not_checked_in"&&(A=A.filter(z=>z.checked_in!==!0))),A}),o=B(()=>{const A={};return c.value.athletes.forEach(z=>{A[z.kategoria]||(A[z.kategoria]=[]),A[z.kategoria].push(z)}),A}),i=B(()=>{const A={};return c.value.athletes.forEach(z=>{A[z.klub]||(A[z.klub]=[]),A[z.klub].push(z)}),A}),v=B(()=>[...new Set(c.value.athletes.map(A=>A.kategoria))].sort()),w=B(()=>[...new Set(c.value.athletes.map(A=>A.klub))].sort()),T=B(()=>({total:c.value.athletes.length,checkedIn:c.value.athletes.filter(A=>A.checked_in).length,withResults:c.value.athletes.filter(A=>A.czas_przejazdu_s).length,withQR:c.value.athletes.filter(A=>A.qr_code).length})),I=async(A=!1)=>{const z=Date.now(),S=5*60*1e3;if(!A&&c.value.lastFetch&&z-c.value.lastFetch<S)return console.log("📦 Using cached athletes data"),c.value.athletes;c.value.loading=!0,c.value.error=null;try{const M=await _e.get("/api/zawodnicy?limit=1000");let C;return M.data.success?C=M.data.data||[]:C=M.data.data||M.data||[],c.value.athletes=C,c.value.lastFetch=z,localStorage.setItem("skatecross-athletes-cache",JSON.stringify({athletes:C,timestamp:z})),console.log(`✅ Fetched ${C.length} athletes`),C}catch(M){throw console.error("Error fetching athletes:",M),c.value.error="Błąd pobierania danych zawodników",await j(),M}finally{c.value.loading=!1}},F=A=>c.value.athletes.find(z=>z.qr_code===A)||null,y=A=>c.value.athletes.find(z=>z.nr_startowy===A)||null,f=A=>{const z=c.value.athletes.findIndex(S=>S.nr_startowy===A.nr_startowy);z!==-1&&(c.value.athletes[z]={...c.value.athletes[z],...A},localStorage.setItem("skatecross-athletes-cache",JSON.stringify({athletes:c.value.athletes,timestamp:c.value.lastFetch})))},g=A=>{c.value.searchQuery=A},k=(A,z)=>{c.value.filters[A]=z},m=()=>{c.value.searchQuery="",c.value.filters={kategoria:"",klub:"",plec:"",status:""}},j=async()=>{const A=localStorage.getItem("skatecross-athletes-cache");if(A)try{const{athletes:z,timestamp:S}=JSON.parse(A);c.value.athletes=z,c.value.lastFetch=S,console.log(`📦 Loaded ${z.length} athletes from cache`)}catch(z){console.error("Error loading athletes from cache:",z),localStorage.removeItem("skatecross-athletes-cache")}},G=()=>{c.value.athletes=[],c.value.lastFetch=null,localStorage.removeItem("skatecross-athletes-cache")};return j(),{state:B(()=>c.value),allAthletes:l,filteredAthletes:n,athletesByCategory:o,athletesByClub:i,uniqueCategories:v,uniqueClubs:w,stats:T,fetchAthletes:I,findAthleteByQR:F,findAthleteByNumber:y,updateAthlete:f,setSearchQuery:g,setFilter:k,clearFilters:m,loadFromCache:j,clearCache:G}}),yt=zt("offline",()=>{const c=_([]),l=_({isOnline:navigator.onLine,lastSync:null,syncInProgress:!1}),n=B(()=>c.value.length),o=B(()=>c.value.length>0),i=B(()=>l.value.isOnline),v=f=>{const g={...f,id:`offline-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};c.value.push(g),console.log("📥 Added to offline queue:",g.type,g.data),localStorage.setItem("skatecross-offline-queue",JSON.stringify(c.value)),l.value.isOnline&&!l.value.syncInProgress&&I()},w=f=>{const g=c.value.findIndex(k=>k.id===f);g!==-1&&(c.value.splice(g,1),localStorage.setItem("skatecross-offline-queue",JSON.stringify(c.value)))},T=()=>{c.value=[],localStorage.removeItem("skatecross-offline-queue")},I=async()=>{if(l.value.syncInProgress||!l.value.isOnline)return;l.value.syncInProgress=!0,console.log("🔄 Starting offline queue sync...");const f=[...c.value];let g=0;for(const k of f)try{const m=await fetch(k.endpoint,{method:k.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(k.data)});m.ok?(w(k.id),g++,console.log("✅ Offline action synced:",k.type)):console.log("❌ Failed to sync offline action:",k.type,m.status)}catch(m){console.log("❌ Network error syncing offline action:",k.type,m);break}l.value.syncInProgress=!1,l.value.lastSync=Date.now(),console.log(`🔄 Offline sync completed: ${g}/${f.length} items synced`)},F=f=>{const g=!l.value.isOnline;l.value.isOnline=f,f&&g&&c.value.length>0&&(console.log("🌐 Back online - starting queue sync"),I())},y=()=>{const f=localStorage.getItem("skatecross-offline-queue");if(f)try{c.value=JSON.parse(f),console.log(`📦 Loaded ${c.value.length} items from offline queue`)}catch(g){console.error("Error loading offline queue from storage:",g),T()}};return y(),window.addEventListener("online",()=>F(!0)),window.addEventListener("offline",()=>F(!1)),{queue:B(()=>c.value),networkState:B(()=>l.value),queueCount:n,hasPendingActions:o,isOnline:i,addToQueue:v,removeFromQueue:w,clearQueue:T,syncQueue:I,setOnlineStatus:F,loadQueueFromStorage:y}}),st={office:{label:"Biuro Obsługi",icon:"👥",description:"Meldowanie zawodników, skaner QR",permissions:["scan","checkin","view-athletes","manual-checkin"],defaultView:"/scanner"},judge:{label:"Sędzia Linii Startu",icon:"🏁",description:"Kontrola startu, weryfikacja zawodników",permissions:["scan","verify","view-athletes","start-control"],defaultView:"/start-line"},athlete:{label:"Zawodnik",icon:"🏃‍♂️",description:"Sprawdzanie własnych wyników",permissions:["view-own-results","self-scan"],defaultView:"/athlete"},trainer:{label:"Trener",icon:"🥇",description:"Śledzenie podopiecznych, statystyki",permissions:["scan","view-athletes","view-stats","export-data"],defaultView:"/trainer"},admin:{label:"Administrator",icon:"⚙️",description:"Pełny dostęp do systemu",permissions:["*"],defaultView:"/admin"}},Xt=zt("user",()=>{const c=_(null),l=_(!1),n=B(()=>{var m;return(m=c.value)==null?void 0:m.type}),o=B(()=>c.value?st[c.value.type]:null),i=B(()=>m=>{if(!c.value)return!1;const j=c.value.permissions;return j.includes("*")||j.includes(m)}),v=B(()=>i.value("scan")),w=B(()=>i.value("checkin")),T=B(()=>i.value("view-athletes")),I=B(()=>i.value("manual-checkin")),F=(m,j)=>{const G=st[m];return c.value={type:m,permissions:G.permissions,preferences:{hapticFeedback:!0,soundFeedback:!0,autoScan:m==="office"||m==="judge",scanDelay:m==="office"?500:1e3},...j},l.value=!0,localStorage.setItem("skatecross-user-profile",JSON.stringify(c.value)),console.log(`👤 User type set to: ${G.label}`),c.value},y=m=>{c.value&&(c.value.preferences={...c.value.preferences,...m},localStorage.setItem("skatecross-user-profile",JSON.stringify(c.value)))},f=()=>{c.value=null,l.value=!1,localStorage.removeItem("skatecross-user-profile"),console.log("👤 User logged out")},g=()=>{const m=localStorage.getItem("skatecross-user-profile");if(m)try{const j=JSON.parse(m);c.value=j,l.value=!0,console.log(`👤 Loaded user profile: ${j.type}`)}catch(j){console.error("Error loading user profile:",j),f()}},k=()=>{const j=new URLSearchParams(window.location.search).get("user_type");if(j&&j in st)return j;const G=window.location.pathname;return G.includes("/scanner")?"office":G.includes("/start-line")?"judge":G.includes("/athlete")?"athlete":G.includes("/trainer")?"trainer":G.includes("/admin")?"admin":null};if(g(),!c.value){const m=k();m&&F(m)}return{currentUser:B(()=>c.value),isAuthenticated:B(()=>l.value),userType:n,userConfig:o,hasPermission:i,canScan:v,canCheckin:w,canViewAthletes:T,canManualCheckin:I,setUserType:F,updatePreferences:y,logout:f,loadUserFromStorage:g,autoDetectUserType:k,USER_TYPE_CONFIG:st}});class se{constructor(l,n,o,i,v){this._legacyCanvasSize=se.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=l,this.$canvas=document.createElement("canvas"),o&&typeof o=="object"?this._onDecode=n:(console.warn(o||i||v?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n=typeof o=="object"?o:{},this._onDecodeError=n.onDecodeError||(typeof o=="function"?o:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||(typeof i=="function"?i:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||v||this._preferredCamera,this._legacyCanvasSize=typeof o=="number"?o:typeof i=="number"?i:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),l.disablePictureInPicture=!0,l.playsInline=!0,l.muted=!0;let w=!1;if(l.hidden&&(l.hidden=!1,w=!0),document.body.contains(l)||(document.body.appendChild(l),w=!0),o=l.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(i=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),v=this.$overlay.style,v.position="absolute",v.display="none",v.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}o.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(l),requestAnimationFrame(()=>{let T=window.getComputedStyle(l);T.display==="none"&&(l.style.setProperty("display","block","important"),w=!0),T.visibility!=="visible"&&(l.style.setProperty("visibility","visible","important"),w=!0),w&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),l.style.opacity="0",l.style.width="0",l.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),l.addEventListener("play",this._onPlay),l.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=se.createQrEngine()}static set WORKER_PATH(l){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await se.listCameras(!1)).length}catch{return!1}}static async listCameras(l=!1){if(!navigator.mediaDevices)return[];let n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput"),o;try{l&&(await n()).every(i=>!i.label)&&(o=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await n()).map((i,v)=>({id:i.deviceId,label:i.label||(v===0?"Default Camera":`Camera ${v+1}`)}))}finally{o&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),se._stopVideoStream(o))}}async hasFlash(){let l;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;l=this.$video.srcObject}else l=(await this._getCameraStream()).stream;return"torch"in l.getVideoTracks()[0].getSettings()}catch{return!1}finally{l&&l!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),se._stopVideoStream(l))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(l){throw this._flashOn=!1,l}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),se._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:l,facingMode:n}=await this._getCameraStream();!this._active||this._paused?se._stopVideoStream(l):(this._setVideoMirror(n),this.$video.srcObject=l,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(l){if(!this._paused)throw this._active=!1,l}}stop(){this.pause(),this._active=!1}async pause(l=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let n=()=>{this.$video.srcObject instanceof MediaStream&&(se._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return l?(n(),!0):(await new Promise(o=>setTimeout(o,300)),this._paused?(n(),!0):!1)}async setCamera(l){l!==this._preferredCamera&&(this._preferredCamera=l,await this._restartVideoStream())}static async scanImage(l,n,o,i,v=!1,w=!1){let T,I=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(T=n.scanRegion,o=n.qrEngine,i=n.canvas,v=n.disallowCanvasResizing||!1,w=n.alsoTryWithoutScanRegion||!1,I=!0):console.warn(n||o||i||v||w?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!o;try{let F,y;[o,F]=await Promise.all([o||se.createQrEngine(),se._loadImage(l)]),[i,y]=se._drawToCanvas(F,T,i,v);let f;if(o instanceof Worker){let g=o;n||se._postWorkerMessageSync(g,"inversionMode","both"),f=await new Promise((k,m)=>{let j,G,A,z=-1;G=M=>{M.data.id===z&&(g.removeEventListener("message",G),g.removeEventListener("error",A),clearTimeout(j),M.data.data!==null?k({data:M.data.data,cornerPoints:se._convertPoints(M.data.cornerPoints,T)}):m(se.NO_QR_CODE_FOUND))},A=M=>{g.removeEventListener("message",G),g.removeEventListener("error",A),clearTimeout(j),m("Scanner error: "+(M?M.message||M:"Unknown Error"))},g.addEventListener("message",G),g.addEventListener("error",A),j=setTimeout(()=>A("timeout"),1e4);let S=y.getImageData(0,0,i.width,i.height);z=se._postWorkerMessageSync(g,"decode",S,[S.data.buffer])})}else f=await Promise.race([new Promise((g,k)=>window.setTimeout(()=>k("Scanner error: timeout"),1e4)),(async()=>{try{var[g]=await o.detect(i);if(!g)throw se.NO_QR_CODE_FOUND;return{data:g.rawValue,cornerPoints:se._convertPoints(g.cornerPoints,T)}}catch(k){if(g=k.message||k,/not implemented|service unavailable/.test(g))return se._disableBarcodeDetector=!0,se.scanImage(l,{scanRegion:T,canvas:i,disallowCanvasResizing:v,alsoTryWithoutScanRegion:w});throw`Scanner error: ${g}`}})()]);return I?f:f.data}catch(F){if(!T||!w)throw F;let y=await se.scanImage(l,{qrEngine:o,canvas:i,disallowCanvasResizing:v});return I?y:y.data}finally{n||se._postWorkerMessage(o,"close")}}setGrayscaleWeights(l,n,o,i=!0){se._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:l,green:n,blue:o,useIntegerApproximation:i})}setInversionMode(l){se._postWorkerMessage(this._qrEnginePromise,"inversionMode",l)}static async createQrEngine(l){if(l&&console.warn("Specifying a worker path is not required and not supported anymore."),l=()=>Ut(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(o=>o.createWorker()),!(!se._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return l();let n=navigator.userAgentData;return n&&n.brands.some(({brand:o})=>/Chromium/i.test(o))&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:o,platformVersion:i})=>/arm/i.test(o||"arm")&&13<=parseInt(i||"13")).catch(()=>!0)?l():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(l){let n=Math.round(.6666666666666666*Math.min(l.videoWidth,l.videoHeight));return{x:Math.round((l.videoWidth-n)/2),y:Math.round((l.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var l=this.$video,n=l.videoWidth,o=l.videoHeight,i=l.offsetWidth,v=l.offsetHeight,w=l.offsetLeft,T=l.offsetTop,I=window.getComputedStyle(l),F=I.objectFit,y=n/o,f=i/v;switch(F){case"none":var g=n,k=o;break;case"fill":g=i,k=v;break;default:(F==="cover"?y>f:y<f)?(k=v,g=k*y):(g=i,k=g/y),F==="scale-down"&&(g=Math.min(g,n),k=Math.min(k,o))}var[m,j]=I.objectPosition.split(" ").map((A,z)=>{const S=parseFloat(A);return A.endsWith("%")?(z?v-k:i-g)*S/100:S});I=this._scanRegion.width||n,f=this._scanRegion.height||o,F=this._scanRegion.x||0;var G=this._scanRegion.y||0;y=this.$overlay.style,y.width=`${I/n*g}px`,y.height=`${f/o*k}px`,y.top=`${T+j+G/o*k}px`,o=/scaleX\(-1\)/.test(l.style.transform),y.left=`${w+(o?i-m-g:m)+(o?n-F-I:F)/n*g}px`,y.transform=l.style.transform}})}static _convertPoints(l,n){if(!n)return l;let o=n.x||0,i=n.y||0,v=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let w of l)w.x=w.x*v+o,w.y=w.y*n+i;return l}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var l=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;l<n&&await new Promise(i=>setTimeout(i,n-l)),this._lastScanTimestamp=Date.now();try{var o=await se.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!se._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=se.createQrEngine()),o?(this._onDecode?this._onDecode(o):this._legacyOnDecode&&this._legacyOnDecode(o.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:i,y:v})=>`${i},${v}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(l){l!==se.NO_QR_CODE_FOUND&&console.log(l)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let l=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=[{width:{min:1024}},{width:{min:768}},{}],o=n.map(i=>Object.assign({},i,{[l]:{exact:this._preferredCamera}}));for(let i of[...o,...n])try{let v=await navigator.mediaDevices.getUserMedia({video:i,audio:!1}),w=this._getFacingMode(v)||(i.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:v,facingMode:w}}catch{}throw"Camera not found."}async _restartVideoStream(){let l=this._paused;await this.pause(!0)&&!l&&this._active&&await this.start()}static _stopVideoStream(l){for(let n of l.getTracks())n.stop(),l.removeTrack(n)}_setVideoMirror(l){this.$video.style.transform="scaleX("+(l==="user"?-1:1)+")"}_getFacingMode(l){return(l=l.getVideoTracks()[0])?/rear|back|environment/i.test(l.label)?"environment":/front|user|face/i.test(l.label)?"user":null:null}static _drawToCanvas(l,n,o,i=!1){o=o||document.createElement("canvas");let v=n&&n.x?n.x:0,w=n&&n.y?n.y:0,T=n&&n.width?n.width:l.videoWidth||l.width,I=n&&n.height?n.height:l.videoHeight||l.height;return i||(i=n&&n.downScaledWidth?n.downScaledWidth:T,n=n&&n.downScaledHeight?n.downScaledHeight:I,o.width!==i&&(o.width=i),o.height!==n&&(o.height=n)),n=o.getContext("2d",{alpha:!1}),n.imageSmoothingEnabled=!1,n.drawImage(l,v,w,T,I,0,0,o.width,o.height),[o,n]}static async _loadImage(l){if(l instanceof Image)return await se._awaitImageLoad(l),l;if(l instanceof HTMLVideoElement||l instanceof HTMLCanvasElement||l instanceof SVGImageElement||"OffscreenCanvas"in window&&l instanceof OffscreenCanvas||"ImageBitmap"in window&&l instanceof ImageBitmap)return l;if(l instanceof File||l instanceof Blob||l instanceof URL||typeof l=="string"){let n=new Image;n.src=l instanceof File||l instanceof Blob?URL.createObjectURL(l):l.toString();try{return await se._awaitImageLoad(n),n}finally{(l instanceof File||l instanceof Blob)&&URL.revokeObjectURL(n.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(l){l.complete&&l.naturalWidth!==0||await new Promise((n,o)=>{let i=v=>{l.removeEventListener("load",i),l.removeEventListener("error",i),v instanceof ErrorEvent?o("Image load error"):n()};l.addEventListener("load",i),l.addEventListener("error",i)})}static async _postWorkerMessage(l,n,o,i){return se._postWorkerMessageSync(await l,n,o,i)}static _postWorkerMessageSync(l,n,o,i){if(!(l instanceof Worker))return-1;let v=se._workerMessageId++;return l.postMessage({id:v,type:n,data:o},i),v}}se.DEFAULT_CANVAS_SIZE=400;se.NO_QR_CODE_FOUND="No QR code found";se._disableBarcodeDetector=!1;se._workerMessageId=0;const wl={class:"pwa-qr-scanner"},_l={class:"relative bg-black rounded-lg overflow-hidden shadow-2xl"},$l={class:"absolute inset-0 pointer-events-none"},zl={key:0,class:"absolute left-6 right-6 h-0.5 bg-gradient-to-r from-transparent via-blue-400 to-transparent scanning-line"},Sl={class:"absolute top-4 left-4 right-4"},Cl={key:0,class:"bg-red-500/90 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm"},jl={key:0,class:"text-xs mt-1 opacity-75"},Il={key:1,class:"text-xs mt-2 bg-yellow-500/20 p-2 rounded border border-yellow-400/30"},Tl={key:1,class:"bg-yellow-500/90 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm"},Ml={key:2,class:"bg-blue-500/90 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm"},Rl={key:3,class:"bg-green-500/90 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm"},Pl={key:1,class:"absolute bottom-4 left-4 right-4"},Ol={class:"flex items-center justify-between"},Dl={class:"flex-1"},El={class:"font-medium"},Al={class:"text-sm opacity-90"},Nl={class:"mt-4 flex flex-wrap gap-3 justify-center"},Fl={class:"flex justify-center space-x-3"},Bl=["disabled"],ql={class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ll={class:"flex space-x-2"},Ql=["disabled"],Wl={key:0,class:"mt-6"},Vl={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},Zl={class:"space-y-2 max-h-64 overflow-y-auto"},Ul={class:"flex-1"},Gl={class:"text-sm font-medium"},Kl={class:"text-xs text-gray-500 dark:text-gray-400"},Hl=ke({__name:"PWAQRScanner",props:{onScan:{},onError:{},autoStart:{type:Boolean,default:!1},showHistory:{type:Boolean,default:!0}},setup(c){const l=c,n=St(),o=yt(),i=Xt(),v=_();let w=null;const T=_(!1),I=_(null),F=_(!1),y=_(!1),f=_(""),g=_(!1),k=_(null),m=_([]),j=_({hasPermission:!1,facingMode:"environment"});B(()=>!y.value&&!I.value);const G=async()=>{if(!v.value){console.error("❌ Video element not available");return}try{if(console.log("🔍 Initializing QR Scanner..."),!se.hasCamera()){console.error("❌ No camera available"),I.value="Nie znaleziono kamery na urządzeniu";return}console.log("📷 Camera support confirmed - creating scanner..."),w=new se(v.value,L=>{console.log("🎯 QR detected:",L.data),M(L.data)},{highlightScanRegion:!0,highlightCodeOutline:!0,returnDetailedScanResult:!0}),console.log("✅ QR Scanner created successfully"),j.value.hasPermission=!0,l.autoStart&&(console.log("🚀 Auto-starting scanner..."),await A())}catch(L){console.error("❌ Failed to initialize QR scanner:",L);let P="Nie udało się zainicjalizować skanera";L instanceof Error&&(L.name==="NotAllowedError"?P="Odmówiono dostępu do kamery. Sprawdź uprawnienia w przeglądarce.":L.name==="NotFoundError"?P="Nie znaleziono kamery na urządzeniu.":L.name==="NotSupportedError"?P="Kamera nie jest obsługiwana w tej przeglądarce.":L.name==="NotReadableError"?P="Kamera jest używana przez inną aplikację.":L.name==="OverconstrainedError"?P="Problemy z ustawieniami kamery. Spróbuj ponownie.":P=`Błąd kamery: ${L.message}`),I.value=P,j.value.hasPermission=!1}},A=async()=>{var L,P;if(!w){console.error("❌ Scanner not initialized");return}try{y.value=!0,I.value=null,await w.start(),T.value=!0,F.value=!0,console.log("📱 Scanning started"),(P=(L=i.currentUser)==null?void 0:L.preferences)!=null&&P.hapticFeedback&&"vibrate"in navigator&&navigator.vibrate(50)}catch(h){console.error("Failed to start scanning:",h);let E="Nie udało się uruchomić skanera";h instanceof Error&&(h.name==="NotAllowedError"?E="Odmówiono dostępu do kamery. Sprawdź uprawnienia w przeglądarce.":h.name==="NotFoundError"?E="Nie znaleziono kamery na urządzeniu.":h.name==="OverconstrainedError"?E="Problemy z konfiguracją kamery. Spróbuj ponownie.":E=`Błąd kamery: ${h.message}`),I.value=E,T.value=!1}finally{y.value=!1}},z=()=>{w&&(w.stop(),T.value=!1,console.log("📱 Scanning stopped"))},S=(L,P,h,E)=>{const H={id:Date.now(),qrCode:L,success:P,athleteData:h,error:E,timestamp:Date.now()};return k.value=H,m.value.unshift(H),m.value.length>10&&(m.value=m.value.slice(0,10)),H},M=async L=>{var h,E,H,ie,Z,pe,ue,re,ae,ce,ye;console.log("📱 QR Code detected:",L);try{const Se=n.findAthleteByQR(L);if(Se)S(L,!0,Se),g.value=!0,setTimeout(()=>{g.value=!1},3e3),(h=l.onScan)==null||h.call(l,L,Se),i.canCheckin&&await W(Se),(H=(E=i.currentUser)==null?void 0:E.preferences)!=null&&H.hapticFeedback&&"vibrate"in navigator&&navigator.vibrate([50,50,50]),(Z=(ie=i.currentUser)==null?void 0:ie.preferences)!=null&&Z.soundFeedback&&console.log("🔊 Success sound");else{const he=`Nie znaleziono zawodnika z kodem: ${L}`;S(L,!1,void 0,he),g.value=!0,setTimeout(()=>{g.value=!1},3e3),(pe=l.onError)==null||pe.call(l,he),(re=(ue=i.currentUser)==null?void 0:ue.preferences)!=null&&re.hapticFeedback&&"vibrate"in navigator&&navigator.vibrate([100,100,100])}}catch(Se){console.error("Error processing QR code:",Se);const he="Błąd przetwarzania kodu QR";S(L,!1,void 0,he),(ae=l.onError)==null||ae.call(l,he)}const P=((ye=(ce=i.currentUser)==null?void 0:ce.preferences)==null?void 0:ye.scanDelay)||1e3;setTimeout(()=>{},P)},C=()=>{const L=f.value.trim();L&&(M(L),f.value="")},W=async L=>{if(L.checked_in){console.log("👤 Athlete already checked in:",L.nr_startowy);return}try{const P={qr_code:L.qr_code,nr_startowy:L.nr_startowy,device_id:`pwa-scanner-${i.userType}`,checkpoint_name:"check-in"};if(o.isOnline){const h=await fetch("/api/unified/scan-qr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(h.ok){const E=await h.json();n.updateAthlete({...L,checked_in:!0,check_in_time:new Date().toISOString()}),console.log("✅ Check-in successful:",E)}}else o.addToQueue({type:"checkin",data:P,endpoint:"/api/unified/scan-qr",method:"POST"}),n.updateAthlete({...L,checked_in:!0,check_in_time:new Date().toISOString()}),console.log("📥 Check-in queued for offline sync")}catch(P){console.error("Check-in error:",P)}},b=()=>{g.value=!1},d=()=>{const L=window.location.protocol+"//"+window.location.host;alert(`🔧 Uprawnienia kamery:

1. Chrome: Kliknij ikonę 🔒 w pasku adresu → Uprawnienia witryny → Kamera: Zezwalaj
2. Safari: Ustawienia → Prywatność i bezpieczeństwo → Kamera → Zezwalaj dla ${L}
3. Firefox: Kliknij ikonę 🛡️ w pasku adresu → Połączenie zabezpieczone → Uprawnienia

WAŻNE: Odśwież stronę po zmianie uprawnień!`)},x=B(()=>window.location.hostname==="localhost"),R=B(()=>({protocol:window.location.protocol==="https:"?"🔒 HTTPS":"🌐 HTTP",secure:window.isSecureContext?"✅ Secure":"❌ Not Secure",mediaDevices:navigator.mediaDevices?"✅ MediaDevices":"❌ No MediaDevices"})),Q=L=>L?`#${L.nr_startowy} ${L.imie} ${L.nazwisko}`:"Brak danych",K=L=>new Date(L).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return $e(async()=>{if(n.allAthletes.length===0)try{await n.fetchAthletes()}catch(L){console.warn("Could not load athletes:",L)}await qt(),await G()}),ut(()=>{w&&w.destroy()}),(L,P)=>(s(),r("div",wl,[e("div",_l,[e("video",{ref_key:"videoElement",ref:v,class:U(["w-full h-64 md:h-80 object-cover",{mirror:j.value.facingMode==="user"}]),autoplay:"",muted:"",playsinline:""},null,2),e("div",$l,[P[2]||(P[2]=de('<div class="absolute inset-4 border-2 border-white/30 rounded-lg" data-v-52d1375d><div class="absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-blue-400 rounded-tl-lg" data-v-52d1375d></div><div class="absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-blue-400 rounded-tr-lg" data-v-52d1375d></div><div class="absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-blue-400 rounded-bl-lg" data-v-52d1375d></div><div class="absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-blue-400 rounded-br-lg" data-v-52d1375d></div></div>',1)),T.value?(s(),r("div",zl)):N("",!0),e("div",Sl,[I.value?(s(),r("div",Cl,[e("div",null,"❌ "+t(I.value),1),x.value?(s(),r("div",jl,t(R.value.protocol)+" | "+t(R.value.secure)+" | "+t(R.value.mediaDevices),1)):N("",!0),R.value.secure?N("",!0):(s(),r("div",Il,P[1]||(P[1]=[oe(" 🔒 "),e("strong",null,"Rozwiązanie:",-1),oe(" Użyj HTTPS adresu z tego urządzenia ")])))])):j.value.hasPermission?y.value?(s(),r("div",Ml," 🔄 Inicjalizacja kamery... ")):T.value?(s(),r("div",Rl," 📱 Skanowanie... Przyłóż kod QR do ramki ")):N("",!0):(s(),r("div",Tl," 📷 Wymagane uprawnienia do kamery "))]),k.value&&g.value?(s(),r("div",Pl,[e("div",{class:U(["px-4 py-3 rounded-lg backdrop-blur-sm border",k.value.success?"bg-green-500/90 text-white border-green-400":"bg-red-500/90 text-white border-red-400"])},[e("div",Ol,[e("div",Dl,[e("div",El,t(k.value.success?"✅ Zeskanowano":"❌ Błąd"),1),e("div",Al,t(k.value.success?Q(k.value.athleteData):k.value.error),1)]),e("button",{onClick:b,class:"ml-2 p-1 hover:bg-white/20 rounded"},[q(V(gt),{class:"h-4 w-4"})])])],2)])):N("",!0)])]),e("div",Nl,[e("div",Fl,[T.value?(s(),r("button",{key:1,onClick:z,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center space-x-2 text-sm font-medium"},[q(V(wt),{class:"h-4 w-4"}),P[3]||(P[3]=e("span",null,"Wyłącz kamerę",-1))])):(s(),r("button",{key:0,onClick:A,disabled:y.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm font-medium"},[y.value?(s(),ge(V(Ee),{key:1,class:"h-4 w-4 animate-spin"})):(s(),ge(V(ft),{key:0,class:"h-4 w-4"})),e("span",null,t(y.value?"Ładowanie...":"Włącz kamerę"),1)],8,Bl))]),I.value?(s(),r("button",{key:0,onClick:d,class:"px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-all text-sm"}," 🔧 Pomoc z uprawnieniami ")):N("",!0)]),e("div",ql,[P[4]||(P[4]=e("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 📝 Ręczne wprowadzenie ",-1)),e("div",Ll,[X(e("input",{"onUpdate:modelValue":P[0]||(P[0]=h=>f.value=h),onKeyup:Lt(C,["enter"]),type:"text",placeholder:"Wpisz kod QR lub numer startowy...",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[xe,f.value]]),e("button",{onClick:C,disabled:!f.value.trim(),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg disabled:bg-gray-300 disabled:text-gray-500 transition-all"}," ✓ ",8,Ql)])]),m.value.length>0?(s(),r("div",Wl,[e("h3",Vl," 📱 Ostatnie skany ("+t(m.value.length)+") ",1),e("div",Zl,[(s(!0),r(J,null,ee(m.value.slice(0,5),h=>(s(),r("div",{key:h.id,class:U(["flex items-center justify-between p-3 rounded-lg border",h.success?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800"])},[e("div",Ul,[e("div",Gl,t(h.success?"✅":"❌")+" "+t(h.success?Q(h.athleteData):"Błąd"),1),e("div",Kl,t(K(h.timestamp))+" • "+t(h.qrCode),1)])],2))),128))])])):N("",!0)]))}}),dt=Te(Hl,[["__scopeId","data-v-52d1375d"]]),Jl={class:"pwa-office-view h-full bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},Yl={class:"p-4"},Xl={class:"grid grid-cols-2 gap-4 mb-6"},ei={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4"},ti={class:"flex items-center"},ai={class:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"},si={class:"ml-3"},ri={class:"text-2xl font-bold text-gray-900 dark:text-white"},oi={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4"},ni={class:"flex items-center"},li={class:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg"},ii={class:"ml-3"},di={class:"text-2xl font-bold text-gray-900 dark:text-white"},ui={class:"px-4 pb-4 flex-1"},ci={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"},gi={class:"text-center mb-4"},pi={class:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-3"},yi={key:0,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4"},vi={class:"space-y-2"},xi={class:"flex items-center space-x-3"},mi={class:"w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center"},bi={class:"font-medium text-gray-900 dark:text-white"},ki={class:"text-sm text-gray-500 dark:text-gray-400"},hi={class:"text-right"},fi={class:"text-xs text-gray-500 dark:text-gray-400"},wi={key:0,class:"fixed bottom-4 left-4 right-4 z-50"},_i={class:"flex items-center"},$i=ke({__name:"OfficeView",setup(c){const l=St(),n=yt(),o=_(""),i=_("success"),v=_([]),w=B(()=>l.allAthletes.filter(g=>g.checked_in).length),T=B(()=>l.allAthletes.filter(g=>!g.checked_in).length),I=async g=>{try{const k=parseInt(g);if(isNaN(k)){y("Nieprawidłowy kod QR","error");return}const m=l.allAthletes.find(G=>G.nr_startowy===k);if(!m){y(`Nie znaleziono zawodnika #${k}`,"error");return}if(m.checked_in){y(`${m.imie} ${m.nazwisko} już zameldowany`,"error");return}n.addToQueue({type:"checkin",data:{nr_startowy:k,timestamp:new Date().toISOString()},endpoint:"/api/unified/scan-qr",method:"POST"}),!0&&(m.checked_in=!0,m.check_in_time=new Date().toISOString(),v.value.unshift({...m,check_in_time:new Date().toISOString()}),y(`✅ ${m.imie} ${m.nazwisko} zameldowany!`,"success"),"vibrate"in navigator&&navigator.vibrate(200))}catch(k){console.error("Check-in error:",k),y("Błąd podczas meldowania","error")}},F=g=>{y(g,"error")},y=(g,k)=>{o.value=g,i.value=k,setTimeout(()=>{o.value=""},3e3)},f=g=>new Date(g).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"});return $e(async()=>{await l.fetchAthletes()}),(g,k)=>(s(),r("div",Jl,[k[5]||(k[5]=de('<div class="bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-bold text-gray-900 dark:text-white">Biuro Obsługi</h1><p class="text-sm text-gray-600 dark:text-gray-400">Meldowanie zawodników</p></div><div class="flex items-center space-x-2"><div class="flex items-center space-x-1 bg-green-100 dark:bg-green-900 px-2 py-1 rounded-full"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="text-xs font-medium text-green-700 dark:text-green-300">Online</span></div></div></div></div></div>',1)),e("div",Yl,[e("div",Xl,[e("div",ei,[e("div",ti,[e("div",ai,[q(V(ct),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),e("div",si,[k[0]||(k[0]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Zameldowani",-1)),e("p",ri,t(w.value),1)])])]),e("div",oi,[e("div",ni,[e("div",li,[q(V(Be),{class:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})]),e("div",ii,[k[1]||(k[1]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Oczekujący",-1)),e("p",di,t(T.value),1)])])])])]),e("div",ui,[e("div",ci,[e("div",gi,[e("div",pi,[q(V(Ue),{class:"h-8 w-8 text-blue-600 dark:text-blue-400"})]),k[2]||(k[2]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Skanuj QR Zawodnika",-1)),k[3]||(k[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Przyłóż QR kod do kamery",-1))]),q(dt,{"user-type":"office","auto-start":!0,onScanSuccess:I,onScanError:F})]),v.value.length>0?(s(),r("div",yi,[k[4]||(k[4]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Ostatnie meldunki",-1)),e("div",vi,[(s(!0),r(J,null,ee(v.value.slice(0,5),m=>(s(),r("div",{key:m.nr_startowy,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",xi,[e("div",mi,[q(V(Ge),{class:"h-5 w-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("p",bi,t(m.imie)+" "+t(m.nazwisko),1),e("p",ki,"#"+t(m.nr_startowy)+" · "+t(m.kategoria),1)])]),e("div",hi,[e("p",fi,t(f(m.check_in_time)),1)])]))),128))])])):N("",!0)]),o.value?(s(),r("div",wi,[e("div",{class:U(["p-4 rounded-lg shadow-lg",i.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},[e("div",_i,[i.value==="success"?(s(),ge(V(Ge),{key:0,class:"h-5 w-5 mr-2"})):(s(),ge(V(De),{key:1,class:"h-5 w-5 mr-2"})),e("span",null,t(o.value),1)])],2)])):N("",!0)]))}}),zi={class:"pwa-judge-view h-full bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800"},Si={class:"p-4"},Ci={class:"grid grid-cols-3 gap-3 mb-6"},ji={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3"},Ii={class:"text-center"},Ti={class:"text-lg font-bold text-blue-600 dark:text-blue-400"},Mi={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3"},Ri={class:"text-center"},Pi={class:"text-lg font-bold text-yellow-600 dark:text-yellow-400"},Oi={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-3"},Di={class:"text-center"},Ei={class:"text-lg font-bold text-green-600 dark:text-green-400"},Ai={class:"px-4 pb-4 flex-1"},Ni={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"},Fi={class:"text-center mb-4"},Bi={class:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-3"},qi={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 mb-6"},Li={class:"grid grid-cols-2 gap-3"},Qi=["disabled"],Wi=["disabled"],Vi={class:"mt-4 grid grid-cols-2 gap-3"},Zi=["disabled"],Ui=["disabled"],Gi={key:0,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 mb-6"},Ki={class:"flex items-center justify-between"},Hi={class:"font-medium text-gray-900 dark:text-white"},Ji={class:"text-sm text-gray-500 dark:text-gray-400"},Yi={class:"text-right"},Xi={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4"},ed={class:"space-y-2"},td={class:"flex items-center space-x-3"},ad={class:"font-medium text-gray-900 dark:text-white"},sd={class:"text-sm text-gray-500 dark:text-gray-400"},rd={class:"text-right"},od={class:"text-xs text-gray-500 dark:text-gray-400"},nd={key:0,class:"fixed bottom-4 left-4 right-4 z-50"},ld={class:"flex items-center"},id=ke({__name:"JudgeView",setup(c){const l=St(),n=yt(),o=_(""),i=_("success"),v=_(null),w=_(null),T=_([]),I=B(()=>l.allAthletes.filter(W=>W.checked_in&&!W.status).length),F=B(()=>l.allAthletes.filter(W=>W.status==="TIMING").length),y=B(()=>l.allAthletes.filter(W=>W.status==="FINISHED").length),f=async W=>{try{const b=parseInt(W);if(isNaN(b)){M("Nieprawidłowy kod QR","error");return}const d=l.allAthletes.find(x=>x.nr_startowy===b);if(!d){M(`Nie znaleziono zawodnika #${b}`,"error");return}if(!d.checked_in){M(`Zawodnik #${b} nie jest zameldowany`,"error");return}v.value=d,M(`✅ Zweryfikowano: ${d.imie} ${d.nazwisko}`,"success"),"vibrate"in navigator&&navigator.vibrate(100)}catch(b){console.error("Verification error:",b),M("Błąd podczas weryfikacji","error")}},g=()=>{v.value&&(w.value=v.value,v.value.status="TIMING",n.addToQueue({type:"scan",data:{nr_startowy:v.value.nr_startowy,action:"start",timestamp:new Date().toISOString()},endpoint:"/api/unified/start-timer",method:"POST"}),G("start",v.value,"Timer wystartowany"),M(`⏱️ Timer wystartowany dla ${v.value.imie} ${v.value.nazwisko}`,"success"))},k=()=>{w.value&&(w.value.status="FINISHED",n.addToQueue({type:"scan",data:{nr_startowy:w.value.nr_startowy,action:"finish",timestamp:new Date().toISOString()},endpoint:"/api/unified/stop-timer",method:"POST"}),G("finish",w.value,"Timer zatrzymany"),M(`🏁 Timer zatrzymany dla ${w.value.imie} ${w.value.nazwisko}`,"success"),w.value=null,v.value=null)},m=()=>{v.value&&(v.value.status="DNF",n.addToQueue({type:"scan",data:{nr_startowy:v.value.nr_startowy,action:"dnf",timestamp:new Date().toISOString()},endpoint:"/api/unified/mark-dnf",method:"POST"}),G("dnf",v.value,"Oznaczono DNF"),M(`⚠️ DNF: ${v.value.imie} ${v.value.nazwisko}`,"success"),v.value=null)},j=()=>{v.value&&(v.value.status="DSQ",n.addToQueue({type:"scan",data:{nr_startowy:v.value.nr_startowy,action:"dsq",timestamp:new Date().toISOString()},endpoint:"/api/unified/mark-dsq",method:"POST"}),G("dsq",v.value,"Oznaczono DSQ"),M(`❌ DSQ: ${v.value.imie} ${v.value.nazwisko}`,"success"),v.value=null)},G=(W,b,d)=>{T.value.unshift({id:Date.now(),type:W,athlete_name:`${b.imie} ${b.nazwisko}`,action:d,timestamp:new Date().toISOString()})},A=W=>{switch(W){case"TIMING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"FINISHED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"DNF":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"DSQ":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}},z=W=>{switch(W){case"TIMING":return"W trakcie";case"FINISHED":return"Ukończone";case"DNF":return"DNF";case"DSQ":return"DSQ";default:return"Gotowy"}},S=W=>{M(W,"error")},M=(W,b)=>{o.value=W,i.value=b,setTimeout(()=>{o.value=""},3e3)},C=W=>new Date(W).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"});return $e(async()=>{await l.fetchAthletes()}),(W,b)=>(s(),r("div",zi,[b[12]||(b[12]=de('<div class="bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-bold text-gray-900 dark:text-white">Panel Sędziego</h1><p class="text-sm text-gray-600 dark:text-gray-400">Kontrola linii startu</p></div><div class="flex items-center space-x-2"><div class="flex items-center space-x-1 bg-green-100 dark:bg-green-900 px-2 py-1 rounded-full"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="text-xs font-medium text-green-700 dark:text-green-300">Aktywny</span></div></div></div></div></div>',1)),e("div",Si,[e("div",Ci,[e("div",ji,[e("div",Ii,[e("div",Ti,t(I.value),1),b[0]||(b[0]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Gotowi",-1))])]),e("div",Mi,[e("div",Ri,[e("div",Pi,t(F.value),1),b[1]||(b[1]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"W trakcie",-1))])]),e("div",Oi,[e("div",Di,[e("div",Ei,t(y.value),1),b[2]||(b[2]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Ukończone",-1))])])])]),e("div",Ai,[e("div",Ni,[e("div",Fi,[e("div",Bi,[q(V(Wt),{class:"h-8 w-8 text-green-600 dark:text-green-400"})]),b[3]||(b[3]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Weryfikacja Zawodnika",-1)),b[4]||(b[4]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Skanuj QR przed startem",-1))]),q(dt,{"user-type":"judge","auto-start":!0,onScanSuccess:f,onScanError:S})]),e("div",qi,[b[9]||(b[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Kontrola manualna",-1)),e("div",Li,[e("button",{onClick:g,disabled:!v.value,class:"flex items-center justify-center space-x-2 bg-green-600 text-white p-3 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed"},[q(V(ft),{class:"h-5 w-5"}),b[5]||(b[5]=e("span",null,"START",-1))],8,Qi),e("button",{onClick:k,disabled:!w.value,class:"flex items-center justify-center space-x-2 bg-red-600 text-white p-3 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed"},[q(V(wt),{class:"h-5 w-5"}),b[6]||(b[6]=e("span",null,"STOP",-1))],8,Wi)]),e("div",Vi,[e("button",{onClick:m,disabled:!v.value,class:"flex items-center justify-center space-x-2 bg-yellow-600 text-white p-2 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed text-sm"},[q(V(De),{class:"h-4 w-4"}),b[7]||(b[7]=e("span",null,"DNF",-1))],8,Zi),e("button",{onClick:j,disabled:!v.value,class:"flex items-center justify-center space-x-2 bg-red-600 text-white p-2 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed text-sm"},[q(V(gt),{class:"h-4 w-4"}),b[8]||(b[8]=e("span",null,"DSQ",-1))],8,Ui)])]),v.value?(s(),r("div",Gi,[b[10]||(b[10]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Wybrany zawodnik",-1)),e("div",Ki,[e("div",null,[e("p",Hi,t(v.value.imie)+" "+t(v.value.nazwisko),1),e("p",Ji,"#"+t(v.value.nr_startowy)+" · "+t(v.value.kategoria),1)]),e("div",Yi,[e("div",{class:U(["px-2 py-1 rounded-full text-xs font-medium",A(v.value.status||"WAITING")])},t(z(v.value.status||"WAITING")),3)])])])):N("",!0),T.value.length>0?(s(),r("div",Xi,[b[11]||(b[11]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Ostatnie akcje",-1)),e("div",ed,[(s(!0),r(J,null,ee(T.value.slice(0,5),d=>(s(),r("div",{key:d.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",td,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center",d.type==="start"?"bg-green-100 dark:bg-green-900":d.type==="finish"?"bg-blue-100 dark:bg-blue-900":"bg-yellow-100 dark:bg-yellow-900"])},[d.type==="start"?(s(),ge(V(ft),{key:0,class:"h-4 w-4 text-green-600 dark:text-green-400"})):d.type==="finish"?(s(),ge(V(wt),{key:1,class:"h-4 w-4 text-blue-600 dark:text-blue-400"})):(s(),ge(V(De),{key:2,class:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}))],2),e("div",null,[e("p",ad,t(d.athlete_name),1),e("p",sd,t(d.action),1)])]),e("div",rd,[e("p",od,t(C(d.timestamp)),1)])]))),128))])])):N("",!0)]),o.value?(s(),r("div",nd,[e("div",{class:U(["p-4 rounded-lg shadow-lg",i.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},[e("div",ld,[i.value==="success"?(s(),ge(V(Ge),{key:0,class:"h-5 w-5 mr-2"})):(s(),ge(V(De),{key:1,class:"h-5 w-5 mr-2"})),e("span",null,t(o.value),1)])],2)])):N("",!0)]))}}),dd={class:"pwa-router h-screen bg-gray-100 dark:bg-gray-900"},ud={key:0,class:"h-full flex flex-col"},cd={class:"flex-1 p-6 space-y-4"},gd=["onClick"],pd={class:"flex items-center space-x-4"},yd={class:"flex-1"},vd={class:"text-lg font-semibold text-gray-900 dark:text-white"},xd={class:"text-sm text-gray-600 dark:text-gray-400"},md={class:"mt-2 flex flex-wrap gap-2"},bd={class:"text-gray-400"},kd={class:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700"},hd={class:"text-center"},fd={class:"mt-2 flex items-center justify-center space-x-4"},wd={class:"flex items-center space-x-1"},_d={class:"text-xs text-gray-500 dark:text-gray-400"},$d={key:0,class:"flex items-center space-x-1"},zd={class:"text-xs text-yellow-600 dark:text-yellow-400"},Sd={key:1,class:"h-full flex flex-col"},Cd={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},jd={class:"px-4 py-2"},Id={class:"flex items-center justify-between"},Td={class:"flex items-center space-x-2"},Md={class:"text-sm font-medium text-gray-900 dark:text-white"},Rd={class:"flex-1 overflow-hidden"},Pd=ke({__name:"PWARouter",setup(c){const l=Xt(),n=yt(),o=_(null),i=_(!1),v=_(null),w=[{id:"office",name:"Biuro Obsługi",description:"Meldowanie zawodników, rejestracja uczestników",icon:lt,bgColor:"bg-blue-100 dark:bg-blue-900",iconColor:"text-blue-600 dark:text-blue-400",features:["Skaner QR","Meldowanie","Lista zawodników"]},{id:"judge",name:"Sędzia",description:"Kontrola linii startu, weryfikacja, timing",icon:Wt,bgColor:"bg-green-100 dark:bg-green-900",iconColor:"text-green-600 dark:text-green-400",features:["Weryfikacja","Timer","DNF/DSQ"]},{id:"athlete",name:"Zawodnik",description:"Sprawdzanie wyników, self-scan",icon:it,bgColor:"bg-purple-100 dark:bg-purple-900",iconColor:"text-purple-600 dark:text-purple-400",features:["Moje wyniki","QR weryfikacja","Statystyki"]},{id:"trainer",name:"Trener",description:"Śledzenie podopiecznych, statystyki klubu",icon:xa,bgColor:"bg-orange-100 dark:bg-orange-900",iconColor:"text-orange-600 dark:text-orange-400",features:["Podopieczni","Statystyki klubu","Wyniki"]}],T=B(()=>n.isOnline),I=B(()=>n.queueCount),F=k=>{o.value=k,l.setUserType(k),localStorage.setItem("skatecross-user-type",k)},y=()=>{o.value=null,localStorage.removeItem("skatecross-user-type")},f=()=>w.find(k=>k.id===o.value),g=async()=>{if(v.value){v.value.prompt();const{outcome:k}=await v.value.userChoice;k==="accepted"&&console.log("🎉 PWA installed successfully"),v.value=null,i.value=!1}};return $e(()=>{const k=localStorage.getItem("skatecross-user-type");k&&(o.value=k,l.setUserType(k)),window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),v.value=m,i.value=!0}),window.addEventListener("appinstalled",()=>{i.value=!1,console.log("✅ PWA installed")})}),(k,m)=>{var j,G,A,z;return s(),r("div",dd,[o.value?(s(),r("div",Sd,[e("div",Cd,[e("div",jd,[e("div",Id,[e("button",{onClick:y,class:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"},[q(V(va),{class:"h-5 w-5"}),m[2]||(m[2]=e("span",{class:"text-sm"},"Zmień typ",-1))]),e("div",Td,[e("div",{class:U(["w-8 h-8 rounded-lg flex items-center justify-center",((j=f())==null?void 0:j.bgColor)||"bg-gray-100"])},[(s(),ge(Fe((G=f())==null?void 0:G.icon),{class:U(["h-4 w-4",((A=f())==null?void 0:A.iconColor)||"text-gray-600"])},null,8,["class"]))],2),e("span",Md,t((z=f())==null?void 0:z.name),1)]),i.value?(s(),r("button",{key:0,onClick:g,class:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700"},[q(V(Vt),{class:"h-4 w-4"}),m[3]||(m[3]=e("span",null,"Zainstaluj",-1))])):N("",!0)])])]),e("div",Rd,[o.value==="office"?(s(),ge($i,{key:0})):N("",!0),o.value==="judge"?(s(),ge(id,{key:1})):N("",!0),o.value==="athlete"?(s(),ge(dt,{key:2,"user-type":"athlete","auto-start":!0})):N("",!0),o.value==="trainer"?(s(),ge(dt,{key:3,"user-type":"trainer","auto-start":!0})):N("",!0)])])):(s(),r("div",ud,[m[1]||(m[1]=de('<div class="bg-white dark:bg-gray-800 shadow-lg"><div class="px-6 py-4"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">SKATECROSS PWA</h1><p class="text-sm text-gray-600 dark:text-gray-400">Wybierz typ użytkownika</p></div><div class="flex items-center space-x-2"><div class="flex items-center space-x-1 bg-green-100 dark:bg-green-900 px-2 py-1 rounded-full"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="text-xs font-medium text-green-700 dark:text-green-300">v37.0</span></div></div></div></div></div>',1)),e("div",cd,[(s(),r(J,null,ee(w,S=>e("div",{key:S.id,onClick:M=>F(S.id),class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-xl active:scale-95"},[e("div",pd,[e("div",{class:U(["p-4 rounded-xl",S.bgColor])},[(s(),ge(Fe(S.icon),{class:U(["h-8 w-8",S.iconColor])},null,8,["class"]))],2),e("div",yd,[e("h3",vd,t(S.name),1),e("p",xd,t(S.description),1),e("div",md,[(s(!0),r(J,null,ee(S.features,M=>(s(),r("span",{key:M,class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs text-gray-600 dark:text-gray-300 rounded-full"},t(M),1))),128))])]),e("div",bd,[q(V(ma),{class:"h-6 w-6"})])])],8,gd)),64))]),e("div",kd,[e("div",hd,[m[0]||(m[0]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," SKATECROSS v37.0 - Progressive Web App ",-1)),e("div",fd,[e("div",wd,[e("div",{class:U(["w-2 h-2 rounded-full",T.value?"bg-green-500":"bg-red-500"])},null,2),e("span",_d,t(T.value?"Online":"Offline"),1)]),I.value>0?(s(),r("div",$d,[q(V(Be),{class:"w-3 h-3 text-yellow-500"}),e("span",zd,t(I.value)+" w kolejce ",1)])):N("",!0)])])])]))])}}}),Od={class:"space-y-6"},Dd={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Ed={class:"flex items-center space-x-3"},Ad={class:"flex space-x-2"},Nd=["disabled"],Fd={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Bd={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},qd={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Ld={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Qd={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Wd={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Vd={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg"},Zd={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Ud={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Gd={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Kd={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 rounded-lg"},Hd={class:"flex"},Jd={class:"ml-3"},Yd={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},Xd={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},e0={class:"list-disc list-inside space-y-1"},t0={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},a0={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},s0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},r0={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},o0={class:"space-y-3 max-h-80 overflow-y-auto"},n0={class:"flex items-center space-x-3"},l0={class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},i0={class:"text-sm font-medium text-indigo-600 dark:text-indigo-400"},d0={class:"text-sm font-medium text-gray-900 dark:text-white"},u0={class:"text-xs text-gray-500 dark:text-gray-400"},c0={class:"text-right"},g0={class:"text-xs text-gray-500 dark:text-gray-400"},p0={class:"text-xs text-gray-400 dark:text-gray-500"},y0={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},v0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},x0={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},m0={class:"space-y-3"},b0={class:"flex items-center space-x-3"},k0={class:"text-sm font-medium text-gray-900 dark:text-white"},h0={class:"text-xs text-gray-500 dark:text-gray-400"},f0={class:"text-right"},w0={class:"text-xs text-gray-500 dark:text-gray-400"},_0={class:"flex space-x-1 text-xs"},$0={class:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded"},z0={class:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded"},S0={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},C0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},j0={class:"overflow-x-auto"},I0={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},T0={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},M0={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},R0={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},P0={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},O0={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},D0={class:"px-6 py-4 whitespace-nowrap"},E0={class:"flex items-center"},A0={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},N0={class:"ml-2 text-sm text-gray-500 dark:text-gray-300"},F0={key:1,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},B0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},q0={class:"space-y-2"},L0={class:"text-sm font-medium text-gray-600 dark:text-gray-300 w-20"},Q0={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-4 relative"},W0={class:"text-sm text-gray-500 dark:text-gray-400 w-24 text-right"},V0={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Z0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},U0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},G0={class:"text-xs text-gray-500"},K0={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},H0={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},J0={class:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4 mb-6"},Y0={class:"flex"},X0={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},eu={class:"space-y-4"},tu=["disabled"],au=["disabled"],su={key:0},ru=["disabled"],ou=["disabled"],nu={class:"space-y-4"},lu={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},iu={class:"flex items-center space-x-4 mb-3"},du={class:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},uu={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},cu={class:"text-lg font-medium text-gray-900 dark:text-white"},gu={class:"text-sm text-gray-500 dark:text-gray-400"},pu={class:"grid grid-cols-2 gap-3 text-sm"},yu={class:"font-medium text-gray-900 dark:text-white"},vu={class:"flex items-center mt-1"},xu={key:0,class:"inline-flex items-center px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full"},mu={key:1,class:"inline-flex items-center px-2 py-1 text-xs bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-full"},bu={class:"font-medium text-gray-900 dark:text-white"},ku={class:"font-medium text-gray-900 dark:text-white"},hu={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},fu={class:"text-xs text-gray-500 dark:text-gray-400"},wu={key:1,class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},_u={class:"flex"},$u={class:"ml-3"},zu={class:"text-sm text-red-700 dark:text-red-300 mt-1"},Su={key:2,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Cu={key:3,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center"},ju={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Iu={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Tu={class:"space-y-2 max-h-40 overflow-y-auto"},Mu={class:"flex items-center space-x-3"},Ru={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center"},Pu={class:"text-sm font-medium text-orange-600 dark:text-orange-400"},Ou={class:"text-sm font-medium text-gray-900 dark:text-white"},Du={class:"text-xs text-gray-500 dark:text-gray-400"},Eu={class:"text-xs text-gray-500 dark:text-gray-400"},Au=ke({__name:"QrAdminDashboard",setup(c){const l=_(!1),n=_({total_zawodnikow:0,z_qr_kodami:0,zameldowanych:0,bez_qr_kodow:0,procent_zameldowanych:0}),o=_([]),i=_([]),v=_([]),w=_([]),T=_([]),I=_({nr_startowy:0,powod:"",opis:""}),F=_(!1),y=_(null),f=_(!1),g=_([]);let k=null,m=null;const j=B(()=>w.value.length===0?1:Math.max(...w.value.map(P=>Math.max(P.check_ins,P.results)))),G=B(()=>{const P=I.value.nr_startowy>0,h=I.value.powod!=="",E=y.value!==null,H=y.value?!y.value.checked_in:!1;return console.log("🔍 canPerformManualCheckIn debug:",{hasNumber:P,hasReason:h,hasPreview:E,notCheckedIn:H,manualCheckInForm:I.value,previewZawodnik:y.value}),P&&h&&E&&H});Ie(()=>I.value.nr_startowy,P=>{m&&clearTimeout(m),P&&P>0?m=setTimeout(()=>{Q(P)},500):y.value=null});const A=async()=>{try{l.value=!0;const P=await _e.get("/api/unified/dashboard-data");P.data.success&&(n.value={total_zawodnikow:P.data.stats.zawodnicy.total_zawodnicy,z_qr_kodami:P.data.stats.zawodnicy.total_zawodnicy,zameldowanych:P.data.stats.zawodnicy.zameldowani,bez_qr_kodow:0,procent_zameldowanych:Math.round(P.data.stats.zawodnicy.zameldowani/P.data.stats.zawodnicy.total_zawodnicy*100)},o.value=[],i.value=[],v.value=[],w.value=[],T.value=[])}catch(P){console.error("Błąd podczas pobierania danych dashboard:",P)}finally{l.value=!1}},z=()=>{A()},S=async()=>{try{console.log("Export functionality temporarily disabled - waiting for unified API endpoint")}catch(P){console.error("Błąd podczas eksportu:",P)}},M=async()=>{},C=async()=>{},W=()=>{},b=P=>new Date(P).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=P=>new Date(P).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}),x=P=>({"check-in":"Zameldowanie",finish:"Meta",verify:"Weryfikacja"})[P]||P,R=P=>({awaria_skanera:"Awaria skanera QR",brak_kodu:"Brak/uszkodzony kod QR",problem_techniczny:"Problem techniczny",decyzja_organizatora:"Decyzja organizatora",inne:"Inne"})[P]||P,Q=async P=>{if(!P||P<=0){y.value=null;return}try{f.value=!0;const h=await _e.get(`/api/zawodnicy/${P}`);h.data.success?y.value=h.data.data:y.value=null}catch(h){console.error("Błąd podczas pobierania podglądu zawodnika:",h),y.value=null}finally{f.value=!1}},K=async()=>{var P,h,E,H,ie,Z,pe,ue,re;if(console.log("🔍 performManualCheckIn called, canPerformManualCheckIn:",G.value),console.log("🔍 manualCheckInForm:",I.value),console.log("🔍 previewZawodnik:",y.value),!G.value){console.log("❌ Cannot perform manual check-in");return}try{F.value=!0;const ae={identifier:I.value.nr_startowy,action:"checkin"};console.log("🚀 Sending payload:",ae);const ce=await _e.post("/api/unified/register-athlete",ae);console.log("✅ Response received:",ce.data),ce.data.success?(await A(),await Q(I.value.nr_startowy),g.value.unshift({nr_startowy:I.value.nr_startowy,imie:((P=y.value)==null?void 0:P.imie)||"",nazwisko:((h=y.value)==null?void 0:h.nazwisko)||"",kategoria:((E=y.value)==null?void 0:E.kategoria)||"",checked_in:!0,check_in_time:new Date().toISOString(),qr_code:((H=y.value)==null?void 0:H.qr_code)||!1,ma_wynik:((ie=y.value)==null?void 0:ie.ma_wynik)||!1,klub:((Z=y.value)==null?void 0:Z.klub)||"",plec:((pe=y.value)==null?void 0:pe.plec)||"",powod:I.value.powod,timestamp:new Date().toISOString()}),console.log("✅ Manual check-in successful, resetting form"),I.value={nr_startowy:0,powod:"",opis:""}):console.log("❌ Manual check-in failed:",ce.data)}catch(ae){console.error("❌ Błąd podczas ręcznego zameldowania:",ae);const ce=((re=(ue=ae.response)==null?void 0:ue.data)==null?void 0:re.message)||"Nieznany błąd serwera";console.error("❌ Manual check-in error:",ce)}finally{F.value=!1}},L=async()=>{try{console.log("Manual check-ins history temporarily disabled - waiting for unified API endpoint"),g.value=[]}catch(P){console.error("Błąd podczas pobierania ręcznych zameldowań:",P)}};return $e(()=>{A(),L(),k=setInterval(A,1e4)}),ut(()=>{k&&clearInterval(k),m&&clearTimeout(m)}),(P,h)=>(s(),r("div",Od,[e("div",Dd,[e("div",Ed,[q(V(Ue),{class:"h-8 w-8 text-indigo-600"}),h[3]||(h[3]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"QR Admin Dashboard",-1))]),e("div",Ad,[e("button",{onClick:z,disabled:l.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center"},[q(V(Ee),{class:U(["h-4 w-4 mr-2",{"animate-spin":l.value}])},null,8,["class"]),h[4]||(h[4]=oe(" Odśwież "))],8,Nd),e("button",{onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center"},[q(V(Vt),{class:"h-4 w-4 mr-2"}),h[5]||(h[5]=oe(" Eksport CSV "))])])]),e("div",Fd,[e("div",Bd,[e("div",qd,[e("div",Ld,t(n.value.total_zawodnikow||0),1),h[6]||(h[6]=e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Wszyscy zawodnicy",-1))]),e("div",Qd,[e("div",Wd,t(n.value.z_qr_kodami||0),1),h[7]||(h[7]=e("div",{class:"text-sm text-green-700 dark:text-green-300"},"Z QR kodami",-1))]),e("div",Vd,[e("div",Zd,t(n.value.zameldowanych||0),1),h[8]||(h[8]=e("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Zameldowanych",-1))]),e("div",Ud,[e("div",Gd,t(n.value.procent_zameldowanych||0)+"% ",1),h[9]||(h[9]=e("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"% zameldowanych",-1))])])]),T.value.length>0?(s(),r("div",Kd,[e("div",Hd,[q(V(De),{class:"h-5 w-5 text-yellow-400"}),e("div",Jd,[e("h3",Yd," Wykryto problemy ("+t(T.value.length)+") ",1),e("div",Xd,[e("ul",e0,[(s(!0),r(J,null,ee(T.value,E=>(s(),r("li",{key:E.type},t(E.title)+": "+t(E.count),1))),128))])])])])])):N("",!0),e("div",t0,[e("div",a0,[e("h2",s0,[q(V(Be),{class:"h-5 w-5 mr-2 text-gray-500"}),h[10]||(h[10]=oe(" Ostatnia aktywność ")),e("span",r0,t(o.value.length),1)]),e("div",o0,[(s(!0),r(J,null,ee(o.value.slice(0,10),E=>(s(),r("div",{key:`${E.nr_startowy}-${E.scan_time}`,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",n0,[e("div",l0,[e("span",i0,t(E.nr_startowy),1)]),e("div",null,[e("div",d0,t(E.imie)+" "+t(E.nazwisko),1),e("div",u0,t(E.kategoria)+" • "+t(x(E.checkpoint_name)),1)])]),e("div",c0,[e("div",g0,t(b(E.scan_time)),1),e("div",p0,t(E.device_id),1)])]))),128))])]),e("div",y0,[e("h2",v0,[q(V(Zt),{class:"h-5 w-5 mr-2 text-gray-500"}),h[11]||(h[11]=oe(" Aktywne urządzenia ")),e("span",x0,t(i.value.length),1)]),e("div",m0,[(s(!0),r(J,null,ee(i.value,E=>(s(),r("div",{key:E.device_id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",b0,[h[12]||(h[12]=e("div",{class:"w-3 h-3 bg-green-400 rounded-full animate-pulse"},null,-1)),e("div",null,[e("div",k0,t(E.device_id),1),e("div",h0,t(E.total_scans)+" skanów • "+t(E.unique_zawodnicy)+" zawodników ",1)])]),e("div",f0,[e("div",w0,t(b(E.last_activity)),1),e("div",_0,[e("span",$0,t(E.check_ins)+" check-in ",1),e("span",z0,t(E.results)+" wyniki ",1)])])]))),128))])])]),e("div",S0,[e("h2",C0,[q(V(Ze),{class:"h-5 w-5 mr-2 text-gray-500"}),h[13]||(h[13]=oe(" Statystyki według kategorii "))]),e("div",j0,[e("table",I0,[h[14]||(h[14]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Łącznie "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zameldowanych "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Z wynikami "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Postęp ")])],-1)),e("tbody",T0,[(s(!0),r(J,null,ee(v.value,E=>(s(),r("tr",{key:E.kategoria},[e("td",M0,t(E.kategoria),1),e("td",R0,t(E.total),1),e("td",P0,t(E.zameldowanych),1),e("td",O0,t(E.z_wynikami),1),e("td",D0,[e("div",E0,[e("div",A0,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:ot({width:`${Math.round(E.z_wynikami/E.total*100)}%`})},null,4)]),e("span",N0,t(Math.round(E.z_wynikami/E.total*100))+"% ",1)])])]))),128))])])])]),w.value.length>0?(s(),r("div",F0,[e("h2",B0,[q(V(Ze),{class:"h-5 w-5 mr-2 text-gray-500"}),h[15]||(h[15]=oe(" Postęp w ciągu dnia "))]),e("div",q0,[(s(!0),r(J,null,ee(w.value,E=>(s(),r("div",{key:E.hour,class:"flex items-center space-x-4"},[e("div",L0,t(d(E.hour)),1),e("div",Q0,[e("div",{class:"bg-blue-500 h-full rounded-full transition-all duration-300",style:ot({width:`${Math.min(E.check_ins/j.value*100,100)}%`})},null,4),e("div",{class:"bg-green-500 h-full rounded-full absolute top-0 transition-all duration-300",style:ot({width:`${Math.min(E.results/j.value*100,100)}%`,left:`${Math.min(E.check_ins/j.value*100,100)}%`})},null,4)]),e("div",W0,t(E.check_ins)+" / "+t(E.results),1)]))),128))]),h[16]||(h[16]=de('<div class="flex items-center space-x-4 mt-4 text-xs text-gray-500"><div class="flex items-center"><div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div> Check-ins </div><div class="flex items-center"><div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div> Wyniki </div></div>',1))])):N("",!0),e("div",V0,[e("h2",Z0,[q(V(ba),{class:"h-5 w-5 mr-2 text-gray-500"}),h[17]||(h[17]=oe(" Narzędzia diagnostyczne "))]),e("div",U0,[e("button",{onClick:M,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[q(V(Ue),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),h[18]||(h[18]=e("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Generuj brakujące QR ",-1)),e("div",G0,t(n.value.bez_qr_kodow)+" zawodników ",1)]),e("button",{onClick:C,class:"p-4 border-2 border-dashed border-red-300 dark:border-red-600 rounded-lg hover:border-red-400 transition-colors"},[q(V(Ee),{class:"h-8 w-8 mx-auto text-red-400 mb-2"}),h[19]||(h[19]=e("div",{class:"text-sm font-medium text-red-600 dark:text-red-300"}," Reset check-inów ",-1)),h[20]||(h[20]=e("div",{class:"text-xs text-red-500"}," Usuń wszystkie meldunki ",-1))]),e("button",{onClick:W,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[q(V(ka),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),h[21]||(h[21]=e("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Logi systemu ",-1)),h[22]||(h[22]=e("div",{class:"text-xs text-gray-500"}," Ostatnie wydarzenia ",-1))])])]),e("div",K0,[e("h2",H0,[q(V(ha),{class:"h-5 w-5 mr-2 text-orange-500"}),h[23]||(h[23]=oe(" Ręczne zameldowanie ")),h[24]||(h[24]=e("span",{class:"ml-2 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-2 py-1 rounded-full"}," BACKUP ",-1))]),e("div",J0,[e("div",Y0,[q(V(De),{class:"h-5 w-5 text-orange-400"}),h[25]||(h[25]=e("div",{class:"ml-3"},[e("p",{class:"text-sm text-orange-700 dark:text-orange-300"},[e("strong",null,"Uwaga:"),oe(' Używaj tylko gdy skaner QR nie działa lub w sytuacjach awaryjnych. Każde ręczne zameldowanie jest rejestrowane z identyfikatorem urządzenia "manual-admin". ')])],-1))])]),e("div",X0,[e("div",eu,[h[30]||(h[30]=e("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Zamelduj zawodnika",-1)),e("div",null,[h[26]||(h[26]=e("label",{for:"nr_startowy",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Numer startowy ",-1)),X(e("input",{id:"nr_startowy","onUpdate:modelValue":h[0]||(h[0]=E=>I.value.nr_startowy=E),type:"number",min:"1",disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Wprowadź numer startowy..."},null,8,tu),[[xe,I.value.nr_startowy]])]),e("div",null,[h[28]||(h[28]=e("label",{for:"powod",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Powód ręcznego zameldowania ",-1)),X(e("select",{id:"powod","onUpdate:modelValue":h[1]||(h[1]=E=>I.value.powod=E),disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},h[27]||(h[27]=[de('<option value="">Wybierz powód...</option><option value="awaria_skanera">Awaria skanera QR</option><option value="brak_kodu">Brak/uszkodzony kod QR</option><option value="problem_techniczny">Problem techniczny</option><option value="decyzja_organizatora">Decyzja organizatora</option><option value="inne">Inne</option>',6)]),8,au),[[le,I.value.powod]])]),I.value.powod==="inne"?(s(),r("div",su,[h[29]||(h[29]=e("label",{for:"opis",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Opis szczegółowy ",-1)),X(e("textarea",{id:"opis","onUpdate:modelValue":h[2]||(h[2]=E=>I.value.opis=E),rows:"2",disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Opisz powód ręcznego zameldowania..."},null,8,ru),[[xe,I.value.opis]])])):N("",!0),e("button",{onClick:K,disabled:!G.value||F.value,class:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[F.value?N("",!0):(s(),ge(V(Ge),{key:0,class:"h-4 w-4 mr-2"})),F.value?(s(),ge(V(Ee),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):N("",!0),oe(" "+t(F.value?"Meldowanie...":"Zamelduj zawodnika"),1)],8,ou)]),e("div",nu,[h[40]||(h[40]=e("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Podgląd zawodnika",-1)),y.value?(s(),r("div",lu,[e("div",iu,[e("div",du,[e("span",uu,t(y.value.nr_startowy),1)]),e("div",null,[e("div",cu,t(y.value.imie)+" "+t(y.value.nazwisko),1),e("div",gu,t(y.value.kategoria)+" • "+t(y.value.plec==="M"?"Mężczyzna":"Kobieta"),1)])]),e("div",pu,[e("div",null,[h[31]||(h[31]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Klub:",-1)),e("div",yu,t(y.value.klub||"Brak danych"),1)]),e("div",null,[h[34]||(h[34]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Status:",-1)),e("div",vu,[y.value.checked_in?(s(),r("span",xu,[q(V(Ge),{class:"h-3 w-3 mr-1"}),h[32]||(h[32]=oe(" Zameldowany "))])):(s(),r("span",mu,[q(V(Mt),{class:"h-3 w-3 mr-1"}),h[33]||(h[33]=oe(" Nie zameldowany "))]))])]),e("div",null,[h[35]||(h[35]=e("span",{class:"text-gray-500 dark:text-gray-400"},"QR kod:",-1)),e("div",bu,t(y.value.qr_code?"Dostępny":"Brak"),1)]),e("div",null,[h[36]||(h[36]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Wynik:",-1)),e("div",ku,t(y.value.ma_wynik?"Tak":"Nie"),1)])]),y.value.checked_in&&y.value.check_in_time?(s(),r("div",hu,[e("span",fu," Zameldowany: "+t(b(y.value.check_in_time)),1)])):N("",!0)])):I.value.nr_startowy&&!f.value?(s(),r("div",wu,[e("div",_u,[q(V(Mt),{class:"h-5 w-5 text-red-400"}),e("div",$u,[h[37]||(h[37]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Zawodnik nie znaleziony ",-1)),e("p",zu," Nie znaleziono zawodnika z numerem startowym "+t(I.value.nr_startowy)+". ",1)])])])):f.value?(s(),r("div",Su,h[38]||(h[38]=[de('<div class="animate-pulse"><div class="flex items-center space-x-4"><div class="w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-32"></div><div class="h-3 bg-gray-300 dark:bg-gray-600 rounded w-24"></div></div></div></div>',1)]))):(s(),r("div",Cu,[q(V(it),{class:"h-12 w-12 mx-auto text-gray-400 mb-2"}),h[39]||(h[39]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Wprowadź numer startowy, aby zobaczyć podgląd zawodnika ",-1))]))])]),g.value.length>0?(s(),r("div",ju,[e("h3",Iu," Ostatnie ręczne zameldowania ("+t(g.value.length)+") ",1),e("div",Tu,[(s(!0),r(J,null,ee(g.value.slice(0,5),E=>(s(),r("div",{key:`manual-${E.nr_startowy}-${E.timestamp}`,class:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},[e("div",Mu,[e("div",Ru,[e("span",Pu,t(E.nr_startowy),1)]),e("div",null,[e("div",Ou,t(E.imie)+" "+t(E.nazwisko),1),e("div",Du,t(R(E.powod)),1)])]),e("div",Eu,t(b(E.timestamp)),1)]))),128))])])):N("",!0)])]))}}),Nu={class:"group relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105"},Fu={class:"relative p-6"},Bu={class:"flex items-center justify-between mb-4"},qu={key:0,class:"flex items-center space-x-1"},Lu={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qu={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wu={key:2,class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vu={class:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2"},Zu={class:"flex items-baseline justify-between"},Uu={class:"text-3xl font-bold text-gray-900 dark:text-white"},Gu={key:0,class:"text-sm text-gray-500 dark:text-gray-400 ml-2"},Ku={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Hu={key:1,class:"mt-4"},Ju={class:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1"},Yu={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Xu={key:0,class:"px-6 pb-6"},rt=ke({__name:"EnhancedStatsCard",props:{title:{},value:{},icon:{},color:{},subtitle:{},unit:{},trend:{},trendValue:{},progress:{},actionLabel:{}},emits:["action"],setup(c,{emit:l}){const n=c,o=B(()=>typeof n.value=="number"?n.value.toLocaleString():n.value),i=B(()=>({blue:"bg-gradient-to-br from-blue-500 to-blue-600",green:"bg-gradient-to-br from-green-500 to-green-600",red:"bg-gradient-to-br from-red-500 to-red-600",purple:"bg-gradient-to-br from-purple-500 to-purple-600",yellow:"bg-gradient-to-br from-yellow-500 to-yellow-600",indigo:"bg-gradient-to-br from-indigo-500 to-indigo-600",pink:"bg-gradient-to-br from-pink-500 to-pink-600",cyan:"bg-gradient-to-br from-cyan-500 to-cyan-600"})[n.color]),v=B(()=>({blue:"text-blue-600",green:"text-green-600",red:"text-red-600",purple:"text-purple-600",yellow:"text-yellow-600",indigo:"text-indigo-600",pink:"text-pink-600",cyan:"text-cyan-600"})[n.color]),w=B(()=>({blue:"bg-blue-100 dark:bg-blue-900",green:"bg-green-100 dark:bg-green-900",red:"bg-red-100 dark:bg-red-900",purple:"bg-purple-100 dark:bg-purple-900",yellow:"bg-yellow-100 dark:bg-yellow-900",indigo:"bg-indigo-100 dark:bg-indigo-900",pink:"bg-pink-100 dark:bg-pink-900",cyan:"bg-cyan-100 dark:bg-cyan-900"})[n.color]),T=B(()=>({blue:"bg-blue-500",green:"bg-green-500",red:"bg-red-500",purple:"bg-purple-500",yellow:"bg-yellow-500",indigo:"bg-indigo-500",pink:"bg-pink-500",cyan:"bg-cyan-500"})[n.color]),I=B(()=>({blue:"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800",green:"bg-green-50 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-800",red:"bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800",purple:"bg-purple-50 dark:bg-purple-900 text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-800",yellow:"bg-yellow-50 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 hover:bg-yellow-100 dark:hover:bg-yellow-800",indigo:"bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-100 dark:hover:bg-indigo-800",pink:"bg-pink-50 dark:bg-pink-900 text-pink-700 dark:text-pink-300 hover:bg-pink-100 dark:hover:bg-pink-800",cyan:"bg-cyan-50 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300 hover:bg-cyan-100 dark:hover:bg-cyan-800"})[n.color]),F=B(()=>n.trend==="up"?"text-green-600 dark:text-green-400":n.trend==="down"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400");return(y,f)=>(s(),r("div",Nu,[e("div",{class:U(["absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity duration-300",i.value])},null,2),e("div",Fu,[e("div",Bu,[e("div",{class:U(["p-3 rounded-xl shadow-lg",w.value])},[typeof y.icon!="string"?(s(),ge(Fe(y.icon),{key:0,class:U([v.value,"h-6 w-6"])},null,8,["class"])):(s(),r("span",{key:1,class:U([v.value,"text-xl font-semibold"])},t(y.icon),3))],2),y.trend?(s(),r("div",qu,[y.trend==="up"?(s(),r("svg",Lu,f[1]||(f[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 17l9.2-9.2M17 17V7h-10"},null,-1)]))):y.trend==="down"?(s(),r("svg",Qu,f[2]||(f[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 7l-9.2 9.2M7 7v10h10"},null,-1)]))):(s(),r("svg",Wu,f[3]||(f[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h8"},null,-1)]))),y.trendValue?(s(),r("span",{key:3,class:U([F.value,"text-sm font-medium"])},t(y.trendValue),3)):N("",!0)])):N("",!0)]),e("h3",Vu,t(y.title),1),e("div",Zu,[e("span",Uu,t(o.value),1),y.unit?(s(),r("span",Gu,t(y.unit),1)):N("",!0)]),y.subtitle?(s(),r("p",Ku,t(y.subtitle),1)):N("",!0),y.progress!==void 0?(s(),r("div",Hu,[e("div",Ju,[f[4]||(f[4]=e("span",null,"Progress",-1)),e("span",null,t(Math.round(y.progress))+"%",1)]),e("div",Yu,[e("div",{class:U([T.value,"h-2 rounded-full transition-all duration-500 ease-out"]),style:ot(`width: ${Math.min(y.progress,100)}%`)},null,6)])])):N("",!0)]),y.actionLabel?(s(),r("div",Xu,[e("button",{onClick:f[0]||(f[0]=g=>y.$emit("action")),class:U(["w-full py-2 px-4 rounded-lg text-sm font-medium transition-all duration-200",I.value])},t(y.actionLabel),3)])):N("",!0)]))}}),ec={class:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"},tc={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},ac={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},sc={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},rc={class:"mt-4 lg:mt-0 grid grid-cols-3 gap-4"},oc={class:"text-center"},nc={class:"text-xl lg:text-2xl font-bold text-indigo-600 dark:text-indigo-400"},lc={class:"text-center"},ic={class:"text-xl lg:text-2xl font-bold text-green-600 dark:text-green-400"},dc={class:"text-center"},uc={class:"text-xl lg:text-2xl font-bold text-purple-600 dark:text-purple-400"},cc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},gc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},pc={class:"mb-8"},yc={class:"relative overflow-hidden rounded-3xl bg-white dark:bg-gray-800 shadow-xl"},vc={class:"relative px-8 py-12 text-center"},xc={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},mc={class:"bg-white bg-opacity-20 rounded-lg p-3"},bc={class:"text-2xl font-bold"},kc={class:"bg-white bg-opacity-20 rounded-lg p-3"},hc={class:"text-2xl font-bold"},fc={class:"bg-white bg-opacity-20 rounded-lg p-3"},wc={class:"text-2xl font-bold"},_c={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},$c={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500 to-purple-700 shadow-xl hover:shadow-2xl"},zc={class:"relative px-8 py-12 text-center"},Sc={class:"text-lg font-semibold text-white"},Cc={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-500 to-cyan-600 shadow-xl hover:shadow-2xl"},jc={class:"relative px-8 py-12 text-center"},Ic={class:"text-lg font-semibold text-white"},Tc={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-500 to-emerald-600 shadow-xl hover:shadow-2xl"},Mc={class:"relative px-8 py-12 text-center"},Rc={class:"text-lg font-semibold text-white"},Pc={class:"mb-8"},Oc={class:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-orange-500 to-red-600 shadow-xl hover:shadow-2xl"},Dc={class:"relative px-8 py-16 text-center"},Ec={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Ac={class:"bg-white bg-opacity-20 rounded-lg p-3"},Nc={class:"text-xl font-bold"},Fc={class:"bg-white bg-opacity-20 rounded-lg p-3"},Bc={class:"text-xl font-bold"},qc={class:"bg-white bg-opacity-20 rounded-lg p-3"},Lc={class:"text-xl font-bold"},Qc={class:"mb-8"},Wc={class:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-yellow-500 to-orange-500 shadow-xl hover:shadow-2xl"},Vc={class:"relative px-8 py-16 text-center"},Zc={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Uc={class:"bg-white bg-opacity-20 rounded-lg p-3"},Gc={class:"text-xl font-bold"},Kc={class:"bg-white bg-opacity-20 rounded-lg p-3"},Hc={class:"text-xl font-bold"},Jc={class:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8"},Yc={class:"flex items-center justify-between mb-6"},Xc=["disabled"],eg={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},tg={key:0,class:"space-y-4"},ag={class:"text-white text-lg"},sg={class:"flex-1"},rg={class:"text-sm font-medium text-gray-900 dark:text-white"},og={class:"text-xs text-gray-500 dark:text-gray-400"},ng={class:"text-xs text-gray-400 dark:text-gray-500"},lg={key:1,class:"text-center py-8"},ig=ke({__name:"Dashboard",emits:["navigate"],setup(c,{emit:l}){const n=l,o=_({totalZawodnicy:0,qrGenerated:0,checkedIn:0,activeCategories:0,clubsCount:0}),i=_(!1),v=_([{id:1,title:"System QR aktywny",description:"Dashboard gotowy do pracy",time:"Teraz",icon:"🔲",color:"bg-blue-500"}]),w=B(()=>({qrProgress:o.value.totalZawodnicy>0?Math.round(o.value.qrGenerated/o.value.totalZawodnicy*100):0,checkinProgress:o.value.totalZawodnicy>0?Math.round(o.value.checkedIn/o.value.totalZawodnicy*100):0,readiness:o.value.totalZawodnicy>0?Math.round((o.value.checkedIn+o.value.qrGenerated)/(o.value.totalZawodnicy*2)*100):0})),T=f=>{n("navigate",f)},I=async()=>{try{i.value=!0;const g=(await _e.get("/api/zawodnicy?limit=1000")).data.data||[];console.log(`📊 Dashboard: Załadowano ${g.length} zawodników`),o.value.totalZawodnicy=g.length,o.value.qrGenerated=g.filter(j=>j.qr_code).length,o.value.checkedIn=g.filter(j=>j.checked_in).length;const k=[...new Set(g.map(j=>j.kategoria).filter(Boolean))];o.value.activeCategories=k.length;const m=[...new Set(g.map(j=>j.klub).filter(Boolean))];o.value.clubsCount=m.length,F()}catch(f){console.error("Błąd ładowania statystyk:",f),o.value={totalZawodnicy:8,qrGenerated:6,checkedIn:4,activeCategories:4,clubsCount:3}}finally{i.value=!1}},F=()=>{const f=[];o.value.totalZawodnicy>0&&f.push({id:Date.now(),title:`${o.value.totalZawodnicy} zawodników zarejestrowanych`,description:`${o.value.activeCategories} kategorii, ${o.value.clubsCount} klubów`,time:"5 min temu",icon:"👥",color:"bg-blue-500"}),o.value.qrGenerated>0&&f.push({id:Date.now()+1,title:`${o.value.qrGenerated} kodów QR wygenerowanych`,description:`${w.value.qrProgress}% pokrycie QR`,time:"10 min temu",icon:"🔲",color:"bg-purple-500"}),o.value.checkedIn>0&&f.push({id:Date.now()+2,title:`${o.value.checkedIn} zawodników zameldowanych`,description:`${w.value.checkinProgress}% gotowości do startu`,time:"15 min temu",icon:"✅",color:"bg-green-500"}),v.value=f},y=()=>{I()};return $e(()=>{I(),setInterval(I,3e4)}),(f,g)=>(s(),r("div",ec,[e("div",tc,[e("div",ac,[e("div",sc,[g[12]||(g[12]=de('<div class="flex items-center space-x-4" data-v-51d7a59c><div class="p-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl" data-v-51d7a59c><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-51d7a59c></path></svg></div><div data-v-51d7a59c><h1 class="text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white" data-v-51d7a59c> SKATECROSS QR Dashboard </h1><p class="text-gray-600 dark:text-gray-400 text-sm lg:text-base" data-v-51d7a59c> Zarządzanie systemem QR turnieju SKATECROSS </p></div></div>',1)),e("div",rc,[e("div",oc,[e("div",nc,t(o.value.totalZawodnicy),1),g[9]||(g[9]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"👤 Zawodnicy",-1))]),e("div",lc,[e("div",ic,t(o.value.qrGenerated),1),g[10]||(g[10]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"🔲 Kody QR",-1))]),e("div",dc,[e("div",uc,t(o.value.checkedIn),1),g[11]||(g[11]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"✅ Zameldowani",-1))])])])])]),e("div",cc,[e("div",gc,[q(rt,{title:"Łączna liczba zawodników",value:o.value.totalZawodnicy,icon:"👥",color:"blue",subtitle:`${o.value.activeCategories} kategorii aktywnych`,progress:o.value.checkedIn/o.value.totalZawodnicy*100,trend:o.value.totalZawodnicy>0?"up":"neutral",actionLabel:"Zobacz wszystkich",onAction:g[0]||(g[0]=k=>T("zawodnicy"))},null,8,["value","subtitle","progress","trend"]),q(rt,{title:"Kody QR wygenerowane",value:o.value.qrGenerated,icon:"🔲",color:"purple",subtitle:`${Math.round(o.value.qrGenerated/o.value.totalZawodnicy*100)}% pokrycie`,progress:o.value.qrGenerated/o.value.totalZawodnicy*100,trend:o.value.qrGenerated>0?"up":"neutral",actionLabel:"Generuj QR",onAction:g[1]||(g[1]=k=>T("qr-print"))},null,8,["value","subtitle","progress","trend"]),q(rt,{title:"Zameldowani zawodnicy",value:o.value.checkedIn,icon:"✅",color:"green",subtitle:`${Math.round(o.value.checkedIn/o.value.totalZawodnicy*100)}% zameldowanych`,progress:o.value.checkedIn/o.value.totalZawodnicy*100,trend:o.value.checkedIn>0?"up":"neutral",actionLabel:"Centrum startu",onAction:g[2]||(g[2]=k=>T("unified-start"))},null,8,["value","subtitle","progress","trend"]),q(rt,{title:"Aktywne kategorie",value:o.value.activeCategories,icon:"🏆",color:"yellow",subtitle:`${o.value.clubsCount} klubów uczestniczy`,progress:100,trend:"neutral",actionLabel:"Zobacz rankingi",onAction:g[3]||(g[3]=k=>T("rankingi"))},null,8,["value","subtitle"])]),e("div",pc,[e("div",yc,[g[17]||(g[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 opacity-90"},null,-1)),e("div",vc,[g[16]||(g[16]=de('<div class="flex items-center justify-center mb-4" data-v-51d7a59c><svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-51d7a59c></path></svg></div><h2 class="text-3xl lg:text-4xl font-bold text-white mb-2" data-v-51d7a59c>Visualization</h2><p class="text-indigo-100 text-lg" data-v-51d7a59c>Dane turnieju prezentowane w przejrzysty sposób</p>',3)),e("div",xc,[e("div",mc,[e("div",bc,t(w.value.qrProgress)+"%",1),g[13]||(g[13]=e("div",{class:"text-indigo-100"},"QR Coverage",-1))]),e("div",kc,[e("div",hc,t(w.value.checkinProgress)+"%",1),g[14]||(g[14]=e("div",{class:"text-indigo-100"},"Check-in Rate",-1))]),e("div",fc,[e("div",wc,t(w.value.readiness)+"%",1),g[15]||(g[15]=e("div",{class:"text-indigo-100"},"Tournament Ready",-1))])])])])]),e("div",_c,[e("div",{onClick:g[4]||(g[4]=k=>T("zawodnicy")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",$c,[g[19]||(g[19]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",zc,[g[18]||(g[18]=de('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-51d7a59c></path></svg></div><h3 class="text-2xl font-bold text-white mb-3" data-v-51d7a59c>👤 Management</h3><p class="text-purple-100 text-sm mb-4" data-v-51d7a59c>Zarządzanie zawodnikami</p>',3)),e("div",Sc,t(o.value.totalZawodnicy)+" zawodników",1)])])]),e("div",{onClick:g[5]||(g[5]=k=>T("qr-dashboard")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",Cc,[g[21]||(g[21]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",jc,[g[20]||(g[20]=de('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-51d7a59c></path></svg></div><h3 class="text-2xl font-bold text-white mb-1" data-v-51d7a59c>🔲 QR System</h3><h3 class="text-xl font-semibold text-white mb-3" data-v-51d7a59c>Solutions</h3><p class="text-blue-100 text-sm mb-4" data-v-51d7a59c>Admin Dashboard QR</p>',4)),e("div",Ic,t(o.value.qrGenerated)+" kodów QR",1)])])]),e("div",{onClick:g[6]||(g[6]=k=>T("unified-start")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",Tc,[g[23]||(g[23]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",Mc,[g[22]||(g[22]=de('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-51d7a59c></path></svg></div><h3 class="text-xl font-bold text-white mb-1" data-v-51d7a59c>🏁 Start Line</h3><h3 class="text-xl font-bold text-white mb-1" data-v-51d7a59c>Response</h3><h3 class="text-xl font-bold text-white mb-3" data-v-51d7a59c>Management</h3><p class="text-green-100 text-sm mb-4" data-v-51d7a59c>Centrum startu i skaner</p>',5)),e("div",Rc,t(o.value.checkedIn)+" zameldowanych",1)])])])]),e("div",Pc,[e("div",{onClick:g[7]||(g[7]=k=>T("rankingi")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",Oc,[g[28]||(g[28]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",Dc,[g[27]||(g[27]=de('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-51d7a59c></path></svg></div><h2 class="text-3xl lg:text-4xl font-bold text-white mb-3" data-v-51d7a59c>Key Analytics</h2><p class="text-orange-100 text-lg mb-6" data-v-51d7a59c>Rankingi i statystyki turnieju</p>',3)),e("div",Ec,[e("div",Ac,[e("div",Nc,t(o.value.activeCategories),1),g[24]||(g[24]=e("div",{class:"text-orange-100"},"Kategorie",-1))]),e("div",Fc,[e("div",Bc,t(o.value.clubsCount),1),g[25]||(g[25]=e("div",{class:"text-orange-100"},"Kluby",-1))]),e("div",qc,[e("div",Lc,t(w.value.readiness)+"%",1),g[26]||(g[26]=e("div",{class:"text-orange-100"},"Gotowość",-1))])])])])])]),e("div",Qc,[e("div",{onClick:g[8]||(g[8]=k=>T("qr-print")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",Wc,[g[32]||(g[32]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",Vc,[g[31]||(g[31]=de('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" data-v-51d7a59c></path></svg></div><h2 class="text-2xl lg:text-3xl font-bold text-white mb-3" data-v-51d7a59c>Building blocks: QR Print System</h2><p class="text-yellow-100 text-lg mb-6" data-v-51d7a59c>System generowania i druku kodów QR</p>',3)),e("div",Zc,[e("div",Uc,[e("div",Gc,t(o.value.qrGenerated)+"/"+t(o.value.totalZawodnicy),1),g[29]||(g[29]=e("div",{class:"text-yellow-100"},"QR Generated",-1))]),e("div",Kc,[e("div",Hc,t(w.value.qrProgress)+"%",1),g[30]||(g[30]=e("div",{class:"text-yellow-100"},"Coverage",-1))])])])])])]),e("div",Jc,[e("div",Yc,[g[34]||(g[34]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white flex items-center"},[e("span",{class:"mr-2"},"📈"),oe(" Ostatnia aktywność turnieju ")],-1)),e("button",{onClick:y,disabled:i.value,class:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 text-sm font-medium disabled:opacity-50 flex items-center"},[i.value?(s(),r("svg",eg,g[33]||(g[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):N("",!0),oe(" "+t(i.value?"Ładowanie...":"Odśwież"),1)],8,Xc)]),v.value.length>0?(s(),r("div",tg,[(s(!0),r(J,null,ee(v.value,k=>(s(),r("div",{key:k.id,class:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200"},[e("div",{class:U(["p-2 rounded-lg",k.color])},[e("span",ag,t(k.icon),1)],2),e("div",sg,[e("p",rg,t(k.title),1),e("p",og,t(k.description),1)]),e("div",ng,t(k.time),1)]))),128))])):(s(),r("div",lg,g[35]||(g[35]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Brak aktywności",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Rozpocznij turniej, aby zobaczyć aktywność",-1)])))])])]))}}),dg=Te(ig,[["__scopeId","data-v-51d7a59c"]]),ug={class:"start-groups-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},cg={class:"flex items-center justify-between mb-6"},gg={class:"flex items-center space-x-2"},pg=["disabled"],yg={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},vg={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xg={key:0,class:"space-y-4"},mg={key:0,class:"bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-xl p-4 mb-6"},bg={class:"flex items-center justify-between"},kg={class:"flex items-center space-x-3"},hg={class:"text-sm opacity-90"},fg={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},wg={class:"flex items-center justify-between mb-3"},_g={class:"flex items-center space-x-2"},$g={class:"font-semibold text-gray-900 dark:text-white"},zg={class:"text-sm text-gray-600 dark:text-gray-400"},Sg={class:"flex items-center justify-between mb-4"},Cg={class:"font-semibold text-gray-900 dark:text-white"},jg={class:"space-y-2"},Ig=["onClick","disabled"],Tg=["onClick"],Mg={key:2,class:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-lg text-center text-sm"},Rg={key:3,class:"flex space-x-2"},Pg=["onClick"],Og=["onClick","disabled"],Dg={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},Eg={class:"text-xs text-gray-700 dark:text-gray-300 max-h-16 overflow-y-auto"},Ag={key:0,class:"text-gray-500 dark:text-gray-400"},Ng={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Fg={class:"text-xl font-bold text-gray-900 dark:text-white"},Bg={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qg={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},Lg={key:0,class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},Qg={class:"text-sm text-blue-800 dark:text-blue-200"},Wg={key:0,class:"space-y-2"},Vg={class:"flex items-center space-x-3"},Zg={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center text-sm font-bold text-blue-600 dark:text-blue-400"},Ug={class:"font-medium text-gray-900 dark:text-white"},Gg={class:"text-sm text-gray-600 dark:text-gray-400"},Kg=["onClick"],Hg={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Jg={class:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700"},Yg={key:1},Xg={key:2,class:"text-center py-12"},ep={__name:"StartGroupsCard",props:{groups:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["group-activated","group-deactivated","refresh-requested"],setup(c,{emit:l}){const n=c,o=l,i=_(!1),v=_(null),w=_(null),T=_(!1),I=B(()=>n.groups.find(d=>d.status==="ACTIVE"||d.status==="TIMING")),F=d=>d.status==="ACTIVE"||d.status==="TIMING"?"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-700":d.liczba_zawodnikow>0?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700",y=d=>d.status==="ACTIVE"||d.status==="TIMING"?"bg-purple-600 text-white":d.liczba_zawodnikow>0?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",f=d=>d.status==="ACTIVE"||d.status==="TIMING"?"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":d.liczba_zawodnikow>0?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",g=d=>d.status==="ACTIVE"?"AKTYWNA":d.status==="TIMING"?"POMIARY":d.status==="COMPLETED"?"ZAKOŃCZONA":d.liczba_zawodnikow>0?"GOTOWA":"PUSTA",k=d=>d.kategoria?d.kategoria.substring(0,3):"",m=async d=>{console.log("🏁 Activating group:",d);try{const R=await(await fetch("/api/unified/activate-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:d.kategoria,plec:d.plec})})).json();R.success?o("group-activated",{group:d,session:R.session,message:R.message}):(console.error("❌ Group activation failed:",R.error),alert(`Błąd aktywacji grupy: ${R.error}`))}catch(x){console.error("❌ Group activation error:",x),alert("Błąd połączenia podczas aktywacji grupy")}},j=async d=>{console.log("⏹️ Deactivating group:",d);try{const R=await(await fetch("/api/unified/deactivate-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:d.kategoria,plec:d.plec})})).json();R.success?o("group-deactivated",{group:d,message:R.message}):(console.error("❌ Group deactivation failed:",R.error),alert(`Błąd dezaktywacji grupy: ${R.error}`))}catch(x){console.error("❌ Group deactivation error:",x),alert("Błąd połączenia podczas dezaktywacji grupy")}},G=()=>{o("refresh-requested")},A=async d=>{v.value=d,T.value=!0,i.value=!0;try{const R=await(await fetch(`/api/unified/group-details/${encodeURIComponent(d.kategoria)}/${encodeURIComponent(d.plec)}`)).json();R.success?w.value=R.data:(console.error("❌ Group details failed:",R.error),alert(`Błąd pobierania szczegółów: ${R.error}`))}catch(x){console.error("❌ Group details error:",x),alert("Błąd połączenia podczas pobierania szczegółów grupy")}finally{T.value=!1}},z=async d=>{var x,R;if(confirm(`Czy na pewno chcesz usunąć zawodnika #${d} z grupy?`))try{const K=await(await fetch("/api/unified/remove-athlete-from-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nr_startowy:d,kategoria:(x=v.value)==null?void 0:x.kategoria,plec:(R=v.value)==null?void 0:R.plec})})).json();K.success?(alert(`✅ ${K.message}`),await A(v.value),o("refresh-requested")):alert(`❌ ${K.error}`)}catch(Q){console.error("❌ Remove athlete error:",Q),alert("Błąd połączenia podczas usuwania zawodnika")}},S=async d=>{const x=d.status==="ACTIVE"||d.status==="TIMING",R=x?`Grupa "${d.kategoria} ${d.plec}" jest aktywna i ma sesję SECTRO. Czy na pewno chcesz ją wymusić usunięcie?`:`Czy na pewno chcesz usunąć grupę "${d.kategoria} ${d.plec}" z ${d.liczba_zawodnikow} zawodnikami?`;confirm(R)&&await C(d,x)},M=async()=>{if(!v.value||!w.value)return;const d=v.value,x=d.status==="ACTIVE"||d.status==="TIMING",R=x?"Grupa ma aktywną sesję SECTRO. Czy na pewno chcesz wymusić usunięcie całej grupy?":`Czy na pewno chcesz usunąć całą grupę z ${w.value.group.athletes_count} zawodnikami?`;confirm(R)&&(W(),await C(d,x))},C=async(d,x=!1)=>{try{const Q=await(await fetch("/api/unified/delete-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:d.kategoria,plec:d.plec,force:x})})).json();if(Q.success){let K=`✅ ${Q.message}`;Q.errors&&Q.errors.length>0&&(K+=`

Błędy:
${Q.errors.join(`
`)}`),Q.session_cancelled&&(K+=`

⚠️ Sesja SECTRO została anulowana`),alert(K),o("refresh-requested")}else alert(`❌ ${Q.error}`)}catch(R){console.error("❌ Delete group error:",R),alert("Błąd połączenia podczas usuwania grupy")}},W=()=>{i.value=!1,v.value=null,w.value=null},b=d=>d?new Date(d).toLocaleString("pl-PL"):"Brak danych";return(d,x)=>{var R,Q,K,L,P,h,E,H,ie;return s(),r("div",ug,[e("div",cg,[x[5]||(x[5]=de('<div class="flex items-center space-x-3" data-v-64a19cda><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center" data-v-64a19cda><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-64a19cda><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-64a19cda></path></svg></div><div data-v-64a19cda><h2 class="text-xl font-bold text-gray-900 dark:text-white" data-v-64a19cda>Grupy Startowe</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-64a19cda>Zarządzanie grupami i aktywacja SECTRO</p></div></div>',1)),e("div",gg,[e("button",{onClick:G,disabled:c.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[c.loading?(s(),r("svg",yg,x[2]||(x[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",vg,x[3]||(x[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),x[4]||(x[4]=e("span",{class:"ml-2"},"Odśwież",-1))],8,pg)])]),c.groups&&c.groups.length>0?(s(),r("div",xg,[I.value?(s(),r("div",mg,[e("div",bg,[e("div",kg,[x[7]||(x[7]=e("div",{class:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[x[6]||(x[6]=e("div",{class:"font-semibold"},"🎯 Aktywna grupa",-1)),e("div",hg,t(I.value.kategoria_nazwa)+" "+t(I.value.plec)+" • "+t(I.value.liczba_zawodnikow)+" zawodników",1)])]),e("button",{onClick:x[0]||(x[0]=Z=>j(I.value)),class:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors duration-200"}," ⏹️ Zakończ ")])])):N("",!0),e("div",fg,[(s(!0),r(J,null,ee(c.groups,Z=>{var pe,ue;return s(),r("div",{key:Z.id,class:U([F(Z),"p-4 rounded-xl border transition-all duration-200 hover:shadow-md"])},[e("div",wg,[e("div",_g,[e("div",{class:U([y(Z),"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold"])},t(k(Z)),3),e("div",null,[e("div",$g,t(Z.kategoria),1),e("div",zg,t(Z.plec),1)])]),e("div",{class:U([f(Z),"px-2 py-1 rounded-full text-xs font-medium"])},t(g(Z)),3)]),e("div",Sg,[x[8]||(x[8]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Zawodnicy:")],-1)),e("span",Cg,t(Z.liczba_zawodnikow),1)]),e("div",jg,[Z.status!=="ACTIVE"&&Z.status!=="TIMING"&&Z.liczba_zawodnikow>0?(s(),r("button",{key:0,onClick:re=>m(Z),disabled:c.loading,class:"w-full px-4 py-2 bg-blue-600 disabled:bg-gray-400 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2"},x[9]||(x[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",null,"Aktywuj grupę",-1)]),8,Ig)):Z.status==="ACTIVE"||Z.status==="TIMING"?(s(),r("button",{key:1,onClick:re=>j(Z),class:"w-full px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 flex items-center justify-center space-x-2"},x[10]||(x[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 9l6 6m0-6l-6 6"})],-1),e("span",null,"Dezaktywuj",-1)]),8,Tg)):Z.liczba_zawodnikow===0?(s(),r("div",Mg," Brak zawodników ")):N("",!0),Z.liczba_zawodnikow>0?(s(),r("div",Rg,[e("button",{onClick:re=>A(Z),class:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center justify-center space-x-1"},x[11]||(x[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",null,"Szczegóły",-1)]),8,Pg),e("button",{onClick:re=>S(Z),disabled:Z.status==="ACTIVE"||Z.status==="TIMING",class:"flex-1 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors duration-200 flex items-center justify-center space-x-1 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"},x[12]||(x[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",null,"Usuń",-1)]),8,Og)])):N("",!0)]),Z.liczba_zawodnikow>0?(s(),r("div",Dg,[x[13]||(x[13]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"Zameldowani zawodnicy:",-1)),e("div",Eg,[(s(!0),r(J,null,ee((pe=Z.zawodnicy)==null?void 0:pe.slice(0,3),re=>(s(),r("div",{key:re.nr_startowy,class:"truncate"}," • "+t(re.imie)+" "+t(re.nazwisko)+" (#"+t(re.nr_startowy)+") ",1))),128)),((ue=Z.zawodnicy)==null?void 0:ue.length)>3?(s(),r("div",Ag," ... i "+t(Z.zawodnicy.length-3)+" więcej ",1)):N("",!0)])])):N("",!0)],2)}),128))])])):N("",!0),i.value?(s(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:W},[e("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:x[1]||(x[1]=At(()=>{},["stop"]))},[e("div",Ng,[e("div",null,[e("h3",Fg," Szczegóły grupy: "+t((R=v.value)==null?void 0:R.kategoria)+" "+t((Q=v.value)==null?void 0:Q.plec),1),e("p",Bg,t((L=(K=w.value)==null?void 0:K.group)==null?void 0:L.athletes_count)+" zawodników ",1)]),e("button",{onClick:W,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},x[14]||(x[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",qg,[(P=w.value)!=null&&P.session?(s(),r("div",Lg,[x[18]||(x[18]=e("h4",{class:"font-semibold text-blue-900 dark:text-blue-100 mb-2"},"Sesja SECTRO",-1)),e("div",Qg,[e("p",null,[x[15]||(x[15]=e("strong",null,"Nazwa:",-1)),oe(" "+t(w.value.session.nazwa),1)]),e("p",null,[x[16]||(x[16]=e("strong",null,"Status:",-1)),oe(" "+t(w.value.session.status),1)]),e("p",null,[x[17]||(x[17]=e("strong",null,"Utworzona:",-1)),oe(" "+t(b(w.value.session.created_at)),1)])])])):N("",!0),e("div",null,[x[19]||(x[19]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-4"},"Lista zawodników",-1)),((E=(h=w.value)==null?void 0:h.athletes)==null?void 0:E.length)>0?(s(),r("div",Wg,[(s(!0),r(J,null,ee(w.value.athletes,Z=>(s(),r("div",{key:Z.nr_startowy,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",Vg,[e("div",Zg,t(Z.nr_startowy),1),e("div",null,[e("div",Ug,t(Z.imie)+" "+t(Z.nazwisko),1),e("div",Gg,t(Z.klub)+" • Zameldowany: "+t(b(Z.check_in_time)),1)])]),e("button",{onClick:pe=>z(Z.nr_startowy),class:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors duration-200"}," Usuń ",8,Kg)]))),128))])):(s(),r("div",Hg," Brak zawodników w grupie "))])]),e("div",Jg,[((ie=(H=w.value)==null?void 0:H.group)==null?void 0:ie.athletes_count)>0?(s(),r("button",{key:0,onClick:M,class:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200"}," Usuń całą grupę ")):(s(),r("div",Yg)),e("button",{onClick:W,class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200"}," Zamknij ")])])])):!c.groups||c.groups.length===0?(s(),r("div",Xg,x[20]||(x[20]=[de('<svg class="w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-64a19cda><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-64a19cda></path></svg><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2" data-v-64a19cda>Brak grup startowych</h3><p class="text-gray-600 dark:text-gray-400 mb-4" data-v-64a19cda> Grupy startowe tworzone są automatycznie po zameldowaniu zawodników </p><div class="text-sm text-gray-500 dark:text-gray-400" data-v-64a19cda> 💡 Przejdź do QR Scanner aby zameldować pierwszych zawodników </div>',4)]))):N("",!0)])}}},tp=Te(ep,[["__scopeId","data-v-64a19cda"]]),ap={class:"live-timing-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},sp={class:"flex items-center justify-between mb-6"},rp={class:"flex items-center space-x-3"},op={class:"text-sm text-gray-600 dark:text-gray-400"},np={key:0},lp={key:1},ip={class:"flex items-center space-x-2"},dp=["disabled"],up={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},cp={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gp={key:0,class:"mb-8"},pp={class:"bg-gradient-to-br from-purple-500 to-blue-600 text-white rounded-xl p-6"},yp={class:"flex items-center justify-between mb-4"},vp={class:"text-2xl font-bold"},xp={class:"text-sm opacity-90"},mp={class:"text-right"},bp={class:"text-3xl font-mono font-bold"},kp={class:"flex items-center justify-between text-sm"},hp={class:"flex items-center space-x-4"},fp={class:"flex-1 h-0.5 bg-white/30 mx-2 relative"},wp={key:0,class:"absolute left-0 top-0 h-full bg-green-300 animate-pulse",style:{width:"50%"}},_p={class:"mb-8"},$p={key:0,class:"space-y-3"},zp={class:"flex items-center justify-between"},Sp={class:"flex items-center space-x-3"},Cp={class:"font-medium text-gray-900 dark:text-white"},jp={class:"text-sm text-gray-600 dark:text-gray-400"},Ip={class:"text-right"},Tp={key:0,class:"text-sm font-mono font-semibold text-gray-900 dark:text-white"},Mp={key:1,class:"text-sm font-mono text-blue-600 dark:text-blue-400"},Rp={key:0,class:"text-center py-2 text-sm text-gray-500 dark:text-gray-400"},Pp={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Op={class:"border-t border-gray-200 dark:border-gray-600 pt-6"},Dp={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},Ep={class:"mb-4"},Ap=["value"],Np={class:"flex space-x-2 mb-4"},Fp=["disabled"],Bp={class:"flex space-x-2"},qp={class:"text-xs font-medium"},Lp={__name:"LiveTimingCard",props:{sessions:{type:Array,required:!0,default:()=>[]},queue:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["timing-started","measurement-recorded","refresh-requested"],setup(c,{emit:l}){const n=c,o=l,i=_(""),v=_(""),w=_(null);_(0);const T=_(null),I=_(0);_(null),_(new Map);const F=B(()=>n.sessions.map(b=>`${b.kategoria} ${b.plec}`).join(", ")),y=B(()=>{const b=n.queue.find(R=>R.unified_status==="RUNNING"||R.unified_status==="TIMING");if(b)return{...b,current_time:f(b)};const d=n.queue.find(R=>R.start_time&&!R.finish_time);if(d)return{...d,current_time:f(d)};const x=n.queue.filter(R=>R.start_time).sort((R,Q)=>new Date(Q.start_time)-new Date(R.start_time))[0];return x&&(Date.now()-new Date(x.start_time))/1e3<30?{...x,current_time:f(x)}:null}),f=b=>{if(!b.start_time)return 0;I.value;const d=new Date(b.start_time).getTime(),x=b.finish_time?new Date(b.finish_time).getTime():Date.now();return Math.max(0,(x-d)/1e3)},g=()=>n.sessions.every(d=>d.status==="active")&&n.sessions.length>0?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",k=()=>{if(n.sessions.length===0)return"BRAK SESJI";const b=n.sessions.filter(d=>d.status==="active").length;return b===n.sessions.length?`${b} AKTYWNA${b>1?"E":""}`:`${b}/${n.sessions.length} AKTYWNE`},m=(b,d)=>b.unified_status==="RUNNING"||b.unified_status==="TIMING"?"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-700":b.unified_status==="FINISHED"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":d===0?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",j=b=>b===0?"bg-blue-600 text-white":b===1?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",G=b=>{switch(b){case"RUNNING":case"TIMING":return"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400";case"FINISHED":return"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400";case"READY":return"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}},A=b=>{switch(b){case"RUNNING":return"BIEGNIE";case"TIMING":return"TIMING";case"FINISHED":return"UKOŃCZONE";case"READY":return"GOTOWY";default:return"OCZEKUJE"}},z=b=>{if(!b||b<0)return"00:00.00";const d=Math.floor(b/60),x=b%60;return`${d.toString().padStart(2,"0")}:${x.toFixed(2).padStart(5,"0")}`},S=async()=>{i.value.trim()&&(await C(i.value.trim()),i.value="")},M=async b=>{const d=new Date,x=d.getHours().toString().padStart(2,"0"),R=d.getMinutes().toString().padStart(2,"0"),Q=d.getSeconds().toString().padStart(2,"0"),K=d.getMilliseconds().toString().padStart(3,"0"),L=`${x}${R}${Q}${K}`;let P="";switch(b){case"START":P=`CZL1${L}`;break;case"FINISH":P=`CZL4${L}`;break;case"INVALID":P=`INVALID${L}`;break}console.log(`🧪 Generuję ramkę testową: ${P}`),await C(P)},C=async b=>{var d;try{const R=await(await fetch("/api/unified/record-measurement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:(d=n.sessions[0])==null?void 0:d.id,raw_frame:b,nr_startowy:v.value})})).json();w.value={success:R.success,message:R.message||R.error},R.success&&o("measurement-recorded",R),setTimeout(()=>{w.value=null},5e3)}catch(x){console.error("❌ Frame processing error:",x),w.value={success:!1,message:"Błąd połączenia z serwerem"}}},W=()=>{o("refresh-requested")};return $e(()=>{n.queue.length>0&&(v.value=n.queue[0].nr_startowy),T.value=setInterval(()=>{I.value=Date.now();const b=y.value;b?console.log("⏱️ Timer tick:",{name:`${b.imie} ${b.nazwisko}`,start_time:b.start_time,current_time:b.current_time,unified_status:b.unified_status}):(console.log("⏱️ Timer tick: Brak currentRunner"),console.log("📊 Queue data:",n.queue.map(d=>({nr:d.nr_startowy,name:`${d.imie} ${d.nazwisko}`,status:d.unified_status,start_time:d.start_time,finish_time:d.finish_time}))))},1e3)}),ut(()=>{T.value&&clearInterval(T.value)}),(b,d)=>(s(),r("div",ap,[e("div",sp,[e("div",rp,[d[6]||(d[6]=e("div",{class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[d[5]||(d[5]=e("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"SECTRO Live Timing",-1)),e("p",op,[c.sessions.length===1?(s(),r("span",np,t(c.sessions[0].kategoria)+" "+t(c.sessions[0].plec)+" • "+t(c.sessions[0].nazwa),1)):(s(),r("span",lp,t(c.sessions.length)+" aktywnych grup: "+t(F.value),1))])])]),e("div",ip,[e("div",{class:U([g(),"px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-2"])},[e("div",{class:U(["w-2 h-2 rounded-full animate-pulse",c.sessions.some(x=>x.status==="active")?"bg-green-400":"bg-yellow-400"])},null,2),e("span",null,t(k()),1)],2),e("button",{onClick:W,disabled:c.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[c.loading?(s(),r("svg",up,d[7]||(d[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",cp,d[8]||(d[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,dp)])]),y.value?(s(),r("div",gp,[e("div",pp,[e("div",yp,[e("div",null,[d[9]||(d[9]=e("div",{class:"text-sm opacity-90"},"🏃 Aktualnie na trasie:",-1)),e("div",vp,t(y.value.imie)+" "+t(y.value.nazwisko),1),e("div",xp,t(y.value.klub),1)]),e("div",mp,[e("div",bp,t(z(y.value.current_time)),1),d[10]||(d[10]=e("div",{class:"text-sm opacity-90"},"Czas biegu",-1))])]),e("div",kp,[e("div",hp,[e("div",{class:U([y.value.start_time?"text-green-300":"text-white/50","flex items-center space-x-1"])},[e("div",{class:U(["w-3 h-3 rounded-full",y.value.start_time?"bg-green-300":"bg-white/50"])},null,2),d[11]||(d[11]=e("span",null,"START",-1))],2),e("div",fp,[y.value.start_time&&!y.value.finish_time?(s(),r("div",wp)):N("",!0)]),e("div",{class:U([y.value.finish_time?"text-green-300":"text-white/50","flex items-center space-x-1"])},[e("div",{class:U(["w-3 h-3 rounded-full",y.value.finish_time?"bg-green-300":"bg-white/50"])},null,2),d[12]||(d[12]=e("span",null,"FINISH",-1))],2)])])])])):N("",!0),e("div",_p,[d[13]||(d[13]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Kolejka startowa",-1)),c.queue.length>0?(s(),r("div",$p,[(s(!0),r(J,null,ee(c.queue.slice(0,10),(x,R)=>(s(),r("div",{key:x.nr_startowy,class:U([m(x,R),"p-4 rounded-lg border transition-all duration-200"])},[e("div",zp,[e("div",Sp,[e("div",{class:U([j(R),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t(R+1),3),e("div",null,[e("div",Cp,t(x.imie)+" "+t(x.nazwisko)+" (#"+t(x.nr_startowy)+") ",1),e("div",jp,t(x.klub),1)])]),e("div",Ip,[e("div",{class:U([G(x.unified_status),"px-2 py-1 rounded-full text-xs font-medium mb-1"])},t(A(x.unified_status)),3),x.final_time?(s(),r("div",Tp,t(z(x.final_time)),1)):x.current_time?(s(),r("div",Mp,t(z(x.current_time)),1)):N("",!0)])])],2))),128)),c.queue.length>10?(s(),r("div",Rp," ... i "+t(c.queue.length-10)+" więcej w kolejce ",1)):N("",!0)])):(s(),r("div",Pp," Brak zawodników w kolejce "))]),e("div",Op,[d[15]||(d[15]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Manual Testing",-1)),e("div",Dp,[e("div",Ep,[X(e("select",{"onUpdate:modelValue":d[0]||(d[0]=x=>v.value=x),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"},[d[14]||(d[14]=e("option",{value:""},"-- Wybierz zawodnika do testów --",-1)),(s(!0),r(J,null,ee(c.queue.slice(0,5),x=>(s(),r("option",{key:x.nr_startowy,value:x.nr_startowy}," #"+t(x.nr_startowy)+" - "+t(x.imie)+" "+t(x.nazwisko)+" ("+t(x.unified_status)+") ",9,Ap))),128))],512),[[le,v.value]])]),e("div",Np,[X(e("input",{"onUpdate:modelValue":d[1]||(d[1]=x=>i.value=x),onKeyup:Lt(S,["enter"]),placeholder:"Wpisz ramkę SECTRO (np. CZL1123456789)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"},null,544),[[xe,i.value]]),e("button",{onClick:S,disabled:!i.value.trim()||!v.value,class:"px-4 py-2 bg-purple-600 disabled:bg-gray-400 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 text-sm"}," Wyślij ",8,Fp)]),e("div",Bp,[e("button",{onClick:d[2]||(d[2]=x=>M("START")),class:"px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors"}," Test START "),e("button",{onClick:d[3]||(d[3]=x=>M("FINISH")),class:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors"}," Test FINISH "),e("button",{onClick:d[4]||(d[4]=x=>M("INVALID")),class:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors"}," Test Invalid ")]),w.value?(s(),r("div",{key:0,class:U(["mt-3 p-2 rounded",w.value.success?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400"])},[e("div",qp,t(w.value.message),1)],2)):N("",!0)])])]))}},Qp=Te(Lp,[["__scopeId","data-v-66dbbd7b"]]),Wp={class:"results-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Vp={class:"flex items-center justify-between mb-6"},Zp={class:"flex items-center space-x-2"},Up=["disabled"],Gp={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Kp={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Hp={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},Jp={class:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},Yp={class:"flex items-center justify-between"},Xp={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},ey={class:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},ty={class:"flex items-center justify-between"},ay={class:"text-2xl font-bold text-green-900 dark:text-green-100"},sy={class:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800"},ry={class:"flex items-center justify-between"},oy={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},ny={class:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800"},ly={class:"flex items-center justify-between"},iy={class:"text-2xl font-bold text-orange-900 dark:text-orange-100"},dy={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},uy={key:0,class:"divide-y divide-gray-200 dark:divide-gray-600"},cy={class:"grid grid-cols-12 gap-4 items-center"},gy={class:"col-span-1"},py={class:"col-span-4"},yy={class:"flex items-center space-x-3"},vy={class:"flex-1"},xy={class:"font-semibold text-gray-900 dark:text-white"},my={class:"text-sm text-gray-600 dark:text-gray-400"},by={key:0,class:"text-yellow-500"},ky={key:1,class:"text-gray-400"},hy={key:2,class:"text-amber-600"},fy={class:"col-span-3"},wy={class:"text-sm text-gray-900 dark:text-white"},_y={class:"col-span-2"},$y={key:0,class:"text-lg font-mono font-bold text-gray-900 dark:text-white"},zy={key:1,class:"text-lg font-mono text-blue-600 dark:text-blue-400"},Sy={key:2,class:"text-sm text-gray-500 dark:text-gray-400"},Cy={key:3,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},jy={key:0},Iy={key:1},Ty={class:"col-span-2"},My={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Ry={class:"text-xs text-gray-400 mt-1"},Py={key:1,class:"px-6 py-12 text-center"},Oy={__name:"ResultsCard",props:{sessionId:{type:Number,required:!0},results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh-requested"],setup(c,{emit:l}){const n=c,o=l,i=B(()=>{const z=n.results.filter(M=>M.unified_status==="FINISHED"&&M.total_time).sort((M,C)=>M.total_time-C.total_time).map((M,C)=>({...M,position:C+1})),S=n.results.filter(M=>M.unified_status!=="FINISHED"||!M.total_time).map(M=>({...M,position:null}));return[...z,...S]}),v=B(()=>i.value.filter(z=>z.unified_status==="FINISHED"&&z.total_time)),w=B(()=>v.value.length),T=B(()=>i.value.filter(z=>z.unified_status!=="FINISHED").length),I=B(()=>{const z=v.value;return z.length===0?null:Math.min(...z.map(S=>S.total_time))}),F=B(()=>I.value?m(I.value):"--:--"),y=B(()=>{const z=v.value;if(z.length===0)return"--:--";const M=z.reduce((C,W)=>C+W.total_time,0)/z.length;return m(M)}),f=(z,S)=>z.unified_status==="RUNNING"||z.unified_status==="TIMING"?"bg-purple-50 dark:bg-purple-900/10":z.position===1?"bg-yellow-50 dark:bg-yellow-900/10":z.position===2?"bg-gray-50 dark:bg-gray-800":z.position===3?"bg-amber-50 dark:bg-amber-900/10":"bg-white dark:bg-gray-800",g=z=>{const S=i.value[z];return S.position===1?"bg-yellow-500 text-white":S.position===2?"bg-gray-400 text-white":S.position===3?"bg-amber-600 text-white":S.total_time?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},k=z=>{switch(z){case"FINISHED":return"UKOŃCZONE";case"RUNNING":return"BIEGNIE";case"TIMING":return"TIMING";case"READY":return"GOTOWY";default:return"OCZEKUJE"}},m=z=>{if(!z||z<0)return"00:00.00";const S=Math.floor(z/60),M=z%60;return`${S.toString().padStart(2,"0")}:${M.toFixed(2).padStart(5,"0")}`},j=z=>new Date(z).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),G=async()=>{o("refresh-requested")},A=()=>{const S=[["Pozycja","Zawodnik","Klub","Czas","Start","Finish","Status"].join(",")];i.value.forEach(b=>{const d=[b.position||"",`"${b.imie} ${b.nazwisko}"`,`"${b.klub||""}"`,b.total_time?m(b.total_time):"",b.start_time?j(b.start_time):"",b.finish_time?j(b.finish_time):"",k(b.unified_status)];S.push(d.join(","))});const M=S.join(`
`),C=new Blob([M],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a");if(W.download!==void 0){const b=URL.createObjectURL(C);W.setAttribute("href",b),W.setAttribute("download",`wyniki_sesja_${n.sessionId}_${new Date().toISOString().slice(0,10)}.csv`),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)}};return(z,S)=>(s(),r("div",Wp,[e("div",Vp,[S[2]||(S[2]=de('<div class="flex items-center space-x-3" data-v-3e005c7d><div class="w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center" data-v-3e005c7d><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3e005c7d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" data-v-3e005c7d></path></svg></div><div data-v-3e005c7d><h2 class="text-xl font-bold text-gray-900 dark:text-white" data-v-3e005c7d>Wyniki</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-3e005c7d>Ranking i analiza sesji</p></div></div>',1)),e("div",Zp,[e("button",{onClick:A,class:"px-4 py-2 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg font-medium hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors duration-200"}," 📊 Eksport "),e("button",{onClick:G,disabled:c.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[c.loading?(s(),r("svg",Gp,S[0]||(S[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",Kp,S[1]||(S[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,Up)])]),e("div",Hp,[e("div",Jp,[e("div",Yp,[e("div",null,[S[3]||(S[3]=e("div",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"Ukończone",-1)),e("div",Xp,t(w.value),1)]),S[4]||(S[4]=e("div",{class:"w-10 h-10 bg-blue-200 dark:bg-blue-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",ey,[e("div",ty,[e("div",null,[S[5]||(S[5]=e("div",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"Najlepszy czas",-1)),e("div",ay,t(F.value),1)]),S[6]||(S[6]=e("div",{class:"w-10 h-10 bg-green-200 dark:bg-green-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",sy,[e("div",ry,[e("div",null,[S[7]||(S[7]=e("div",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"Średni czas",-1)),e("div",oy,t(y.value),1)]),S[8]||(S[8]=e("div",{class:"w-10 h-10 bg-purple-200 dark:bg-purple-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])]),e("div",ny,[e("div",ly,[e("div",null,[S[9]||(S[9]=e("div",{class:"text-sm font-medium text-orange-600 dark:text-orange-400"},"W kolejce",-1)),e("div",iy,t(T.value),1)]),S[10]||(S[10]=e("div",{class:"w-10 h-10 bg-orange-200 dark:bg-orange-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),e("div",dy,[S[12]||(S[12]=de('<div class="bg-gray-50 dark:bg-gray-700 px-6 py-3 border-b border-gray-200 dark:border-gray-600" data-v-3e005c7d><div class="grid grid-cols-12 gap-4 text-sm font-medium text-gray-600 dark:text-gray-400" data-v-3e005c7d><div class="col-span-1" data-v-3e005c7d>Poz.</div><div class="col-span-4" data-v-3e005c7d>Zawodnik</div><div class="col-span-3" data-v-3e005c7d>Klub</div><div class="col-span-2" data-v-3e005c7d>Czas</div><div class="col-span-2" data-v-3e005c7d>Status</div></div></div>',1)),i.value.length>0?(s(),r("div",uy,[(s(!0),r(J,null,ee(i.value,(M,C)=>(s(),r("div",{key:M.nr_startowy,class:U([f(M),"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"])},[e("div",cy,[e("div",gy,[e("div",{class:U([g(C),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t(M.position||"-"),3)]),e("div",py,[e("div",yy,[e("div",vy,[e("div",xy,t(M.imie)+" "+t(M.nazwisko),1),e("div",my," ID: "+t(M.nr_startowy),1)]),M.position===1?(s(),r("div",by,"🥇")):M.position===2?(s(),r("div",ky,"🥈")):M.position===3?(s(),r("div",hy,"🥉")):N("",!0)])]),e("div",fy,[e("div",wy,t(M.klub||"Brak klubu"),1)]),e("div",_y,[M.total_time?(s(),r("div",$y,t(m(M.total_time)),1)):M.current_time?(s(),r("div",zy,t(m(M.current_time)),1)):(s(),r("div",Sy," -:--.-- ")),M.start_time||M.finish_time?(s(),r("div",Cy,[M.start_time?(s(),r("div",jy,"Start: "+t(j(M.start_time)),1)):N("",!0),M.finish_time?(s(),r("div",Iy,"Finish: "+t(j(M.finish_time)),1)):N("",!0)])):N("",!0)]),e("div",Ty,[M.position>1&&M.total_time&&I.value?(s(),r("div",My," +"+t(m(M.total_time-I.value)),1)):N("",!0),e("div",Ry," Status: "+t(M.unified_status),1)])])],2))),128))])):(s(),r("div",Py,S[11]||(S[11]=[e("svg",{class:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Brak wyników",-1),e("p",{class:"text-gray-600 dark:text-gray-400"}," Wyniki pojawią się po ukończeniu biegu przez zawodników ",-1)])))])]))}},Dy=Te(Oy,[["__scopeId","data-v-3e005c7d"]]),Ey={class:"unified-start-control min-h-screen bg-gray-50 dark:bg-gray-900 p-6"},Ay={class:"mb-8"},Ny={class:"flex items-center justify-between"},Fy={class:"text-right"},By={class:"mt-4 flex items-center space-x-2"},qy={class:"mt-2 flex space-x-10"},Ly={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Qy={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Wy={class:"flex items-center justify-between"},Vy={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Zy={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Uy={class:"flex items-center justify-between"},Gy={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Ky={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Hy={class:"flex items-center justify-between"},Jy={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Yy={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Xy={class:"flex items-center justify-between"},ev={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},tv={class:"space-y-8"},av={class:"fixed bottom-8 right-8"},sv=["disabled"],rv={key:0,class:"w-6 h-6 animate-spin",fill:"none",viewBox:"0 0 24 24"},ov={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nv={__name:"UnifiedStartControl",setup(c){const l=_(!1),n=_([]),o=_([]),i=_(null),v=_([]),w=_({}),T=_(null),I=["Grupy","Timing","Wyniki"],F=B(()=>n.value.some(b=>b.liczba_zawodnikow>0)),y=B(()=>n.value.filter(b=>b.liczba_zawodnikow>0).length),f=B(()=>o.value.some(b=>b.unified_status==="FINISHED"||b.unified_status==="TIMING")),g=B(()=>i.value&&f.value?"3. Wyniki":i.value?"2. Live Timing":(F.value,"1. Grupy Startowe")),k=()=>{const b=g.value;return b.includes("Wyniki")?"text-green-600 dark:text-green-400":b.includes("Timing")?"text-purple-600 dark:text-purple-400":b.includes("Grupy")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"},m=b=>{const d=A();return b<d?"bg-green-500 text-white":b===d?"bg-blue-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400"},j=b=>{const d=A();return b<d?"bg-green-500":"bg-gray-300 dark:bg-gray-600"},G=b=>{const d=A();return b<d?"text-green-600 dark:text-green-400":b===d?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"},A=()=>i.value&&f.value?2:i.value?1:(F.value,0),z=async()=>{var b;l.value=!0;try{const x=await(await fetch("/api/unified/dashboard-data")).json();x.success?(n.value=x.groups||[],o.value=x.queue||[],i.value=x.activeSession,v.value=x.activeSessions||[],w.value=x.stats||{},console.log("✅ Unified dashboard data refreshed:",{groups:n.value.length,queue:o.value.length,activeSession:((b=i.value)==null?void 0:b.id)||"none",currentPhase:g.value})):console.error("❌ Error refreshing unified data:",x.error)}catch(d){console.error("❌ Network error refreshing unified data:",d)}finally{l.value=!1}},S=async b=>{console.log("🏁 Group activated:",b),await z(),setTimeout(()=>{const d=document.querySelector(".live-timing-card");d&&d.scrollIntoView({behavior:"smooth"})},500)},M=async b=>{console.log("⏹️ Group deactivated:",b),await z()},C=async b=>{console.log("⏱️ Timing started:",b),await z()},W=async b=>{console.log("📊 Measurement recorded:",b),await z(),f.value&&setTimeout(()=>{const d=document.querySelector(".results-card");d&&d.scrollIntoView({behavior:"smooth"})},500)};return $e(()=>{z(),T.value=setInterval(z,1e4)}),ut(()=>{T.value&&clearInterval(T.value)}),(b,d)=>{var x,R;return s(),r("div",Ey,[e("div",Ay,[e("div",Ny,[d[1]||(d[1]=de('<div class="flex items-center space-x-4" data-v-3d3ad122><div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center" data-v-3d3ad122><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3d3ad122><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-3d3ad122></path></svg></div><div data-v-3d3ad122><h1 class="text-3xl font-bold text-gray-900 dark:text-white" data-v-3d3ad122>Unified Start Control</h1><p class="text-gray-600 dark:text-gray-400" data-v-3d3ad122>Centrum Startu + SECTRO Live Timing</p></div></div>',1)),e("div",Fy,[d[0]||(d[0]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faza workflow:",-1)),e("div",{class:U(["text-lg font-semibold",k()])},t(g.value),3)])]),e("div",By,[(s(),r(J,null,ee(I,(Q,K)=>e("div",{key:K,class:"flex items-center"},[e("div",{class:U([m(K),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t(K+1),3),K<I.length-1?(s(),r("div",{key:0,class:U([j(K),"w-8 h-0.5 mx-2"])},null,2)):N("",!0)])),64))]),e("div",qy,[(s(),r(J,null,ee(I,(Q,K)=>e("div",{key:K,class:U([G(K),"text-xs font-medium"])},t(Q),3)),64))])]),e("div",Ly,[e("div",Qy,[e("div",Wy,[e("div",null,[d[2]||(d[2]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Zameldowani",-1)),e("p",Vy,t(((x=w.value.zawodnicy)==null?void 0:x.zameldowani)||0),1)]),d[3]||(d[3]=e("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Zy,[e("div",Uy,[e("div",null,[d[4]||(d[4]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Grupy gotowe",-1)),e("p",Gy,t(y.value),1)]),d[5]||(d[5]=e("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),e("div",Ky,[e("div",Hy,[e("div",null,[d[6]||(d[6]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Sesje SECTRO",-1)),e("p",Jy,t(((R=w.value.sectro)==null?void 0:R.active_sessions)||0),1)]),d[7]||(d[7]=e("div",{class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Yy,[e("div",Xy,[e("div",null,[d[8]||(d[8]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"W kolejce",-1)),e("p",ev,t(o.value.length),1)]),d[9]||(d[9]=e("div",{class:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1))])])]),e("div",tv,[q(tp,{groups:n.value,loading:l.value,onGroupActivated:S,onGroupDeactivated:M,onRefreshRequested:z},null,8,["groups","loading"]),v.value&&v.value.length>0?(s(),ge(Qp,{key:0,sessions:v.value,queue:o.value,loading:l.value,onTimingStarted:C,onMeasurementRecorded:W,onRefreshRequested:z},null,8,["sessions","queue","loading"])):N("",!0),i.value&&f.value?(s(),ge(Dy,{key:1,"session-id":i.value.id,results:o.value,loading:l.value,onRefreshRequested:z},null,8,["session-id","results","loading"])):N("",!0)]),e("div",av,[e("button",{onClick:z,disabled:l.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-4 rounded-full shadow-lg transition-all duration-200"},[l.value?(s(),r("svg",rv,d[10]||(d[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",ov,d[11]||(d[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,sv)])])}}},lv=Te(nv,[["__scopeId","data-v-3d3ad122"]]),iv={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},dv={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200"},uv={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},cv={class:"flex justify-between items-center h-16"},gv={class:"flex items-center flex-shrink-0"},pv={class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white transition-colors duration-200"},yv={key:0,class:"ml-1 sm:ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"},vv={class:"hidden sm:block flex-1 max-w-lg mx-8"},xv={class:"relative"},mv={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},bv={class:"flex items-center space-x-2 sm:space-x-4"},kv={class:"flex items-center space-x-1 sm:space-x-2"},hv={class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200"},fv=["title"],wv={class:"w-7 h-7 sm:w-8 sm:h-8 bg-indigo-500 rounded-full flex items-center justify-center"},_v={class:"text-white text-xs sm:text-sm font-medium"},$v={class:"pb-4 sm:hidden"},zv={class:"relative"},Sv={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Cv={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},jv={class:"border-b border-gray-200 dark:border-gray-700"},Iv={class:"-mb-px flex flex-wrap gap-x-4 gap-y-2 sm:space-x-8 sm:gap-y-0","aria-label":"Tabs"},Tv=["onClick"],Mv={class:"text-xs sm:text-sm"},Rv={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Pv={key:0},Ov={key:1,class:"space-y-6"},Dv={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ev={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Av={class:"bg-white dark:bg-gray-800 shadow rounded-lg transition-colors duration-200"},Nv={class:"px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Fv={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Bv=["value"],qv=["value"],Lv={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Qv={class:"flex flex-wrap gap-3 mb-4"},Wv=["disabled"],Vv=["disabled"],Zv=["disabled"],Uv=["disabled"],Gv={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Kv={class:"flex flex-wrap gap-3"},Hv=["disabled"],Jv=["disabled"],Yv=["disabled"],Xv={class:"md:hidden p-4 space-y-4"},ex={class:"hidden md:block overflow-x-auto"},tx={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ax={class:"bg-gray-50 dark:bg-gray-700"},sx={class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},rx=["checked"],ox={key:0,class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},nx={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},lx={class:"px-6 py-4 whitespace-nowrap"},ix=["checked","onChange"],dx={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},ux={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},cx={class:"px-6 py-4 whitespace-nowrap"},gx={class:"text-base font-medium text-gray-900 dark:text-white"},px={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},yx={class:"px-6 py-4 whitespace-nowrap"},vx={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},xx={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},mx={class:"flex flex-col space-y-2"},bx=["onClick"],kx={key:0,class:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6"},hx={class:"flex-1 flex justify-between sm:hidden"},fx=["disabled"],wx=["disabled"],_x={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},$x={class:"text-sm text-gray-700 dark:text-gray-300"},zx={class:"font-medium"},Sx={class:"font-medium"},Cx={class:"font-medium"},jx={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ix=["disabled"],Tx=["disabled"],Mx=["onClick"],Rx={key:0,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300"},Px=["disabled"],Ox=["disabled"],Dx={key:2},Ex={key:3},Ax={key:4},Nx={key:5},Fx={key:6},Bx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},qx={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto"},Lx={class:"flex items-center justify-between mb-4"},Qx={class:"mb-4 flex space-x-4"},Wx={id:"qrPrintArea",class:"print-content"},Vx={class:"sticker-grid"},Zx={class:"sticker-header"},Ux={class:"nr-startowy"},Gx={class:"zawodnik-name"},Kx={class:"qr-container"},Hx=["src","alt"],Jx={class:"sticker-footer"},Yx={class:"kategoria"},Xx={class:"klub"},We=50,em=ke({__name:"App",setup(c){const l=_([]),n=_(""),o=_(!0),i=_(localStorage.getItem("darkMode")==="true"),v=_(!0);_(null);const w=_(!1),T=_(null),I=_("dashboard"),F=_({kluby:[],kategorie:[],plcie:[],statusy:[]}),y=_({kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"}),f=_([]),g=_(!1),k=_([]),m=_(!1),j=_(1),G=B(()=>S.value.length),A=B(()=>Math.ceil(G.value/We)),z=[{id:"dashboard",name:"Dashboard",icon:Ze,adminOnly:!1},{id:"zawodnicy",name:"Zawodnicy",icon:ct,adminOnly:!0},{id:"drabinka",name:"Drabinka",icon:Ne,adminOnly:!1},{id:"rankingi",name:"Rankingi",icon:fa,adminOnly:!1},{id:"unified-start",name:"Start Control",icon:Be,adminOnly:!0},{id:"qr-dashboard",name:"QR Dashboard",icon:Ue,adminOnly:!0},{id:"pwa-scanner",name:"PWA Scanner",icon:Zt,adminOnly:!1}],S=B(()=>{let O=l.value;if(n.value){const p=n.value.toLowerCase();O=O.filter(D=>D.imie.toLowerCase().includes(p)||D.nazwisko.toLowerCase().includes(p)||D.kategoria.toLowerCase().includes(p)||D.nr_startowy.toString().includes(p)||D.klub.toLowerCase().includes(p))}return y.value.kategoria&&(O=O.filter(p=>p.kategoria===y.value.kategoria)),y.value.klub&&(O=O.filter(p=>p.klub===y.value.klub)),y.value.statusQr==="z_qr"?O=O.filter(p=>p.qr_code):y.value.statusQr==="bez_qr"&&(O=O.filter(p=>!p.qr_code)),y.value.sortowanie==="nr_startowy_asc"?O.sort((p,D)=>p.nr_startowy-D.nr_startowy):y.value.sortowanie==="nr_startowy_desc"?O.sort((p,D)=>D.nr_startowy-p.nr_startowy):y.value.sortowanie==="nazwisko_asc"?O.sort((p,D)=>`${p.nazwisko} ${p.imie}`.localeCompare(`${D.nazwisko} ${D.imie}`)):y.value.sortowanie==="nazwisko_desc"?O.sort((p,D)=>`${D.nazwisko} ${D.imie}`.localeCompare(`${p.nazwisko} ${p.imie}`)):y.value.sortowanie==="kategoria_asc"?O.sort((p,D)=>p.kategoria.localeCompare(D.kategoria)):y.value.sortowanie==="klub_asc"?O.sort((p,D)=>p.klub.localeCompare(D.klub)):y.value.sortowanie==="czas_asc"?O.sort((p,D)=>!p.czas_przejazdu_s&&!D.czas_przejazdu_s?0:p.czas_przejazdu_s?D.czas_przejazdu_s?p.czas_przejazdu_s-D.czas_przejazdu_s:-1:1):y.value.sortowanie==="czas_desc"&&O.sort((p,D)=>!p.czas_przejazdu_s&&!D.czas_przejazdu_s?0:p.czas_przejazdu_s?D.czas_przejazdu_s?D.czas_przejazdu_s-p.czas_przejazdu_s:-1:1),O}),M=B(()=>{const O=(j.value-1)*We,p=O+We;return S.value.slice(O,p)}),C=B(()=>{const O=l.value.length,p=l.value.filter(me=>me.status==="FINISHED"||me.checked_in===!0).length,D=l.value.filter(me=>me.status==="DNF"||me.status==="DSQ"||me.checked_in===!1).length,Ce=l.value.filter(me=>(me.status==="FINISHED"||me.checked_in===!0)&&me.czas_przejazdu_s);let be="-",je="-";if(Ce.length>0){const me=Ce.reduce((tt,at)=>at.czas_przejazdu_s<tt.czas_przejazdu_s?at:tt);be=H(me.czas_przejazdu_s),je=`${me.imie} ${me.nazwisko}`}return{total:O,finished:p,dnfDsq:D,recordTime:be,recordHolder:je}}),W=B(()=>[...new Set(l.value.map(O=>O.klub))]),b=B(()=>[...new Set(l.value.map(O=>O.kategoria))]),d=B(()=>z.filter(O=>!O.adminOnly||o.value)),x=B(()=>S.value.length>0&&S.value.every(O=>f.value.includes(O.nr_startowy))),R=B(()=>{if(!y.value.kategoria)return!1;const O=S.value.filter(p=>p.kategoria===y.value.kategoria);return O.length>0&&O.every(p=>f.value.includes(p.nr_startowy))}),Q=B(()=>{if(!y.value.klub)return!1;const O=S.value.filter(p=>p.klub===y.value.klub);return O.length>0&&O.every(p=>f.value.includes(p.nr_startowy))}),K=B(()=>{const O=S.value.filter(p=>!p.qr_code);return O.length>0&&O.every(p=>f.value.includes(p.nr_startowy))}),L=B(()=>S.value.filter(O=>!O.qr_code).length),P=B(()=>{const O=l.value.filter(D=>D.qr_code).length,p=l.value.length-O;return{withQr:O,withoutQr:p}}),h=B(()=>f.value.filter(O=>{const p=l.value.find(D=>D.nr_startowy===O);return p&&p.qr_code})),E=B(()=>f.value.filter(O=>{const p=l.value.find(D=>D.nr_startowy===O);return p&&!p.qr_code}));B(()=>{let O=l.value;if(n.value){const p=n.value.toLowerCase();O=O.filter(D=>D.imie.toLowerCase().includes(p)||D.nazwisko.toLowerCase().includes(p)||D.kategoria.toLowerCase().includes(p)||D.nr_startowy.toString().includes(p)||D.klub.toLowerCase().includes(p))}return F.value.kluby.length>0&&(O=O.filter(p=>F.value.kluby.includes(p.klub))),F.value.kategorie.length>0&&(O=O.filter(p=>F.value.kategorie.includes(p.kategoria))),F.value.plcie.length>0&&(O=O.filter(p=>F.value.plcie.includes(p.plec))),F.value.statusy.length>0&&(O=O.filter(p=>F.value.statusy.includes(p.status))),O});const H=O=>{const p=Math.floor(O/60),D=(O%60).toFixed(2);return`${p}:${D.padStart(5,"0")}`},ie=async()=>{try{v.value=!0;const O=await _e.get("/api/zawodnicy?limit=1000");O.data.success?l.value=O.data.data||[]:l.value=O.data.data||O.data||[],console.log(`✅ Pobrano ${l.value.length} zawodników dla client-side pagination`)}catch(O){console.error("Błąd podczas pobierania zawodników:",O),O.value="Nie udało się pobrać danych zawodników"}finally{v.value=!1}},Z=()=>{o.value=!o.value},pe=()=>{i.value=!i.value,localStorage.setItem("darkMode",i.value.toString()),i.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ue=O=>{T.value=O,w.value=!0},re=()=>{w.value=!1,T.value=null},ae=()=>{ie(),i.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ce=()=>{ie(),i.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ye=()=>{y.value={kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"},f.value=[]},Se=O=>{const p=f.value.indexOf(O);p>-1?f.value.splice(p,1):f.value.push(O)},he=()=>{if(x.value){const O=S.value.map(p=>p.nr_startowy);f.value=f.value.filter(p=>!O.includes(p))}else{const O=S.value.map(D=>D.nr_startowy),p=[...new Set([...f.value,...O])];f.value=p}},qe=()=>{if(!y.value.kategoria)return;const O=S.value.filter(p=>p.kategoria===y.value.kategoria).map(p=>p.nr_startowy);if(R.value)f.value=f.value.filter(p=>!O.includes(p));else{const p=[...new Set([...f.value,...O])];f.value=p}},Ke=()=>{if(!y.value.klub)return;const O=S.value.filter(p=>p.klub===y.value.klub).map(p=>p.nr_startowy);if(Q.value)f.value=f.value.filter(p=>!O.includes(p));else{const p=[...new Set([...f.value,...O])];f.value=p}},He=()=>{const O=S.value.filter(p=>!p.qr_code).map(p=>p.nr_startowy);if(K.value)f.value=f.value.filter(p=>!O.includes(p));else{const p=[...new Set([...f.value,...O])];f.value=p}},Je=()=>{f.value=[]},Ye=O=>{I.value=O},Xe=O=>{O>=1&&O<=A.value&&(j.value=O)},et=()=>{j.value<A.value&&(j.value+=1)},Re=()=>{j.value>1&&(j.value-=1)},vt=()=>{j.value=1},fe=()=>{j.value=A.value},xt=async()=>{if(E.value.length!==0){m.value=!0;try{const O=await fetch("/api/qr/bulk-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numery_startowe:E.value})});if(O.ok){const p=await O.json();console.log(`✅ Wygenerowano ${p.data.codes.length} kodów QR`),await ie()}else console.error("Błąd podczas generowania QR kodów")}catch(O){console.error("Błąd:",O)}finally{m.value=!1}}},mt=async O=>await(await Ut(()=>import("./browser-BR0oiPy3.js").then(D=>D.b),__vite__mapDeps([0,1]))).toDataURL(O,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),Le=async()=>{if(h.value.length!==0){m.value=!0;try{const p=h.value.map(be=>l.value.find(je=>je.nr_startowy===be)).filter(Boolean).map(async be=>{if(!be.qr_code)return null;const je=await mt(be.qr_code);return{nr_startowy:be.nr_startowy,imie:be.imie,nazwisko:be.nazwisko,kategoria:be.kategoria,klub:be.klub||"",qr_image:je}}),Ce=(await Promise.all(p)).filter(Boolean);k.value=Ce,g.value=!0}catch(O){console.error("Błąd podczas przygotowywania QR kodów do druku:",O)}finally{m.value=!1}}},bt=async()=>{await Le()},Qe=()=>{g.value=!1,k.value=[]},kt=()=>{window.print(),Qe()};return Ie([y,n],()=>{j.value=1},{deep:!0}),$e(()=>{ie(),i.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),(O,p)=>(s(),r("div",iv,[e("header",dv,[e("div",uv,[e("div",cv,[e("div",gv,[e("h1",pv,[p[7]||(p[7]=e("span",{class:"hidden sm:inline"},"SKATECROSS Dashboard",-1)),p[8]||(p[8]=e("span",{class:"sm:hidden"},"SKATECROSS",-1)),o.value?(s(),r("span",yv,p[6]||(p[6]=[oe(" 🔧 "),e("span",{class:"hidden sm:inline ml-1"},"ADMIN",-1)]))):N("",!0)])]),e("div",vv,[e("div",xv,[e("div",mv,[q(V(Rt),{class:"h-5 w-5 text-gray-400"})]),X(e("input",{type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200 shadow-sm",placeholder:"Szukaj zawodników...","onUpdate:modelValue":p[0]||(p[0]=D=>n.value=D)},null,512),[[xe,n.value]])])]),e("div",bv,[e("div",kv,[p[9]||(p[9]=e("label",{class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:inline"},"Admin:",-1)),e("button",{onClick:Z,class:U(["relative inline-flex h-5 w-9 sm:h-6 sm:w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",o.value?"bg-indigo-600":"bg-gray-200 dark:bg-gray-600"])},[e("span",{class:U(["pointer-events-none inline-block h-4 w-4 sm:h-5 sm:w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",o.value?"translate-x-4 sm:translate-x-5":"translate-x-0"])},null,2)],2)]),e("button",hv,[q(V(wa),{class:"h-5 w-5 sm:h-6 sm:w-6"})]),e("button",{onClick:pe,class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200 transition-colors duration-200",title:i.value?"Przełącz na tryb jasny":"Przełącz na tryb ciemny"},[i.value?(s(),ge(V(_a),{key:0,class:"h-5 w-5 sm:h-6 sm:w-6"})):(s(),ge(V($a),{key:1,class:"h-5 w-5 sm:h-6 sm:w-6"}))],8,fv),e("div",wv,[e("span",_v,t(o.value?"A":"U"),1)])])]),e("div",$v,[e("div",zv,[e("div",Sv,[q(V(Rt),{class:"h-4 w-4 text-gray-400"})]),X(e("input",{type:"text",class:"block w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200",placeholder:"Szukaj zawodników...","onUpdate:modelValue":p[1]||(p[1]=D=>n.value=D)},null,512),[[xe,n.value]])])])])]),e("div",Cv,[e("div",jv,[e("nav",Iv,[(s(!0),r(J,null,ee(d.value,D=>(s(),r("button",{key:D.id,onClick:Ce=>I.value=D.id,class:U([I.value===D.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center"])},[(s(),ge(Fe(D.icon),{class:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"})),e("span",Mv,t(D.name),1)],10,Tv))),128))])])]),e("main",Rv,[I.value==="dashboard"?(s(),r("div",Pv,[q(dg,{onNavigate:Ye})])):N("",!0),I.value==="zawodnicy"?(s(),r("div",Ov,[e("div",Dv,[q(we,{title:"Łącznie zawodników",value:C.value.total.toString(),icon:"👥",color:"blue",subtitle:"Wszyscy zawodnicy"},null,8,["value"]),q(we,{title:"Ukończyli trasę",value:C.value.finished.toString(),icon:"✅",color:"green",subtitle:"Status FINISHED"},null,8,["value"]),q(we,{title:"DNF/DSQ",value:C.value.dnfDsq.toString(),icon:"⚠️",color:"yellow",subtitle:"Nie ukończyli"},null,8,["value"]),q(we,{title:"Najlepszy czas",value:C.value.recordTime,icon:"🏆",color:"purple",subtitle:C.value.recordHolder!=="-"?`Rekord: ${C.value.recordHolder}`:""},null,8,["value","subtitle"])]),e("div",Ev,[q(we,{title:"Z kodami QR",value:P.value.withQr.toString(),icon:"📱",color:"green",subtitle:"Mają QR kody"},null,8,["value"]),q(we,{title:"Bez kodów QR",value:P.value.withoutQr.toString(),icon:"❌",color:"red",subtitle:"Wymagają generowania"},null,8,["value"]),q(we,{title:"Zaznaczonych",value:f.value.length.toString(),icon:"☑️",color:"indigo",subtitle:"Do operacji grupowych"},null,8,["value"]),q(we,{title:"Gotowych do druku",value:h.value.length.toString(),icon:"🖨️",color:"purple",subtitle:"Zaznaczonych z QR"},null,8,["value"])]),e("div",Av,[e("div",Nv,[e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4"},[p[10]||(p[10]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:ye,class:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md hover:bg-red-200 dark:hover:bg-red-800 transition-colors duration-200 flex items-center"}," 🗑️ Wyczyść filtry ")]),e("div",Fv,[e("div",null,[p[12]||(p[12]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),X(e("select",{"onUpdate:modelValue":p[2]||(p[2]=D=>y.value.kategoria=D),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[p[11]||(p[11]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(b.value,D=>(s(),r("option",{key:D,value:D},t(D),9,Bv))),128))],512),[[le,y.value.kategoria]])]),e("div",null,[p[14]||(p[14]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),X(e("select",{"onUpdate:modelValue":p[3]||(p[3]=D=>y.value.klub=D),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[p[13]||(p[13]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(J,null,ee(W.value,D=>(s(),r("option",{key:D,value:D},t(D),9,qv))),128))],512),[[le,y.value.klub]])]),e("div",null,[p[16]||(p[16]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"📱"),e("span",null,"Status QR")])],-1)),X(e("select",{"onUpdate:modelValue":p[4]||(p[4]=D=>y.value.statusQr=D),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},p[15]||(p[15]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"z_qr"},"Z kodem QR",-1),e("option",{value:"bez_qr"},"Bez kodu QR",-1)]),512),[[le,y.value.statusQr]])]),e("div",null,[p[18]||(p[18]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),X(e("select",{"onUpdate:modelValue":p[5]||(p[5]=D=>y.value.sortowanie=D),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},p[17]||(p[17]=[de('<option value="nr_startowy_asc" data-v-0591b711>Nr startowy (rosnąco)</option><option value="nr_startowy_desc" data-v-0591b711>Nr startowy (malejąco)</option><option value="nazwisko_asc" data-v-0591b711>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-0591b711>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-0591b711>Kategoria (A-Z)</option><option value="klub_asc" data-v-0591b711>Klub (A-Z)</option><option value="czas_asc" data-v-0591b711>Czas (najlepszy)</option><option value="czas_desc" data-v-0591b711>Czas (najgorszy)</option>',8)]),512),[[le,y.value.sortowanie]])])]),e("div",Lv,[p[22]||(p[22]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"⚡"),e("span",null,"Operacje grupowe")])],-1)),e("div",Qv,[e("button",{onClick:he,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",x.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[e("span",null,t(x.value?"✅":"☐"),1),e("span",null,t(x.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" ("+t(S.value.length)+")",1)],2),e("button",{onClick:qe,disabled:!y.value.kategoria,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",y.value.kategoria?R.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(y.value.kategoria?R.value?"✅":"☐":"🏆"),1),e("span",null,t(y.value.kategoria?R.value?`Odznacz: ${y.value.kategoria}`:`Zaznacz: ${y.value.kategoria}`:"Wybierz kategorię"),1)],10,Wv),e("button",{onClick:Ke,disabled:!y.value.klub,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",y.value.klub?Q.value?"bg-purple-700 text-white shadow-inner border-purple-800":"bg-purple-600 text-white hover:bg-purple-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(y.value.klub?Q.value?"✅":"☐":"🏢"),1),e("span",null,t(y.value.klub?Q.value?`Odznacz: ${y.value.klub}`:`Zaznacz: ${y.value.klub}`:"Wybierz klub"),1)],10,Vv),e("button",{onClick:He,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",L.value===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":K.value?"bg-orange-700 text-white shadow-inner border-orange-800":"bg-orange-600 text-white hover:bg-orange-700 border-transparent"]),disabled:L.value===0},[e("span",null,t(K.value?"✅":"☐"),1),e("span",null,t(K.value?"Odznacz bez QR":"Zaznacz bez QR")+" ("+t(L.value)+")",1)],10,Zv),e("button",{onClick:Je,disabled:f.value.length===0,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent",f.value.length>0?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[p[19]||(p[19]=e("span",null,"🗑️",-1)),e("span",null,"Wyczyść zaznaczenia ("+t(f.value.length)+")",1)],10,Uv)]),e("div",Gv,[p[21]||(p[21]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"📱"),e("span",null,"Akcje QR")])],-1)),e("div",Kv,[e("button",{onClick:xt,disabled:E.value.length===0||m.value,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",E.value.length===0||m.value?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[q(V(Ue),{class:"h-4 w-4"}),e("span",null,t(m.value?"Generowanie...":`Generuj QR (${E.value.length})`),1)],10,Hv),e("button",{onClick:Le,disabled:h.value.length===0||m.value,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",h.value.length===0||m.value?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":"bg-green-600 text-white hover:bg-green-700 border-transparent"])},[q(V(Pt),{class:"h-4 w-4"}),e("span",null,t(m.value?"Przygotowywanie...":`Drukuj QR (${h.value.length})`),1)],10,Jv),e("button",{onClick:bt,disabled:h.value.length===0,class:U(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",h.value.length===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":"bg-blue-600 text-white hover:bg-blue-700 border-transparent"])},[p[20]||(p[20]=e("span",null,"👁️",-1)),e("span",null,"Podgląd QR ("+t(h.value.length)+")",1)],10,Yv)])])])]),e("div",Xv,[(s(!0),r(J,null,ee(M.value,D=>(s(),ge(Ga,{key:D.nr_startowy,zawodnik:D,isAdmin:o.value,onEdit:ue},null,8,["zawodnik","isAdmin"]))),128))]),e("div",ex,[e("table",tx,[e("thead",ax,[e("tr",null,[e("th",sx,[e("input",{type:"checkbox",checked:x.value,onChange:he,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,rx)]),p[23]||(p[23]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Nr startowy ",-1)),p[24]||(p[24]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Klub ",-1)),p[25]||(p[25]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zawodnik ",-1)),p[26]||(p[26]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria ",-1)),p[27]||(p[27]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status ",-1)),p[28]||(p[28]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Czas ",-1)),o.value?(s(),r("th",ox," Akcje ")):N("",!0)])]),e("tbody",nx,[(s(!0),r(J,null,ee(M.value,D=>(s(),r("tr",{key:D.nr_startowy},[e("td",lx,[e("input",{type:"checkbox",checked:f.value.includes(D.nr_startowy),onChange:Ce=>Se(D.nr_startowy),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,ix)]),e("td",dx,t(D.nr_startowy),1),e("td",ux,t(D.klub),1),e("td",cx,[e("div",gx,t(D.imie)+" "+t(D.nazwisko),1)]),e("td",px,t(D.kategoria),1),e("td",yx,[q(Gt,{status:D.status,checked_in:D.checked_in},null,8,["status","checked_in"])]),e("td",vx,t(D.czas_przejazdu_s?H(D.czas_przejazdu_s):"-"),1),o.value?(s(),r("td",xx,[e("div",mx,[e("button",{onClick:Ce=>ue(D),class:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors duration-200"},[q(V(Qt),{class:"h-3 w-3 mr-1"}),p[29]||(p[29]=oe(" Edytuj "))],8,bx)])])):N("",!0)]))),128))])])]),A.value>1?(s(),r("div",kx,[e("div",hx,[e("button",{onClick:Re,disabled:j.value<=1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Poprzednie 50 ",8,fx),e("button",{onClick:et,disabled:j.value>=A.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Następne 50 ",8,wx)]),e("div",_x,[e("div",null,[e("p",$x,[p[30]||(p[30]=oe(" Pokazano ")),e("span",zx,t((j.value-1)*We+1),1),p[31]||(p[31]=oe(" do ")),e("span",Sx,t(Math.min(j.value*We,G.value)),1),p[32]||(p[32]=oe(" z ")),e("span",Cx,t(G.value),1),p[33]||(p[33]=oe(" wyników "))])]),e("div",null,[e("nav",jx,[e("button",{onClick:vt,disabled:j.value<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},p[34]||(p[34]=[e("span",{class:"sr-only"},"Pierwsza strona",-1),oe(" « ")]),8,Ix),e("button",{onClick:Re,disabled:j.value<=1,class:"relative inline-flex items-center px-2 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},p[35]||(p[35]=[e("span",{class:"sr-only"},"Poprzednia strona",-1),oe(" ‹ ")]),8,Tx),(s(!0),r(J,null,ee(Math.min(5,A.value),D=>(s(),r(J,{key:D},[D<=A.value?(s(),r("button",{key:0,onClick:Ce=>Xe(D),class:U(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",D===j.value?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"])},t(D),11,Mx)):N("",!0)],64))),128)),A.value>5?(s(),r("span",Rx," ... ")):N("",!0),e("button",{onClick:et,disabled:j.value>=A.value,class:"relative inline-flex items-center px-2 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},p[36]||(p[36]=[e("span",{class:"sr-only"},"Następna strona",-1),oe(" › ")]),8,Px),e("button",{onClick:fe,disabled:j.value>=A.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},p[37]||(p[37]=[e("span",{class:"sr-only"},"Ostatnia strona",-1),oe(" » ")]),8,Ox)])])])])):N("",!0)])])):N("",!0),I.value==="drabinka"?(s(),r("div",Dx,[q(Fs)])):N("",!0),I.value==="rankingi"?(s(),r("div",Ex,[q(vl)])):N("",!0),I.value==="unified-start"?(s(),r("div",Ax,[q(lv)])):N("",!0),I.value==="qr-dashboard"?(s(),r("div",Nx,[q(Au)])):N("",!0),I.value==="pwa-scanner"?(s(),r("div",Fx,[q(Pd)])):N("",!0)]),q(tr,{show:w.value,zawodnik:T.value,onClose:re,onUpdated:ae,onDeleted:ce},null,8,["show","zawodnik"]),g.value?(s(),r("div",Bx,[e("div",qx,[e("div",Lx,[p[38]||(p[38]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Podgląd QR kodów do druku",-1)),e("button",{onClick:Qe,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[q(V(gt),{class:"h-6 w-6"})])]),e("div",Qx,[e("button",{onClick:kt,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2"},[q(V(Pt),{class:"h-5 w-5"}),p[39]||(p[39]=e("span",null,"Drukuj teraz",-1))]),e("button",{onClick:Qe,class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500"}," Anuluj ")]),e("div",Wx,[e("div",Vx,[(s(!0),r(J,null,ee(k.value,D=>(s(),r("div",{key:D.nr_startowy,class:"sticker"},[e("div",Zx,[e("div",Ux,t(D.nr_startowy),1),e("div",Gx,t(D.imie)+" "+t(D.nazwisko),1)]),e("div",Kx,[e("img",{src:D.qr_image,alt:`QR ${D.nr_startowy}`,class:"qr-code"},null,8,Hx)]),e("div",Jx,[e("div",Yx,t(D.kategoria),1),e("div",Xx,t(D.klub||""),1)])]))),128))])])])])):N("",!0)]))}}),tm=Te(em,[["__scopeId","data-v-0591b711"]]),am=xl();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(c=>{console.log("🏁 SKATECROSS PWA: Service Worker registered",c.scope)}).catch(c=>{console.log("❌ SKATECROSS PWA: Service Worker registration failed",c)})});const ea=pa(tm);ea.use(am);ea.mount("#app");
