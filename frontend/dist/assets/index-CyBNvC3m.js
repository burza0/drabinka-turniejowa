const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-aA-kYyDG.js","assets/qrcode-BS2YopO_.js"])))=>i.map(i=>d[i]);
import{d as e,b as a,c as t,o as r,a as l,e as s,n as o,r as n,t as i,f as d,g as u,u as c,h as g,i as p,j as y,w as x,v,F as k,k as b,l as m,m as w,p as f,q as h,s as z,x as _,y as j,z as S,A as C}from"./vue-vendor-szcosyoL.js";import{a as A}from"./axios-vendor-rSMZb3Ae.js";import{r as I,a as O,b as Z,c as q,d as D,e as K,f as N,g as P,h as U,i as R,j as F,k as E,l as Q,m as $,n as W,o as T,p as M,q as B,s as V,t as G,u as L,v as J,w as H,x as Y,y as X,z as ee,A as ae}from"./heroicons-BK3P3fZ4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const te={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors duration-200"},re={class:"p-3 sm:p-5"},le={class:"flex items-center"},se={class:"flex-shrink-0"},oe={class:"ml-3 sm:ml-5 w-0 flex-1"},ne={class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},ie={class:"text-base sm:text-lg font-medium text-gray-900 dark:text-white"},de={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},ue=e({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{},subtitle:{}},setup(e){const u=e,c=a((()=>({blue:"text-blue-400",green:"text-green-400",red:"text-red-400",purple:"text-purple-400",yellow:"text-yellow-400"}[u.color])));return(e,a)=>(r(),t("div",te,[l("div",re,[l("div",le,[l("div",se,["string"!=typeof e.icon?(r(),s(n(e.icon),{key:0,class:o([c.value,"h-5 w-5 sm:h-6 sm:w-6"])},null,8,["class"])):(r(),t("span",{key:1,class:o([c.value,"text-lg sm:text-xl"])},i(e.icon),3))]),l("div",oe,[l("dl",null,[l("dt",ne,i(e.title),1),l("dd",ie,i(e.value),1),e.subtitle?(r(),t("dd",de,i(e.subtitle),1)):d("",!0)])])])])]))}}),ce=e({__name:"StatusBadge",props:{status:{}},setup(e){const l=e,s=a((()=>{switch(l.status){case"FINISHED":return"bg-green-100 text-green-800";case"DNF":return"bg-yellow-100 text-yellow-800";case"DSQ":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}));return(e,a)=>(r(),t("span",{class:o([s.value,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},i(e.status),3))}}),ge={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-3 border border-gray-200 dark:border-gray-700 transition-colors duration-200"},pe={class:"flex items-center space-x-3 mb-2"},ye={class:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-base font-bold flex-shrink-0"},xe={class:"font-bold text-gray-900 dark:text-white leading-tight text-lg"},ve={class:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 mb-3 text-sm"},ke={class:"flex items-center space-x-1 min-w-0"},be={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},me={class:"flex items-center space-x-1 min-w-0 xs:flex-shrink-0"},we={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},fe={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3"},he={class:"flex items-center space-x-2"},ze={class:"text-2xl font-bold text-gray-900 dark:text-white"},_e={key:0,class:"flex space-x-2"},je=e({__name:"ZawodnikCard",props:{zawodnik:{},isAdmin:{type:Boolean}},emits:["edit"],setup:e=>(e,a)=>{return r(),t("div",ge,[l("div",pe,[l("span",ye,i(e.zawodnik.nr_startowy),1),l("h3",xe,i(e.zawodnik.imie)+" "+i(e.zawodnik.nazwisko),1)]),l("div",ve,[l("div",ke,[u(c(I),{class:"h-4 w-4 text-blue-500 dark:text-blue-400 flex-shrink-0"}),l("span",be,i(e.zawodnik.klub),1)]),l("div",me,[u(c(O),{class:"h-4 w-4 text-green-500 dark:text-green-400 flex-shrink-0"}),l("span",we,i(e.zawodnik.kategoria),1)])]),l("div",fe,[l("div",he,[u(c(Z),{class:"h-5 w-5 text-purple-500 dark:text-purple-400"}),l("span",ze,i(e.zawodnik.czas_przejazdu_s?(s=e.zawodnik.czas_przejazdu_s,`${Math.floor(s/60)}:${(s%60).toFixed(2).padStart(5,"0")}`):"-"),1)]),u(ce,{status:e.zawodnik.status},null,8,["status"])]),e.isAdmin?(r(),t("div",_e,[l("button",{onClick:a[0]||(a[0]=a=>e.$emit("edit",e.zawodnik)),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 transition-colors duration-200"},[u(c(q),{class:"h-3 w-3 mr-1"}),a[1]||(a[1]=g(" Edytuj "))])])):d("",!0)]);var s}}),Se={class:"space-y-6"},Ce={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Ae={class:"flex items-center space-x-3"},Ie={key:0,class:"flex justify-center items-center h-64"},Oe={key:1,class:"bg-red-50 border border-red-200 rounded-md p-4"},Ze={class:"flex"},qe={class:"ml-3"},De={class:"mt-2 text-sm text-red-700"},Ke={key:2},Ne={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6"},Pe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200 mb-6"},Ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Re=["value"],Fe={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Ee={class:"flex flex-wrap gap-3"},Qe={class:"mt-4 flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4"},$e={class:"space-y-8"},We={class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},Te={class:"space-y-8"},Me={class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4"},Be={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4"},Ve={class:"grid grid-cols-2 gap-4 text-sm"},Ge={class:"ml-1 text-gray-900 dark:text-white"},Le={class:"ml-1 text-gray-900 dark:text-white"},Je={key:1,class:"mb-6"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ye={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},Xe={class:"space-y-1"},ea={class:"text-xs"},aa={key:2,class:"mb-6"},ta={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ra={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},la={class:"space-y-1"},sa={class:"text-xs"},oa={key:3,class:"mb-6"},na={class:"border-2 border-yellow-300 dark:border-yellow-600 rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/20"},ia={class:"space-y-2"},da={key:0},ua={key:1},ca={key:2},ga={key:3},pa={class:"text-xs"},ya={key:4,class:"text-center py-8 text-gray-500 dark:text-gray-400"},xa=e({__name:"DrabinkaPucharowa",setup(e){const s=p(null),n=p(!0),w=p(null),f=p({kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"}),h=p([]),z=p([]),_=a((()=>{if(!s.value)return{};const{podsumowanie:e,...a}=s.value;return a})),j=a((()=>Object.keys(_.value).sort())),S=a((()=>{var e;if(!s.value)return{};const{podsumowanie:a,...t}=s.value;let r={};if(f.value.kategoria)t[f.value.kategoria]&&(r[f.value.kategoria]=t[f.value.kategoria]);else for(const[s,n]of Object.entries(t))(0===h.value.length||h.value.includes(s))&&(r[s]=n);if(f.value.plec||z.value.length>0){const e=f.value.plec||(1===z.value.length?z.value[0]:"");if(e){const a={};for(const[t,l]of Object.entries(r)){const r={};for(const[a,t]of Object.entries(l))a===e&&(r[a]=t);Object.keys(r).length>0&&(a[t]=r)}r=a}}if(f.value.faza){const a=f.value.faza,t={};for(const[l,s]of Object.entries(r)){const r={};for(const[t,l]of Object.entries(s)){const s={...l};"ćwierćfinały"===a?(delete s.półfinały,delete s.finał):"półfinały"===a?(delete s.ćwierćfinały,delete s.finał):"finał"===a&&(delete s.ćwierćfinały,delete s.półfinały);(null==(e=s[a])?void 0:e.length)>0&&(r[t]=s)}Object.keys(r).length>0&&(t[l]=r)}r=t}const l=Object.keys(r).sort(((e,a)=>{switch(f.value.sortowanie){case"kategoria_desc":return a.localeCompare(e);case"zawodnikow_desc":return Z(r[a])-Z(r[e]);case"zawodnikow_asc":return Z(r[e])-Z(r[a]);default:return e.localeCompare(a)}})),o={};return l.forEach((e=>{o[e]=r[e]})),o})),C=a((()=>h.value.length===j.value.length)),I=a((()=>2===z.value.length||""===f.value.plec)),O=a((()=>{let e=0;for(const a of Object.values(S.value))e+=Z(a);return e})),Z=e=>{var a,t;let r=0;for(const l of Object.values(e))if("object"==typeof l&&null!==l){const e=["ćwierćfinały","półfinały","finał"];for(const s of e)if((null==(a=l[s])?void 0:a.length)>0)for(const e of l[s])r+=(null==(t=e.zawodnicy)?void 0:t.length)||0}return r},q=e=>{if(!e)return"-";return`${Math.floor(e/60)}:${(e%60).toFixed(2).padStart(5,"0")}`},U=()=>{f.value={kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"},h.value=[],z.value=[]},R=()=>{C.value?(h.value=[],f.value.kategoria=""):(h.value=[...j.value],f.value.kategoria="")},F=()=>{I.value?(z.value=["Mężczyźni"],f.value.plec="Mężczyźni"):(z.value=["Mężczyźni","Kobiety"],f.value.plec="")},E=()=>{"finał"===f.value.faza?f.value.faza="":f.value.faza="finał"};return y((()=>{(async()=>{try{n.value=!0,w.value=null;const e=await A.get("/api/drabinka");s.value=e.data}catch(e){w.value="Nie udało się załadować drabinki turniejowej"}finally{n.value=!1}})()})),(e,a)=>{var p,y,h,A,Z,Q;return r(),t("div",Se,[l("div",Ce,[l("div",Ae,[u(c(D),{class:"h-8 w-8 text-yellow-600"}),a[4]||(a[4]=l("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Drabinka Pucharowa SKATECROSS",-1))]),a[5]||(a[5]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," System turniejowy z grupami 4-osobowymi - do ćwierćfinałów awansuje maksymalnie 16 najlepszych zawodników ",-1))]),n.value?(r(),t("div",Ie,a[6]||(a[6]=[l("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-500"},null,-1)]))):w.value?(r(),t("div",Oe,[l("div",Ze,[u(c(K),{class:"h-5 w-5 text-red-400"}),l("div",qe,[a[7]||(a[7]=l("h3",{class:"text-sm font-medium text-red-800"},"Błąd ładowania drabinki",-1)),l("p",De,i(w.value),1)])])])):(r(),t("div",Ke,[l("div",Ne,[u(ue,{title:"Zawodnicy w turnieju",value:(null==(p=s.value.podsumowanie)?void 0:p.łączna_liczba_zawodników)||0,icon:c(N),color:"blue"},null,8,["value","icon"]),u(ue,{title:"W ćwierćfinałach",value:(null==(y=s.value.podsumowanie)?void 0:y.w_ćwierćfinałach)||0,icon:c(D),color:"green"},null,8,["value","icon"]),u(ue,{title:"Mężczyźni",value:(null==(A=null==(h=s.value.podsumowanie)?void 0:h.podział_płeć)?void 0:A.mężczyźni)||0,icon:c(P),color:"purple"},null,8,["value","icon"]),u(ue,{title:"Kobiety",value:(null==(Q=null==(Z=s.value.podsumowanie)?void 0:Z.podział_płeć)?void 0:Q.kobiety)||0,icon:c(P),color:"red"},null,8,["value","icon"])]),l("div",Pe,[l("div",{class:"flex items-center justify-between mb-6"},[a[9]||(a[9]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:U,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[8]||(a[8]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",Ue,[l("div",null,[a[11]||(a[11]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Kategoria")])],-1)),x(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.kategoria=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[10]||(a[10]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(j.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,Re)))),128))],512),[[v,f.value.kategoria]])]),l("div",null,[a[13]||(a[13]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"👥"),l("span",null,"Płeć")])],-1)),x(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>f.value.plec=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[12]||(a[12]=[l("option",{value:""},"Wszystkie",-1),l("option",{value:"Mężczyźni"},"Mężczyźni",-1),l("option",{value:"Kobiety"},"Kobiety",-1)]),512),[[v,f.value.plec]])]),l("div",null,[a[15]||(a[15]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🎯"),l("span",null,"Faza turnieju")])],-1)),x(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>f.value.faza=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[14]||(a[14]=[l("option",{value:""},"Wszystkie fazy",-1),l("option",{value:"ćwierćfinały"},"Ćwierćfinały",-1),l("option",{value:"półfinały"},"Półfinały",-1),l("option",{value:"finał"},"Finał",-1)]),512),[[v,f.value.faza]])]),l("div",null,[a[17]||(a[17]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>f.value.sortowanie=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[16]||(a[16]=[l("option",{value:"kategoria_asc"},"Kategoria (A-Z)",-1),l("option",{value:"kategoria_desc"},"Kategoria (Z-A)",-1),l("option",{value:"zawodnikow_desc"},"Liczba zawodników (malejąco)",-1),l("option",{value:"zawodnikow_asc"},"Liczba zawodników (rosnąco)",-1)]),512),[[v,f.value.sortowanie]])])]),l("div",Fe,[a[20]||(a[20]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"⚡"),l("span",null,"Operacje grupowe")])],-1)),l("div",Ee,[l("button",{onClick:R,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",C.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[l("span",null,i(C.value?"✅":"☐"),1),l("span",null,i(C.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" kategorie ("+i(j.value.length)+")",1)],2),l("button",{onClick:F,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",I.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent"])},[l("span",null,i(I.value?"✅":"☐"),1),l("span",null,i(I.value?"Tylko jedna płeć":"Obie płcie"),1)],2),l("button",{onClick:E,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2","finał"===f.value.faza?"bg-yellow-700 text-white shadow-inner border-yellow-800":"bg-yellow-600 text-white hover:bg-yellow-700 border-transparent"])},[a[18]||(a[18]=l("span",null,"🏆",-1)),l("span",null,i("finał"===f.value.faza?"Pokaż wszystkie":"Tylko finały"),1)],2),l("button",{onClick:U,class:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent bg-gray-600 text-white hover:bg-gray-700"},a[19]||(a[19]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))])]),l("div",Qe,[l("div",null," Wyświetlane kategorie: "+i(Object.keys(S.value).length)+" z "+i(Object.keys(_.value).length),1),l("div",null," Łączna liczba zawodników: "+i(O.value),1)])]),l("div",$e,[(r(!0),t(k,null,b(S.value,((e,s)=>(r(),t("div",{key:s,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},[l("h3",We,"🏆 "+i(s),1),l("div",Te,[(r(!0),t(k,null,b(e,((e,s)=>{var n,p,y,v,w,h;return x((r(),t("div",{key:s,class:"border-l-4 border-indigo-500 pl-4"},[l("h4",Me,i("Mężczyźni"===String(s)?"👨 Mężczyźni":"👩 Kobiety"),1),e.statystyki?(r(),t("div",Be,[l("div",Ve,[l("div",null,[a[21]||(a[21]=l("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Łącznie:",-1)),l("span",Ge,i(e.statystyki.łącznie_zawodników),1)]),l("div",null,[a[22]||(a[22]=l("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"W ćwierćfinałach:",-1)),l("span",Le,i(e.statystyki.w_ćwierćfinałach),1)])])])):d("",!0),(null==(n=e.ćwierćfinały)?void 0:n.length)>0&&(!f.value.faza||"ćwierćfinały"===f.value.faza)?(r(),t("div",Je,[a[23]||(a[23]=l("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥇 Ćwierćfinały",-1)),l("div",He,[(r(!0),t(k,null,b(e.ćwierćfinały,(e=>(r(),t("div",{key:e.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[l("div",Ye,"Grupa "+i(e.grupa)+" (awansuje "+i(e.awansują)+")",1),l("div",Xe,[(r(!0),t(k,null,b(e.zawodnicy,((a,s)=>(r(),t("div",{key:a.nr_startowy,class:o(["text-sm p-2 rounded",s<e.awansują?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[g(i(a.nr_startowy)+". "+i(a.imie)+" "+i(a.nazwisko)+" ",1),l("div",ea,i(q(a.czas_przejazdu_s)),1)],2)))),128))])])))),128))])])):d("",!0),(null==(p=e.półfinały)?void 0:p.length)>0&&(!f.value.faza||"półfinały"===f.value.faza)?(r(),t("div",aa,[a[24]||(a[24]=l("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥈 Półfinały",-1)),l("div",ta,[(r(!0),t(k,null,b(e.półfinały,(e=>(r(),t("div",{key:e.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[l("div",ra,"Grupa "+i(e.grupa)+" (awansuje "+i(e.awansują)+")",1),l("div",la,[(r(!0),t(k,null,b(e.zawodnicy,((a,s)=>(r(),t("div",{key:a.nr_startowy,class:o(["text-sm p-2 rounded",s<e.awansują?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[g(i(a.nr_startowy)+". "+i(a.imie)+" "+i(a.nazwisko)+" ",1),l("div",sa,i(q(a.czas_przejazdu_s)),1)],2)))),128))])])))),128))])])):d("",!0),(null==(y=e.finał)?void 0:y.length)>0&&(!f.value.faza||"finał"===f.value.faza)?(r(),t("div",oa,[a[25]||(a[25]=l("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🏆 Finał",-1)),l("div",na,[(r(!0),t(k,null,b(e.finał,(e=>(r(),t("div",{key:e.grupa},[l("div",ia,[(r(!0),t(k,null,b(e.zawodnicy,((e,a)=>(r(),t("div",{key:e.nr_startowy,class:o(["text-sm p-3 rounded font-medium",0===a?"bg-yellow-200 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-100":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[0===a?(r(),t("span",da,"🥇")):1===a?(r(),t("span",ua,"🥈")):2===a?(r(),t("span",ca,"🥉")):(r(),t("span",ga,i(a+1)+".",1)),g(" "+i(e.nr_startowy)+". "+i(e.imie)+" "+i(e.nazwisko)+" ",1),l("div",pa,i(q(e.czas_przejazdu_s)),1)],2)))),128))])])))),128))])])):d("",!0),(null==(v=e.ćwierćfinały)?void 0:v.length)||(null==(w=e.półfinały)?void 0:w.length)||(null==(h=e.finał)?void 0:h.length)?d("",!0):(r(),t("div",ya,[u(c(D),{class:"h-12 w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),a[26]||(a[26]=l("p",null,"Brak zawodników w tej kategorii",-1))]))])),[[m,0===z.value.length||z.value.includes(String(s))||""===f.value.plec||f.value.plec===String(s)]])})),128))])])))),128))])]))])}}}),va=(e,a)=>{const t=e.__vccOpts||e;for(const[r,l]of a)t[r]=l;return t},ka=va(xa,[["__scopeId","data-v-0c2a0382"]]),ba={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ma={class:"relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-lg bg-white dark:bg-gray-800"},wa={class:"flex justify-between items-center pb-4 border-b dark:border-gray-600"},fa={class:"text-xl font-semibold text-gray-900 dark:text-white"},ha={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},za={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_a=["value"],ja={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Sa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ca={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},Aa={class:"text-sm text-red-700"},Ia={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md"},Oa={class:"text-sm text-green-700"},Za={class:"flex justify-end space-x-3 mt-6 pt-4 border-t dark:border-gray-600"},qa=["disabled"],Da=e({__name:"EditZawodnikModal",props:{show:{type:Boolean},zawodnik:{}},emits:["close","updated","deleted"],setup(e,{emit:a}){const s=e,o=a,n=p({nr_startowy:0,imie:"",nazwisko:"",kategoria:"",plec:"",klub:"",czas_przejazdu:"",status:""}),g=p(null),m=p(!1),_=p(""),j=p(""),S=p([]);y((async()=>{try{const e=await A.get("/api/kluby");e.data&&e.data.nazwy_klubow&&e.data.nazwy_klubow.length>0?S.value=e.data.nazwy_klubow:s.zawodnik&&(S.value=[s.zawodnik.klub].filter(Boolean))}catch(e){s.zawodnik?S.value=[s.zawodnik.klub].filter(Boolean):S.value=[]}})),w((()=>s.zawodnik),(e=>{e&&s.show&&(g.value={...e},n.value={nr_startowy:e.nr_startowy,imie:e.imie,nazwisko:e.nazwisko,kategoria:e.kategoria,plec:e.plec,klub:e.klub||"",czas_przejazdu:C(e.czas_przejazdu_s),status:e.status||"DNF"},_.value="",j.value="")}));const C=e=>{if(!e)return"";const a=Math.floor(e/60),t=(e%60).toFixed(3);return a>0?`${a}:${t.padStart(6,"0")}`:t},I=()=>o("close"),O=async()=>{var e,a;m.value=!0,_.value="",j.value="";try{if(g.value){await A.put(`/api/zawodnicy/${g.value.nr_startowy}`,{imie:n.value.imie,nazwisko:n.value.nazwisko,kategoria:n.value.kategoria,plec:n.value.plec,klub:n.value.klub});await A.put("/api/wyniki",{nr_startowy:n.value.nr_startowy,czas_przejazdu_s:n.value.czas_przejazdu,status:n.value.status}),j.value="Zawodnik został zaktualizowany!"}else{await A.post("/api/zawodnicy",{nr_startowy:n.value.nr_startowy,imie:n.value.imie,nazwisko:n.value.nazwisko,kategoria:n.value.kategoria,plec:n.value.plec,klub:n.value.klub});await A.put("/api/wyniki",{nr_startowy:n.value.nr_startowy,czas_przejazdu_s:n.value.czas_przejazdu,status:n.value.status}),j.value="Zawodnik został dodany!"}setTimeout((()=>{o("updated"),I()}),1e3)}catch(t){_.value=(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.error)||t.message||"Wystąpił błąd podczas zapisywania"}finally{m.value=!1}};return(e,a)=>e.show?(r(),t("div",ba,[l("div",ma,[l("div",wa,[l("h3",fa,i(g.value?`Edycja zawodnika #${g.value.nr_startowy}`:"Dodaj nowego zawodnika"),1),l("button",{onClick:I,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[u(c(U),{class:"h-6 w-6"})])]),l("form",{onSubmit:f(O,["prevent"]),class:"mt-4 text-xl space-y-6"},[l("div",ha,[l("div",null,[a[9]||(a[9]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Imię",-1)),x(l("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.imie=e),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[h,n.value.imie]])]),l("div",null,[a[10]||(a[10]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nazwisko",-1)),x(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.nazwisko=e),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[h,n.value.nazwisko]])])]),l("div",za,[l("div",null,[a[11]||(a[11]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nr startowy",-1)),x(l("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.nr_startowy=e),type:"number",required:"",min:"1",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[h,n.value.nr_startowy,void 0,{number:!0}]])]),l("div",null,[a[14]||(a[14]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Klub",-1)),S.value.length>0?x((r(),t("select",{key:0,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.klub=e),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[a[12]||(a[12]=l("option",{value:"",disabled:""},"Wybierz klub...",-1)),(r(!0),t(k,null,b(S.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,_a)))),128))],512)),[[v,n.value.klub]]):(r(),t(k,{key:1},[x(l("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.klub=e),type:"text",required:"",placeholder:"Wpisz klub",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[h,n.value.klub]]),a[13]||(a[13]=l("p",{class:"text-xs text-red-500 mt-1"},"Brak klubów w bazie! Wpisz ręcznie.",-1))],64))])]),l("div",ja,[l("div",null,[a[16]||(a[16]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Płeć",-1)),x(l("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.plec=e),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},a[15]||(a[15]=[l("option",{value:"M"},"👨 Mężczyzna",-1),l("option",{value:"K"},"👩 Kobieta",-1)]),512),[[v,n.value.plec]])]),l("div",null,[a[18]||(a[18]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Kategoria",-1)),x(l("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.kategoria=e),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},a[17]||(a[17]=[z('<option value="Junior A">🏷️ Junior A</option><option value="Junior B">🏷️ Junior B</option><option value="Junior C">🏷️ Junior C</option><option value="Junior D">🏷️ Junior D</option><option value="Masters">🏷️ Masters</option><option value="Senior">🏷️ Senior</option>',6)]),512),[[v,n.value.kategoria]])])]),l("div",Sa,[l("div",null,[a[19]||(a[19]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Czas przejazdu",-1)),x(l("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.czas_przejazdu=e),type:"text",placeholder:"MM:SS.ms lub SS.ms",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[h,n.value.czas_przejazdu]]),a[20]||(a[20]=l("p",{class:"text-xs text-gray-500 mt-1"},"Format: MM:SS.ms lub SS.ms (np. 1:23.456 lub 45.123)",-1))]),l("div",null,[a[22]||(a[22]=l("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),x(l("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.status=e),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},a[21]||(a[21]=[l("option",{value:"NOT_STARTED"},"⏳ Nie wystartował",-1),l("option",{value:"FINISHED"},"✅ Ukończył",-1),l("option",{value:"DNF"},"❌ Nie ukończył",-1),l("option",{value:"DSQ"},"🚫 Dyskwalifikacja",-1)]),512),[[v,n.value.status]])])]),_.value?(r(),t("div",Ca,[l("p",Aa,i(_.value),1)])):d("",!0),j.value?(r(),t("div",Ia,[l("p",Oa,i(j.value),1)])):d("",!0),l("div",Za,[l("button",{type:"button",onClick:I,class:"px-6 py-2 text-base font-semibold text-indigo-700 bg-indigo-100 rounded-full hover:bg-indigo-200 transition-colors"},"✖ Anuluj"),l("button",{type:"submit",disabled:m.value,class:"px-6 py-2 text-base font-semibold text-white bg-green-400 rounded-full hover:bg-green-500 disabled:opacity-50 transition-colors"},i(m.value?"⏳ Zapisywanie...":"💾 Zapisz"),9,qa)])],32)])])):d("",!0)}}),Ka={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Na={class:"flex items-center space-x-3"},Pa={class:"flex items-center space-x-4"},Ua=["disabled"],Ra={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},Fa={class:"-mb-px flex space-x-8 overflow-x-auto"},Ea=["onClick"],Qa={key:0,class:"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 py-0.5 px-2 rounded-full text-xs"},$a={key:0,class:"flex justify-center py-12"},Wa={class:"text-center"},Ta={key:1},Ma={key:0,class:"space-y-6"},Ba={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Va={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ga=["value"],La=["value"],Ja={class:"flex items-center justify-between"},Ha={class:"text-sm text-gray-600 dark:text-gray-400"},Ya={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Xa={class:"overflow-x-auto"},et={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},at={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},tt={key:0},rt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},lt={key:0},st={key:1},ot={key:2},nt={key:3},it={class:"px-6 py-4 whitespace-nowrap"},dt={class:"text-sm font-medium text-gray-900 dark:text-white"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},gt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600 dark:text-purple-400"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},yt={key:1,class:"space-y-6"},xt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},vt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},kt=["value"],bt=["value"],mt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},wt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ft={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ht={key:0},zt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},_t={key:0},jt={key:1},St={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900 dark:text-white"},At={class:"text-sm text-gray-500 dark:text-gray-400"},It={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},qt={class:"px-6 py-4 whitespace-nowrap text-sm text-red-500 dark:text-red-400"},Dt={key:2,class:"space-y-6"},Kt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Ut={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Rt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ft={key:0},Et={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Qt={key:0},$t={key:1},Wt={key:2},Tt={key:3},Mt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600 dark:text-blue-400"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Lt={key:3,class:"space-y-6"},Jt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Yt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Xt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},er={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ar={key:0},tr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},rr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},lr={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},sr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},or={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},nr={key:4,class:"space-y-6"},ir={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},dr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ur={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},cr={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},gr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},pr={key:0},yr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},xr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},vr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-600"},kr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-400"},br={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-700"},mr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-purple-600"},wr={key:2,class:"text-center py-12"},fr=e({__name:"Rankingi",setup(e){const m=p(!1),f=p("2025"),_=p("general"),j=p(0),S=p([]),C=p([]),A=p([]),O=p([]),Z=p([]),q=p(""),K=p(""),P=p(""),U=p("pozycja_asc"),E=p(""),Q=p(""),$=p(""),W=p("punkty_desc"),T=p(null),M=p("punkty_desc"),B=p(null),V=p("punkty_desc"),G=p(null),L=p("zlote_desc"),J=[{id:"general",name:"Generalna",icon:D},{id:"individual",name:"Indywidualna",icon:N},{id:"clubs-total",name:"Klubowa - Suma",icon:I},{id:"clubs-top3",name:"Klubowa - TOP3",icon:I},{id:"medals",name:"Medale",icon:D}],H=p(["Junior D","Junior C","Junior B","Junior A","Senior","Master"]),Y=a((()=>[...new Set(S.value.map((e=>e.klub)).filter(Boolean))].sort()));a((()=>[...new Set(S.value.map((e=>e.plec)).filter(Boolean))].sort()));const X=a((()=>{let e=S.value;return q.value&&(e=e.filter((e=>e.kategoria===q.value))),K.value&&(e=e.filter((e=>e.klub===K.value))),P.value&&(e=e.filter((e=>e.plec===P.value))),"pozycja_asc"===U.value?e.sort(((e,a)=>parseFloat(a.punkty)-parseFloat(e.punkty))):"pozycja_desc"===U.value?e.sort(((e,a)=>parseFloat(e.punkty)-parseFloat(a.punkty))):"punkty_desc"===U.value?e.sort(((e,a)=>parseFloat(a.punkty)-parseFloat(e.punkty))):"punkty_asc"===U.value?e.sort(((e,a)=>parseFloat(e.punkty)-parseFloat(a.punkty))):"nazwisko_asc"===U.value?e.sort(((e,a)=>e.nazwisko.localeCompare(a.nazwisko))):"nazwisko_desc"===U.value?e.sort(((e,a)=>a.nazwisko.localeCompare(e.nazwisko))):"klub_asc"===U.value?e.sort(((e,a)=>(e.klub||"").localeCompare(a.klub||""))):"kategoria_asc"===U.value?e.sort(((e,a)=>e.kategoria.localeCompare(a.kategoria))):"starty_desc"===U.value&&e.sort(((e,a)=>parseInt(a.liczba_zawodow)-parseInt(e.liczba_zawodow))),e})),ee=a((()=>{let e=C.value;return E.value&&(e=e.filter((e=>e.kategoria===E.value))),Q.value&&(e=e.filter((e=>e.klub===Q.value))),$.value&&(e=e.filter((e=>e.plec===$.value))),"punkty_desc"===W.value?e.sort(((e,a)=>parseFloat(a.punkty_koncowe)-parseFloat(e.punkty_koncowe))):"punkty_asc"===W.value?e.sort(((e,a)=>parseFloat(e.punkty_koncowe)-parseFloat(a.punkty_koncowe))):"nazwisko_asc"===W.value?e.sort(((e,a)=>e.nazwisko.localeCompare(a.nazwisko))):"nazwisko_desc"===W.value?e.sort(((e,a)=>a.nazwisko.localeCompare(e.nazwisko))):"kategoria_asc"===W.value?e.sort(((e,a)=>e.kategoria.localeCompare(a.kategoria))):"starty_desc"===W.value?e.sort(((e,a)=>parseInt(a.uczestnictwa)-parseInt(e.uczestnictwa))):"odrzucone_desc"===W.value&&e.sort(((e,a)=>parseInt(a.odrzucone||0)-parseInt(e.odrzucone||0))),e})),ae=a((()=>{let e=A.value;return T.value&&(e=e.filter((e=>parseInt(e.liczba_zawodnikow)>=parseInt(T.value)))),"punkty_desc"===M.value?e.sort(((e,a)=>parseFloat(a.laczne_punkty)-parseFloat(e.laczne_punkty))):"punkty_asc"===M.value?e.sort(((e,a)=>parseFloat(e.laczne_punkty)-parseFloat(a.laczne_punkty))):"srednia_desc"===M.value?e.sort(((e,a)=>parseFloat(a.srednia)-parseFloat(e.srednia))):"srednia_asc"===M.value?e.sort(((e,a)=>parseFloat(e.srednia)-parseFloat(a.srednia))):"zawodnicy_desc"===M.value?e.sort(((e,a)=>parseInt(a.liczba_zawodnikow)-parseInt(e.liczba_zawodnikow))):"zawodnicy_asc"===M.value?e.sort(((e,a)=>parseInt(e.liczba_zawodnikow)-parseInt(a.liczba_zawodnikow))):"nazwa_asc"===M.value?e.sort(((e,a)=>e.klub.localeCompare(a.klub))):"nazwa_desc"===M.value&&e.sort(((e,a)=>a.klub.localeCompare(e.klub))),e})),te=a((()=>{let e=O.value;return B.value&&(e=e.filter((e=>parseInt(e.aktywne_kategorie)>=parseInt(B.value)))),"punkty_desc"===V.value?e.sort(((e,a)=>parseFloat(a.punkty_top3)-parseFloat(e.punkty_top3))):"punkty_asc"===V.value?e.sort(((e,a)=>parseFloat(e.punkty_top3)-parseFloat(a.punkty_top3))):"kategorie_desc"===V.value?e.sort(((e,a)=>parseInt(a.aktywne_kategorie)-parseInt(e.aktywne_kategorie))):"kategorie_asc"===V.value?e.sort(((e,a)=>parseInt(e.aktywne_kategorie)-parseInt(a.aktywne_kategorie))):"balance_desc"===V.value?e.sort(((e,a)=>parseFloat(a.balance)-parseFloat(e.balance))):"balance_asc"===V.value?e.sort(((e,a)=>parseFloat(e.balance)-parseFloat(a.balance))):"nazwa_asc"===V.value?e.sort(((e,a)=>e.klub.localeCompare(a.klub))):"nazwa_desc"===V.value&&e.sort(((e,a)=>a.klub.localeCompare(e.klub))),e})),re=a((()=>{let e=Z.value;return G.value&&(e=e.filter((e=>parseInt(e.zlote)>=parseInt(G.value)))),"zlote_desc"===L.value?e.sort(((e,a)=>parseInt(a.zlote)-parseInt(e.zlote)||parseInt(a.srebrne)-parseInt(e.srebrne)||parseInt(a.brazowe)-parseInt(e.brazowe))):"zlote_asc"===L.value?e.sort(((e,a)=>parseInt(e.zlote)-parseInt(a.zlote))):"srebrne_desc"===L.value?e.sort(((e,a)=>parseInt(a.srebrne)-parseInt(e.srebrne))):"srebrne_asc"===L.value?e.sort(((e,a)=>parseInt(e.srebrne)-parseInt(a.srebrne))):"brazowe_desc"===L.value?e.sort(((e,a)=>parseInt(a.brazowe)-parseInt(e.brazowe))):"brazowe_asc"===L.value?e.sort(((e,a)=>parseInt(e.brazowe)-parseInt(a.brazowe))):"lacznie_desc"===L.value?e.sort(((e,a)=>parseInt(a.lacznie)-parseInt(e.lacznie))):"lacznie_asc"===L.value?e.sort(((e,a)=>parseInt(e.lacznie)-parseInt(a.lacznie))):"nazwa_asc"===L.value?e.sort(((e,a)=>e.klub.localeCompare(a.klub))):"nazwa_desc"===L.value&&e.sort(((e,a)=>a.klub.localeCompare(e.klub))),e})),le=a((()=>0===S.value.length&&0===C.value.length&&0===A.value.length&&0===Z.value.length)),se=async()=>{if(!m.value){m.value=!0;try{await Promise.all([ne(),ie(),de(),ue()]),j.value=Date.now()}catch(e){}finally{m.value=!1}}},oe=()=>{G.value=null,L.value="zlote_desc"};w(_,(e=>{Date.now()-j.value>3e4&&se()})),w(f,(()=>{se()})),y((()=>{se()}));const ne=async()=>{try{const e=await fetch(`/api/rankings/individual?season=${f.value}&_t=${Date.now()}`);if(e.ok){const a=await e.json();S.value=a}}catch(e){}},ie=async()=>{try{const e=await fetch(`/api/rankings/general?season=${f.value}&_t=${Date.now()}`);if(e.ok){const a=await e.json();C.value=a}}catch(e){}},de=async()=>{try{const[e,a]=await Promise.all([fetch(`/api/rankings/clubs/total?season=${f.value}&_t=${Date.now()}`),fetch(`/api/rankings/clubs/top3?season=${f.value}&_t=${Date.now()}`)]);if(e.ok){const a=await e.json();A.value=a}if(a.ok){const e=await a.json();O.value=e}}catch(e){}},ue=async()=>{try{const e=await fetch(`/api/rankings/medals?season=${f.value}&_t=${Date.now()}`);if(e.ok){const a=await e.json();Z.value=a}}catch(e){}},ce=()=>{q.value="",K.value="",P.value="",U.value="pozycja_asc"},ge=()=>{E.value="",Q.value="",$.value="",W.value="punkty_desc"},pe=()=>{T.value=null,M.value="punkty_desc"},ye=()=>{B.value=null,V.value="punkty_desc"};return(e,a)=>(r(),t("div",null,[l("div",Ka,[l("div",Na,[u(c(R),{class:"h-8 w-8 text-purple-600 dark:text-purple-400"}),a[15]||(a[15]=l("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Rankingi SKATECROSS",-1))]),l("div",Pa,[x(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),class:"rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},a[16]||(a[16]=[l("option",{value:"2025"},"Sezon 2025",-1),l("option",{value:"2024"},"Sezon 2024",-1)]),512),[[v,f.value]]),l("button",{onClick:se,disabled:m.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50"},[u(c(F),{class:o(["h-4 w-4 mr-2",m.value?"animate-spin":""])},null,8,["class"]),a[17]||(a[17]=g(" Odśwież "))],8,Ua)])]),l("div",Ra,[l("nav",Fa,[(r(),t(k,null,b(J,(e=>l("button",{key:e.id,onClick:a=>_.value=e.id,class:o(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2",_.value===e.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(r(),s(n(e.icon),{class:"h-5 w-5"})),l("span",null,i(e.name),1),e.count?(r(),t("span",Qa,i(e.count),1)):d("",!0)],10,Ea))),64))])]),m.value?(r(),t("div",$a,[l("div",Wa,[u(c(F),{class:"h-8 w-8 text-purple-500 animate-spin mx-auto mb-4"}),a[18]||(a[18]=l("p",{class:"text-gray-600 dark:text-gray-400"},"Ładowanie rankingów...",-1))])])):(r(),t("div",Ta,["individual"===_.value?(r(),t("div",Ma,[l("div",Ba,[l("div",{class:"flex items-center justify-between mb-6"},[a[20]||(a[20]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:ce,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[19]||(a[19]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",Va,[l("div",null,[a[22]||(a[22]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Kategoria")])],-1)),x(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>q.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[21]||(a[21]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(H.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,Ga)))),128))],512),[[v,q.value]])]),l("div",null,[a[24]||(a[24]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏢"),l("span",null,"Klub")])],-1)),x(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>K.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[23]||(a[23]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(Y.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,La)))),128))],512),[[v,K.value]])]),l("div",null,[a[26]||(a[26]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"👥"),l("span",null,"Płeć")])],-1)),x(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>P.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[25]||(a[25]=[l("option",{value:""},"Wszystkie",-1),l("option",{value:"M"},"Mężczyźni",-1),l("option",{value:"K"},"Kobiety",-1)]),512),[[v,P.value]])]),l("div",null,[a[28]||(a[28]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>U.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[27]||(a[27]=[z('<option value="pozycja_asc" data-v-9c0d80a1>Pozycja (najlepsi)</option><option value="pozycja_desc" data-v-9c0d80a1>Pozycja (najgorsi)</option><option value="punkty_desc" data-v-9c0d80a1>Punkty (malejąco)</option><option value="punkty_asc" data-v-9c0d80a1>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-9c0d80a1>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-9c0d80a1>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-9c0d80a1>Kategoria (A-Z)</option><option value="starty_desc" data-v-9c0d80a1>Starty (malejąco)</option>',8)]),512),[[v,U.value]])])])]),l("div",Ja,[a[29]||(a[29]=l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Indywidualna",-1)),l("div",Ha," Suma wszystkich punktów ("+i(X.value.length)+" pozycji) ",1)]),l("div",Ya,[l("div",Xa,[l("table",et,[a[31]||(a[31]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty")])],-1)),l("tbody",at,[0===X.value.length?(r(),t("tr",tt,a[30]||(a[30]=[l("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak zawodników spełniających wybrane kryteria ",-1)]))):d("",!0),(r(!0),t(k,null,b(X.value,((e,a)=>(r(),t("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",rt,[0===a?(r(),t("span",lt,"🥇")):1===a?(r(),t("span",st,"🥈")):2===a?(r(),t("span",ot,"🥉")):(r(),t("span",nt,i(a+1),1))]),l("td",it,[l("div",dt,i(e.imie)+" "+i(e.nazwisko),1)]),l("td",ut,i(e.klub),1),l("td",ct,i(e.kategoria),1),l("td",gt,i(e.punkty)+" pkt",1),l("td",pt,i(e.liczba_zawodow),1)])))),128))])])])])])):d("",!0),"general"===_.value?(r(),t("div",yt,[l("div",xt,[l("div",{class:"flex items-center justify-between mb-6"},[a[33]||(a[33]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:ge,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[32]||(a[32]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",vt,[l("div",null,[a[35]||(a[35]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Kategoria")])],-1)),x(l("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>E.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[34]||(a[34]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(H.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,kt)))),128))],512),[[v,E.value]])]),l("div",null,[a[37]||(a[37]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏢"),l("span",null,"Klub")])],-1)),x(l("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>Q.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[36]||(a[36]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(Y.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,bt)))),128))],512),[[v,Q.value]])]),l("div",null,[a[39]||(a[39]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"👥"),l("span",null,"Płeć")])],-1)),x(l("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>$.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[38]||(a[38]=[l("option",{value:""},"Wszystkie",-1),l("option",{value:"M"},"Mężczyźni",-1),l("option",{value:"K"},"Kobiety",-1)]),512),[[v,$.value]])]),l("div",null,[a[41]||(a[41]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>W.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[40]||(a[40]=[z('<option value="punkty_desc" data-v-9c0d80a1>Punkty (malejąco)</option><option value="punkty_asc" data-v-9c0d80a1>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-9c0d80a1>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-9c0d80a1>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-9c0d80a1>Kategoria (A-Z)</option><option value="starty_desc" data-v-9c0d80a1>Starty (malejąco)</option><option value="odrzucone_desc" data-v-9c0d80a1>Odrzucone (malejąco)</option>',7)]),512),[[v,W.value]])])])]),a[44]||(a[44]=l("div",{class:"flex items-center justify-between"},[l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Generalna (n-2)"),l("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[l("span",{class:"font-medium"},"Zasada n-2:"),g(" Najlepsze wyniki minus 2 najsłabsze ")])],-1)),l("div",mt,[l("table",wt,[a[43]||(a[43]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty końcowe"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Odrzucone")])],-1)),l("tbody",ft,[0===ee.value.length?(r(),t("tr",ht,a[42]||(a[42]=[l("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak zawodników spełniających wybrane kryteria ",-1)]))):d("",!0),(r(!0),t(k,null,b(ee.value,((e,a)=>(r(),t("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",zt,[0===a?(r(),t("span",_t,"🏆")):(r(),t("span",jt,i(a+1),1))]),l("td",St,[l("div",Ct,i(e.imie)+" "+i(e.nazwisko),1),l("div",At,i(e.klub),1)]),l("td",It,i(e.kategoria),1),l("td",Ot,i(e.punkty_koncowe)+" pkt",1),l("td",Zt,i(e.uczestnictwa),1),l("td",qt,i(e.odrzucone||0),1)])))),128))])])])])):d("",!0),"clubs-total"===_.value?(r(),t("div",Dt,[l("div",Kt,[l("div",{class:"flex items-center justify-between mb-6"},[a[46]||(a[46]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:pe,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[45]||(a[45]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",Nt,[l("div",null,[a[47]||(a[47]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"👥"),l("span",null,"Min. zawodników")])],-1)),x(l("input",{"onUpdate:modelValue":a[9]||(a[9]=e=>T.value=e),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[h,T.value]])]),l("div",null,[a[49]||(a[49]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>M.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[48]||(a[48]=[z('<option value="punkty_desc" data-v-9c0d80a1>Punkty (malejąco)</option><option value="punkty_asc" data-v-9c0d80a1>Punkty (rosnąco)</option><option value="srednia_desc" data-v-9c0d80a1>Średnia (malejąco)</option><option value="srednia_asc" data-v-9c0d80a1>Średnia (rosnąco)</option><option value="zawodnicy_desc" data-v-9c0d80a1>Zawodnicy (malejąco)</option><option value="zawodnicy_asc" data-v-9c0d80a1>Zawodnicy (rosnąco)</option><option value="nazwa_asc" data-v-9c0d80a1>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-9c0d80a1>Nazwa (Z-A)</option>',8)]),512),[[v,M.value]])])])]),a[52]||(a[52]=l("div",{class:"flex items-center justify-between"},[l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Suma Punktów"),l("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Wszystkie punkty zawodników klubu ")],-1)),l("div",Pt,[l("table",Ut,[a[51]||(a[51]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łączne punkty"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnicy"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Średnia")])],-1)),l("tbody",Rt,[0===ae.value.length?(r(),t("tr",Ft,a[50]||(a[50]=[l("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):d("",!0),(r(!0),t(k,null,b(ae.value,((e,a)=>(r(),t("tr",{key:e.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",Et,[0===a?(r(),t("span",Qt,"🏆")):1===a?(r(),t("span",$t,"🥈")):2===a?(r(),t("span",Wt,"🥉")):(r(),t("span",Tt,i(a+1),1))]),l("td",Mt,i(e.klub),1),l("td",Bt,i(e.laczne_punkty)+" pkt",1),l("td",Vt,i(e.liczba_zawodnikow),1),l("td",Gt,i(parseFloat(e.srednia).toFixed(1))+" pkt",1)])))),128))])])])])):d("",!0),"clubs-top3"===_.value?(r(),t("div",Lt,[l("div",Jt,[l("div",{class:"flex items-center justify-between mb-6"},[a[54]||(a[54]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:ye,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[53]||(a[53]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",Ht,[l("div",null,[a[55]||(a[55]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Min. aktywnych kategorii")])],-1)),x(l("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>B.value=e),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[h,B.value]])]),l("div",null,[a[57]||(a[57]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[12]||(a[12]=e=>V.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[56]||(a[56]=[z('<option value="punkty_desc" data-v-9c0d80a1>Punkty Top 3 (malejąco)</option><option value="punkty_asc" data-v-9c0d80a1>Punkty Top 3 (rosnąco)</option><option value="kategorie_desc" data-v-9c0d80a1>Kategorie (malejąco)</option><option value="kategorie_asc" data-v-9c0d80a1>Kategorie (rosnąco)</option><option value="balance_desc" data-v-9c0d80a1>Równowaga (malejąco)</option><option value="balance_asc" data-v-9c0d80a1>Równowaga (rosnąco)</option><option value="nazwa_asc" data-v-9c0d80a1>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-9c0d80a1>Nazwa (Z-A)</option>',8)]),512),[[v,V.value]])])])]),a[60]||(a[60]=l("div",{class:"flex items-center justify-between"},[l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Top 3"),l("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," 3 najlepszych zawodników z każdej kategorii ")],-1)),l("div",Yt,[l("table",Xt,[a[59]||(a[59]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty Top 3"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategorie"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Równowaga")])],-1)),l("tbody",er,[0===te.value.length?(r(),t("tr",ar,a[58]||(a[58]=[l("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):d("",!0),(r(!0),t(k,null,b(te.value,((e,a)=>(r(),t("tr",{key:e.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",tr,i(a+1),1),l("td",rr,i(e.klub),1),l("td",lr,i(e.punkty_top3)+" pkt",1),l("td",sr,i(e.aktywne_kategorie),1),l("td",or,i(e.balance),1)])))),128))])])])])):d("",!0),"medals"===_.value?(r(),t("div",nr,[l("div",ir,[l("div",{class:"flex items-center justify-between mb-6"},[a[62]||(a[62]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:oe,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[61]||(a[61]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść filtry",-1)]))]),l("div",dr,[l("div",null,[a[63]||(a[63]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🥇"),l("span",null,"Min. złotych medali")])],-1)),x(l("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>G.value=e),type:"number",min:"0",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[h,G.value]])]),l("div",null,[a[65]||(a[65]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[14]||(a[14]=e=>L.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[64]||(a[64]=[z('<option value="zlote_desc" data-v-9c0d80a1>Złote (malejąco)</option><option value="zlote_asc" data-v-9c0d80a1>Złote (rosnąco)</option><option value="srebrne_desc" data-v-9c0d80a1>Srebrne (malejąco)</option><option value="srebrne_asc" data-v-9c0d80a1>Srebrne (rosnąco)</option><option value="brazowe_desc" data-v-9c0d80a1>Brązowe (malejąco)</option><option value="brazowe_asc" data-v-9c0d80a1>Brązowe (rosnąco)</option><option value="lacznie_desc" data-v-9c0d80a1>Łącznie (malejąco)</option><option value="lacznie_asc" data-v-9c0d80a1>Łącznie (rosnąco)</option><option value="nazwa_asc" data-v-9c0d80a1>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-9c0d80a1>Nazwa (Z-A)</option>',10)]),512),[[v,L.value]])])])]),a[68]||(a[68]=l("div",{class:"flex items-center justify-between"},[l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Medalowa"),l("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Złote, srebrne i brązowe medale ")],-1)),l("div",ur,[l("table",cr,[a[67]||(a[67]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),l("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥇 Złote"),l("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥈 Srebrne"),l("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥉 Brązowe"),l("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łącznie")])],-1)),l("tbody",gr,[0===re.value.length?(r(),t("tr",pr,a[66]||(a[66]=[l("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):d("",!0),(r(!0),t(k,null,b(re.value,((e,a)=>(r(),t("tr",{key:e.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",yr,i(a+1),1),l("td",xr,i(e.klub),1),l("td",vr,i(e.zlote),1),l("td",kr,i(e.srebrne),1),l("td",br,i(e.brazowe),1),l("td",mr,i(e.lacznie),1)])))),128))])])])])):d("",!0)])),!m.value&&le.value?(r(),t("div",wr,[u(c(R),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a[70]||(a[70]=l("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Brak danych rankingowych",-1)),a[71]||(a[71]=l("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Rankingi będą dostępne po zakończeniu pierwszych zawodów w sezonie. ",-1)),l("button",{onClick:se,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700"},[u(c(F),{class:"h-4 w-4 mr-2"}),a[69]||(a[69]=g(" Sprawdź ponownie "))])])):d("",!0)]))}}),hr=va(fr,[["__scopeId","data-v-9c0d80a1"]]),zr={class:"space-y-6"},_r={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},jr={class:"flex items-center space-x-3"},Sr={class:"flex space-x-2"},Cr=["disabled"],Ar={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Ir={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Or={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Zr={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},qr={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Dr={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Kr={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg"},Nr={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Pr={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Ur={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Rr={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 rounded-lg"},Fr={class:"flex"},Er={class:"ml-3"},Qr={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},$r={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},Wr={class:"list-disc list-inside space-y-1"},Tr={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Mr={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Br={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Vr={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},Gr={class:"space-y-3 max-h-80 overflow-y-auto"},Lr={class:"flex items-center space-x-3"},Jr={class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},Hr={class:"text-sm font-medium text-indigo-600 dark:text-indigo-400"},Yr={class:"text-sm font-medium text-gray-900 dark:text-white"},Xr={class:"text-xs text-gray-500 dark:text-gray-400"},el={class:"text-right"},al={class:"text-xs text-gray-500 dark:text-gray-400"},tl={class:"text-xs text-gray-400 dark:text-gray-500"},rl={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},ll={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},sl={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},ol={class:"space-y-3"},nl={class:"flex items-center space-x-3"},il={class:"text-sm font-medium text-gray-900 dark:text-white"},dl={class:"text-xs text-gray-500 dark:text-gray-400"},ul={class:"text-right"},cl={class:"text-xs text-gray-500 dark:text-gray-400"},gl={class:"flex space-x-1 text-xs"},pl={class:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded"},yl={class:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded"},xl={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},vl={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},kl={class:"overflow-x-auto"},bl={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ml={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},wl={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},fl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},hl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},zl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},_l={class:"px-6 py-4 whitespace-nowrap"},jl={class:"flex items-center"},Sl={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Cl={class:"ml-2 text-sm text-gray-500 dark:text-gray-300"},Al={key:1,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Il={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Ol={class:"space-y-2"},Zl={class:"text-sm font-medium text-gray-600 dark:text-gray-300 w-20"},ql={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-4 relative"},Dl={class:"text-sm text-gray-500 dark:text-gray-400 w-24 text-right"},Kl={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Nl={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Pl={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ul={class:"text-xs text-gray-500"},Rl={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Fl={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},El={class:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4 mb-6"},Ql={class:"flex"},$l={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Wl={class:"space-y-4"},Tl=["disabled"],Ml=["disabled"],Bl={key:0},Vl=["disabled"],Gl=["disabled"],Ll={class:"space-y-4"},Jl={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Hl={class:"flex items-center space-x-4 mb-3"},Yl={class:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},Xl={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},es={class:"text-lg font-medium text-gray-900 dark:text-white"},as={class:"text-sm text-gray-500 dark:text-gray-400"},ts={class:"grid grid-cols-2 gap-3 text-sm"},rs={class:"font-medium text-gray-900 dark:text-white"},ls={class:"flex items-center mt-1"},ss={key:0,class:"inline-flex items-center px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full"},os={key:1,class:"inline-flex items-center px-2 py-1 text-xs bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-full"},ns={class:"font-medium text-gray-900 dark:text-white"},is={class:"font-medium text-gray-900 dark:text-white"},ds={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},us={class:"text-xs text-gray-500 dark:text-gray-400"},cs={key:1,class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},gs={class:"flex"},ps={class:"ml-3"},ys={class:"text-sm text-red-700 dark:text-red-300 mt-1"},xs={key:2,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},vs={key:3,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center"},ks={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},bs={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},ms={class:"space-y-2 max-h-40 overflow-y-auto"},ws={class:"flex items-center space-x-3"},fs={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center"},hs={class:"text-sm font-medium text-orange-600 dark:text-orange-400"},zs={class:"text-sm font-medium text-gray-900 dark:text-white"},_s={class:"text-xs text-gray-500 dark:text-gray-400"},js={class:"text-xs text-gray-500 dark:text-gray-400"},Ss=e({__name:"QrAdminDashboard",setup(e){const n=p(!1),m=p({total_zawodnikow:0,z_qr_kodami:0,zameldowanych:0,bez_qr_kodow:0,procent_zameldowanych:0}),f=p([]),S=p([]),C=p([]),I=p([]),O=p([]),q=p({nr_startowy:0,powod:"",opis:""}),D=p(!1),N=p(null),U=p(!1),G=p([]);let L=null,J=null;const H=a((()=>0===I.value.length?1:Math.max(...I.value.map((e=>Math.max(e.check_ins,e.results)))))),Y=a((()=>q.value.nr_startowy>0&&""!==q.value.powod&&null!==N.value&&!N.value.checked_in));w((()=>q.value.nr_startowy),(e=>{J&&clearTimeout(J),e&&e>0?J=setTimeout((()=>{oe(e)}),500):N.value=null}));const X=async()=>{try{n.value=!0;const e=await A.get("/api/qr/dashboard");e.data.success&&(m.value=e.data.basic_stats,f.value=e.data.recent_checkpoints,S.value=e.data.device_activity,C.value=e.data.category_stats,I.value=e.data.hourly_progress,O.value=e.data.issues)}catch(e){}finally{n.value=!1}},ee=()=>{X()},ae=async()=>{try{window.open("/api/qr/export","_blank")}catch(e){}},te=async()=>{},re=async()=>{},le=()=>{},se=e=>new Date(e).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),oe=async e=>{if(!e||e<=0)N.value=null;else try{U.value=!0;const a=await A.get(`/api/zawodnicy/${e}`);a.data.success?N.value=a.data.zawodnik:N.value=null}catch(a){N.value=null}finally{U.value=!1}},ne=async()=>{var e,a,t,r,l,s,o,n,i;if(Y.value)try{D.value=!0;const n={nr_startowy:q.value.nr_startowy,device_id:"manual-admin",manual:!0,reason:q.value.powod,description:q.value.opis||null};(await A.post("/api/qr/check-in",n)).data.success&&(await X(),await oe(q.value.nr_startowy),G.value.unshift({nr_startowy:q.value.nr_startowy,imie:(null==(e=N.value)?void 0:e.imie)||"",nazwisko:(null==(a=N.value)?void 0:a.nazwisko)||"",kategoria:(null==(t=N.value)?void 0:t.kategoria)||"",checked_in:!0,check_in_time:(new Date).toISOString(),qr_code:(null==(r=N.value)?void 0:r.qr_code)||!1,ma_wynik:(null==(l=N.value)?void 0:l.ma_wynik)||!1,klub:(null==(s=N.value)?void 0:s.klub)||"",plec:(null==(o=N.value)?void 0:o.plec)||"",powod:q.value.powod,timestamp:(new Date).toISOString()}),q.value={nr_startowy:0,powod:"",opis:""})}catch(d){null==(i=null==(n=d.response)?void 0:n.data)||i.message}finally{D.value=!1}};return y((()=>{X(),(async()=>{try{const e=await A.get("/api/qr/manual-checkins");e.data.success&&(G.value=e.data.manual_checkins)}catch(e){}})(),L=setInterval(X,1e4)})),_((()=>{L&&clearInterval(L),J&&clearTimeout(J)})),(e,a)=>(r(),t("div",zr,[l("div",_r,[l("div",jr,[u(c(E),{class:"h-8 w-8 text-indigo-600"}),a[3]||(a[3]=l("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"QR Admin Dashboard",-1))]),l("div",Sr,[l("button",{onClick:ee,disabled:n.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center"},[u(c(F),{class:o(["h-4 w-4 mr-2",{"animate-spin":n.value}])},null,8,["class"]),a[4]||(a[4]=g(" Odśwież "))],8,Cr),l("button",{onClick:ae,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center"},[u(c(Q),{class:"h-4 w-4 mr-2"}),a[5]||(a[5]=g(" Eksport CSV "))])])]),l("div",Ar,[l("div",Ir,[l("div",Or,[l("div",Zr,i(m.value.total_zawodnikow||0),1),a[6]||(a[6]=l("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Wszyscy zawodnicy",-1))]),l("div",qr,[l("div",Dr,i(m.value.z_qr_kodami||0),1),a[7]||(a[7]=l("div",{class:"text-sm text-green-700 dark:text-green-300"},"Z QR kodami",-1))]),l("div",Kr,[l("div",Nr,i(m.value.zameldowanych||0),1),a[8]||(a[8]=l("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Zameldowanych",-1))]),l("div",Pr,[l("div",Ur,i(m.value.procent_zameldowanych||0)+"% ",1),a[9]||(a[9]=l("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"% zameldowanych",-1))])])]),O.value.length>0?(r(),t("div",Rr,[l("div",Fr,[u(c(K),{class:"h-5 w-5 text-yellow-400"}),l("div",Er,[l("h3",Qr," Wykryto problemy ("+i(O.value.length)+") ",1),l("div",$r,[l("ul",Wr,[(r(!0),t(k,null,b(O.value,(e=>(r(),t("li",{key:e.type},i(e.title)+": "+i(e.count),1)))),128))])])])])])):d("",!0),l("div",Tr,[l("div",Mr,[l("h2",Br,[u(c(Z),{class:"h-5 w-5 mr-2 text-gray-500"}),a[10]||(a[10]=g(" Ostatnia aktywność ")),l("span",Vr,i(f.value.length),1)]),l("div",Gr,[(r(!0),t(k,null,b(f.value.slice(0,10),(e=>{return r(),t("div",{key:`${e.nr_startowy}-${e.scan_time}`,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[l("div",Lr,[l("div",Jr,[l("span",Hr,i(e.nr_startowy),1)]),l("div",null,[l("div",Yr,i(e.imie)+" "+i(e.nazwisko),1),l("div",Xr,i(e.kategoria)+" • "+i((a=e.checkpoint_name,{"check-in":"Zameldowanie",finish:"Meta",verify:"Weryfikacja"}[a]||a)),1)])]),l("div",el,[l("div",al,i(se(e.scan_time)),1),l("div",tl,i(e.device_id),1)])]);var a})),128))])]),l("div",rl,[l("h2",ll,[u(c($),{class:"h-5 w-5 mr-2 text-gray-500"}),a[11]||(a[11]=g(" Aktywne urządzenia ")),l("span",sl,i(S.value.length),1)]),l("div",ol,[(r(!0),t(k,null,b(S.value,(e=>(r(),t("div",{key:e.device_id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[l("div",nl,[a[12]||(a[12]=l("div",{class:"w-3 h-3 bg-green-400 rounded-full animate-pulse"},null,-1)),l("div",null,[l("div",il,i(e.device_id),1),l("div",dl,i(e.total_scans)+" skanów • "+i(e.unique_zawodnicy)+" zawodników ",1)])]),l("div",ul,[l("div",cl,i(se(e.last_activity)),1),l("div",gl,[l("span",pl,i(e.check_ins)+" check-in ",1),l("span",yl,i(e.results)+" wyniki ",1)])])])))),128))])])]),l("div",xl,[l("h2",vl,[u(c(R),{class:"h-5 w-5 mr-2 text-gray-500"}),a[13]||(a[13]=g(" Statystyki według kategorii "))]),l("div",kl,[l("table",bl,[a[14]||(a[14]=l("thead",{class:"bg-gray-50 dark:bg-gray-700"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Łącznie "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zameldowanych "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Z wynikami "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Postęp ")])],-1)),l("tbody",ml,[(r(!0),t(k,null,b(C.value,(e=>(r(),t("tr",{key:e.kategoria},[l("td",wl,i(e.kategoria),1),l("td",fl,i(e.total),1),l("td",hl,i(e.zameldowanych),1),l("td",zl,i(e.z_wynikami),1),l("td",_l,[l("div",jl,[l("div",Sl,[l("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:j({width:`${Math.round(e.z_wynikami/e.total*100)}%`})},null,4)]),l("span",Cl,i(Math.round(e.z_wynikami/e.total*100))+"% ",1)])])])))),128))])])])]),I.value.length>0?(r(),t("div",Al,[l("h2",Il,[u(c(R),{class:"h-5 w-5 mr-2 text-gray-500"}),a[15]||(a[15]=g(" Postęp w ciągu dnia "))]),l("div",Ol,[(r(!0),t(k,null,b(I.value,(e=>{return r(),t("div",{key:e.hour,class:"flex items-center space-x-4"},[l("div",Zl,i((a=e.hour,new Date(a).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}))),1),l("div",ql,[l("div",{class:"bg-blue-500 h-full rounded-full transition-all duration-300",style:j({width:`${Math.min(e.check_ins/H.value*100,100)}%`})},null,4),l("div",{class:"bg-green-500 h-full rounded-full absolute top-0 transition-all duration-300",style:j({width:`${Math.min(e.results/H.value*100,100)}%`,left:`${Math.min(e.check_ins/H.value*100,100)}%`})},null,4)]),l("div",Dl,i(e.check_ins)+" / "+i(e.results),1)]);var a})),128))]),a[16]||(a[16]=z('<div class="flex items-center space-x-4 mt-4 text-xs text-gray-500"><div class="flex items-center"><div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div> Check-ins </div><div class="flex items-center"><div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div> Wyniki </div></div>',1))])):d("",!0),l("div",Kl,[l("h2",Nl,[u(c(W),{class:"h-5 w-5 mr-2 text-gray-500"}),a[17]||(a[17]=g(" Narzędzia diagnostyczne "))]),l("div",Pl,[l("button",{onClick:te,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[u(c(E),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),a[18]||(a[18]=l("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Generuj brakujące QR ",-1)),l("div",Ul,i(m.value.bez_qr_kodow)+" zawodników ",1)]),l("button",{onClick:re,class:"p-4 border-2 border-dashed border-red-300 dark:border-red-600 rounded-lg hover:border-red-400 transition-colors"},[u(c(F),{class:"h-8 w-8 mx-auto text-red-400 mb-2"}),a[19]||(a[19]=l("div",{class:"text-sm font-medium text-red-600 dark:text-red-300"}," Reset check-inów ",-1)),a[20]||(a[20]=l("div",{class:"text-xs text-red-500"}," Usuń wszystkie meldunki ",-1))]),l("button",{onClick:le,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[u(c(T),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),a[21]||(a[21]=l("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Logi systemu ",-1)),a[22]||(a[22]=l("div",{class:"text-xs text-gray-500"}," Ostatnie wydarzenia ",-1))])])]),l("div",Rl,[l("h2",Fl,[u(c(M),{class:"h-5 w-5 mr-2 text-orange-500"}),a[23]||(a[23]=g(" Ręczne zameldowanie ")),a[24]||(a[24]=l("span",{class:"ml-2 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-2 py-1 rounded-full"}," BACKUP ",-1))]),l("div",El,[l("div",Ql,[u(c(K),{class:"h-5 w-5 text-orange-400"}),a[25]||(a[25]=l("div",{class:"ml-3"},[l("p",{class:"text-sm text-orange-700 dark:text-orange-300"},[l("strong",null,"Uwaga:"),g(' Używaj tylko gdy skaner QR nie działa lub w sytuacjach awaryjnych. Każde ręczne zameldowanie jest rejestrowane z identyfikatorem urządzenia "manual-admin". ')])],-1))])]),l("div",$l,[l("div",Wl,[a[30]||(a[30]=l("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Zamelduj zawodnika",-1)),l("div",null,[a[26]||(a[26]=l("label",{for:"nr_startowy",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Numer startowy ",-1)),x(l("input",{id:"nr_startowy","onUpdate:modelValue":a[0]||(a[0]=e=>q.value.nr_startowy=e),type:"number",min:"1",disabled:D.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Wprowadź numer startowy..."},null,8,Tl),[[h,q.value.nr_startowy]])]),l("div",null,[a[28]||(a[28]=l("label",{for:"powod",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Powód ręcznego zameldowania ",-1)),x(l("select",{id:"powod","onUpdate:modelValue":a[1]||(a[1]=e=>q.value.powod=e),disabled:D.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},a[27]||(a[27]=[z('<option value="">Wybierz powód...</option><option value="awaria_skanera">Awaria skanera QR</option><option value="brak_kodu">Brak/uszkodzony kod QR</option><option value="problem_techniczny">Problem techniczny</option><option value="decyzja_organizatora">Decyzja organizatora</option><option value="inne">Inne</option>',6)]),8,Ml),[[v,q.value.powod]])]),"inne"===q.value.powod?(r(),t("div",Bl,[a[29]||(a[29]=l("label",{for:"opis",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Opis szczegółowy ",-1)),x(l("textarea",{id:"opis","onUpdate:modelValue":a[2]||(a[2]=e=>q.value.opis=e),rows:"2",disabled:D.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Opisz powód ręcznego zameldowania..."},null,8,Vl),[[h,q.value.opis]])])):d("",!0),l("button",{onClick:ne,disabled:!Y.value||D.value,class:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[D.value?d("",!0):(r(),s(c(B),{key:0,class:"h-4 w-4 mr-2"})),D.value?(r(),s(c(F),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):d("",!0),g(" "+i(D.value?"Meldowanie...":"Zamelduj zawodnika"),1)],8,Gl)]),l("div",Ll,[a[40]||(a[40]=l("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Podgląd zawodnika",-1)),N.value?(r(),t("div",Jl,[l("div",Hl,[l("div",Yl,[l("span",Xl,i(N.value.nr_startowy),1)]),l("div",null,[l("div",es,i(N.value.imie)+" "+i(N.value.nazwisko),1),l("div",as,i(N.value.kategoria)+" • "+i("M"===N.value.plec?"Mężczyzna":"Kobieta"),1)])]),l("div",ts,[l("div",null,[a[31]||(a[31]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Klub:",-1)),l("div",rs,i(N.value.klub||"Brak danych"),1)]),l("div",null,[a[34]||(a[34]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Status:",-1)),l("div",ls,[N.value.checked_in?(r(),t("span",ss,[u(c(B),{class:"h-3 w-3 mr-1"}),a[32]||(a[32]=g(" Zameldowany "))])):(r(),t("span",os,[u(c(V),{class:"h-3 w-3 mr-1"}),a[33]||(a[33]=g(" Nie zameldowany "))]))])]),l("div",null,[a[35]||(a[35]=l("span",{class:"text-gray-500 dark:text-gray-400"},"QR kod:",-1)),l("div",ns,i(N.value.qr_code?"Dostępny":"Brak"),1)]),l("div",null,[a[36]||(a[36]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Wynik:",-1)),l("div",is,i(N.value.ma_wynik?"Tak":"Nie"),1)])]),N.value.checked_in&&N.value.check_in_time?(r(),t("div",ds,[l("span",us," Zameldowany: "+i(se(N.value.check_in_time)),1)])):d("",!0)])):q.value.nr_startowy&&!U.value?(r(),t("div",cs,[l("div",gs,[u(c(V),{class:"h-5 w-5 text-red-400"}),l("div",ps,[a[37]||(a[37]=l("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Zawodnik nie znaleziony ",-1)),l("p",ys," Nie znaleziono zawodnika z numerem startowym "+i(q.value.nr_startowy)+". ",1)])])])):U.value?(r(),t("div",xs,a[38]||(a[38]=[z('<div class="animate-pulse"><div class="flex items-center space-x-4"><div class="w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-32"></div><div class="h-3 bg-gray-300 dark:bg-gray-600 rounded w-24"></div></div></div></div>',1)]))):(r(),t("div",vs,[u(c(P),{class:"h-12 w-12 mx-auto text-gray-400 mb-2"}),a[39]||(a[39]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Wprowadź numer startowy, aby zobaczyć podgląd zawodnika ",-1))]))])]),G.value.length>0?(r(),t("div",ks,[l("h3",bs," Ostatnie ręczne zameldowania ("+i(G.value.length)+") ",1),l("div",ms,[(r(!0),t(k,null,b(G.value.slice(0,5),(e=>{return r(),t("div",{key:`manual-${e.nr_startowy}-${e.timestamp}`,class:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},[l("div",ws,[l("div",fs,[l("span",hs,i(e.nr_startowy),1)]),l("div",null,[l("div",zs,i(e.imie)+" "+i(e.nazwisko),1),l("div",_s,i((a=e.powod,{awaria_skanera:"Awaria skanera QR",brak_kodu:"Brak/uszkodzony kod QR",problem_techniczny:"Problem techniczny",decyzja_organizatora:"Decyzja organizatora",inne:"Inne"}[a]||a)),1)])]),l("div",js,i(se(e.timestamp)),1)]);var a})),128))])])):d("",!0)])]))}}),Cs={},As={class:"p-4 sm:p-6"},Is={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Os={class:"flex items-center space-x-3"},Zs={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3"},qs=["disabled"],Ds=["disabled"],Ks={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 mb-6 transition-colors duration-200"},Ns={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ps=["value"],Us=["value"],Rs={value:"with_qr"},Fs={value:"without_qr"},Es={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Qs={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},$s={class:"flex flex-wrap gap-3"},Ws=["disabled"],Ts=["disabled"],Ms=["disabled"],Bs=["disabled"],Vs={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Gs={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 transition-colors duration-200"},Ls={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Js={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800 transition-colors duration-200"},Hs={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Ys={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800 transition-colors duration-200"},Xs={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},eo={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800 transition-colors duration-200"},ao={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},to={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200"},ro={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 flex items-center justify-between transition-colors duration-200"},lo={class:"text-lg font-semibold text-gray-900 dark:text-white"},so={class:"text-sm text-gray-600 dark:text-gray-400"},oo={class:"hidden md:grid grid-cols-6 gap-4 p-4 bg-gray-100 dark:bg-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 transition-colors duration-200"},no={class:"flex items-center"},io=["checked"],uo={class:"max-h-96 overflow-y-auto"},co={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},go={class:"md:hidden"},po={class:"flex items-start space-x-3"},yo=["checked","onChange"],xo={class:"flex-1"},vo={class:"flex items-center justify-between mb-2"},ko={class:"font-semibold text-lg text-gray-900 dark:text-white"},bo={class:"flex items-center"},mo={key:0,class:"flex items-center text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full text-xs font-medium"},wo={key:1,class:"flex items-center text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full text-xs font-medium"},fo={class:"text-base font-medium text-gray-900 dark:text-white mb-2"},ho={class:"flex flex-wrap gap-2 text-sm"},zo={class:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 px-2 py-1 rounded font-medium"},_o={class:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded font-medium"},jo={class:"hidden md:block"},So={class:"flex items-center"},Co=["checked","onChange"],Ao={class:"font-medium text-gray-900 dark:text-white"},Io={class:"font-medium text-gray-900 dark:text-white"},Oo={class:"text-gray-600 dark:text-gray-400"},Zo={class:"text-gray-600 dark:text-gray-400 truncate"},qo={class:"flex items-center"},Do={key:0,class:"flex items-center text-green-600 dark:text-green-400"},Ko={key:1,class:"flex items-center text-red-600 dark:text-red-400"},No=["onClick"],Po={key:0,class:"mt-6 bg-white rounded-lg shadow-sm border"},Uo={class:"p-4 border-b bg-gray-50 flex items-center justify-between"},Ro={class:"text-lg font-semibold text-gray-900"},Fo={class:"p-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-80 overflow-y-auto"},Eo=["src","alt"],Qo={class:"text-xs font-medium"},$o={class:"text-xs text-gray-600"},Wo={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},To={class:"bg-white rounded-lg p-6 max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto"},Mo={class:"flex items-center justify-between mb-4"},Bo={class:"mb-4 flex space-x-4"},Vo={id:"printArea",class:"print-content"},Go={class:"sticker-grid"},Lo={class:"sticker-header"},Jo={class:"nr-startowy"},Ho={class:"zawodnik-name"},Yo={class:"qr-container"},Xo=["src","alt"],en={class:"sticker-footer"},an={class:"kategoria"},tn={class:"klub"},rn=va(e({__name:"QrPrint",setup(e){const s=p([]),n=p([]),m=p([]),w=p(!1),f=p(!1),h=p(!1),_=p(""),j=p(""),S=p(""),C=p("nr_startowy_asc"),A=a((()=>[...new Set(s.value.map((e=>e.kategoria)))].sort())),I=a((()=>[...new Set(s.value.map((e=>e.klub)).filter(Boolean))].sort())),O=a((()=>{let e=s.value;return _.value&&(e=e.filter((e=>e.kategoria===_.value))),j.value&&(e=e.filter((e=>e.klub===j.value))),"with_qr"===S.value?e=e.filter((e=>e.qr_code)):"without_qr"===S.value&&(e=e.filter((e=>!e.qr_code))),"nr_startowy_asc"===C.value?e.sort(((e,a)=>e.nr_startowy-a.nr_startowy)):"nr_startowy_desc"===C.value?e.sort(((e,a)=>a.nr_startowy-e.nr_startowy)):"nazwisko_asc"===C.value?e.sort(((e,a)=>e.nazwisko.localeCompare(a.nazwisko))):"nazwisko_desc"===C.value&&e.sort(((e,a)=>a.nazwisko.localeCompare(e.nazwisko))),e})),Z=a((()=>0!==O.value.length&&O.value.every((e=>n.value.includes(e.nr_startowy))))),q=a((()=>{if(!_.value)return!1;const e=O.value.filter((e=>e.kategoria===_.value));return e.length>0&&e.every((e=>n.value.includes(e.nr_startowy)))})),D=a((()=>{if(!j.value)return!1;const e=O.value.filter((e=>e.klub===j.value));return e.length>0&&e.every((e=>n.value.includes(e.nr_startowy)))})),K=a((()=>{const e=O.value.filter((e=>!e.qr_code));return e.length>0&&e.every((e=>n.value.includes(e.nr_startowy)))})),N=a((()=>n.value.filter((e=>{const a=s.value.find((a=>a.nr_startowy===e));return a&&a.qr_code})))),P=a((()=>n.value.filter((e=>{const a=s.value.find((a=>a.nr_startowy===e));return a&&!a.qr_code})))),R=a((()=>({total:O.value.length,selected:n.value.filter((e=>O.value.some((a=>a.nr_startowy===e)))).length,withQr:O.value.filter((e=>e.qr_code)).length,generated:m.value.length}))),F=async()=>{w.value=!0;try{const e=await fetch("/api/zawodnicy");e.ok&&(s.value=await e.json())}catch(e){}finally{w.value=!1}},Q=e=>{const a=n.value.indexOf(e);a>-1?n.value.splice(a,1):n.value.push(e)},$=()=>{const e=O.value.map((e=>e.nr_startowy));n.value=[...new Set([...n.value,...e])]},W=()=>{if(Z.value){const e=O.value.map((e=>e.nr_startowy));n.value=n.value.filter((a=>!e.includes(a)))}else $()},T=()=>{if(_.value)if(q.value){const e=O.value.filter((e=>e.kategoria===_.value)).map((e=>e.nr_startowy));n.value=n.value.filter((a=>!e.includes(a)))}else(()=>{if(!_.value)return;const e=O.value.filter((e=>e.kategoria===_.value)).map((e=>e.nr_startowy));n.value=[...new Set([...n.value,...e])]})()},M=()=>{if(j.value)if(D.value){const e=O.value.filter((e=>e.klub===j.value)).map((e=>e.nr_startowy));n.value=n.value.filter((a=>!e.includes(a)))}else(()=>{if(!j.value)return;const e=O.value.filter((e=>e.klub===j.value)).map((e=>e.nr_startowy));n.value=[...new Set([...n.value,...e])]})()},L=()=>{if(K.value){const e=O.value.filter((e=>!e.qr_code)).map((e=>e.nr_startowy));n.value=n.value.filter((a=>!e.includes(a)))}else(()=>{const e=O.value.filter((e=>!e.qr_code)).map((e=>e.nr_startowy));n.value=[...new Set([...n.value,...e])]})()},J=()=>{n.value=[]},H=async()=>{if(0!==P.value.length){f.value=!0;try{const e=await fetch("/api/qr/generate-bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zawodnicy_ids:P.value})});if(e.ok){const a=await e.json(),t=m.value.map((e=>e.zawodnik.nr_startowy)),r=a.qr_codes.filter((e=>!t.includes(e.zawodnik.nr_startowy)));m.value=[...m.value,...r],await F()}}catch(e){}finally{f.value=!1}}},Y=async()=>{if(0!==N.value.length){f.value=!0;try{const e=N.value.map((e=>s.value.find((a=>a.nr_startowy===e)))).filter(Boolean).map((async e=>{if(!e.qr_code)return null;const a=await function(e,a){let t=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));t=e(a.map((e=>{if((e=function(e){return"/"+e}(e))in Cs)return;Cs[e]=!0;const a=e.endsWith(".css"),t=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const r=document.createElement("link");return r.rel=a?"stylesheet":"modulepreload",a||(r.as="script"),r.crossOrigin="",r.href=e,l&&r.setAttribute("nonce",l),document.head.appendChild(r),a?new Promise(((a,t)=>{r.addEventListener("load",a),r.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function r(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return t.then((a=>{for(const e of a||[])"rejected"===e.status&&r(e.reason);return e().catch(r)}))}((()=>import("./browser-aA-kYyDG.js").then((e=>e.b))),__vite__mapDeps([0,1])),t=await a.toDataURL(e.qr_code,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});return{zawodnik:e,qr_code:e.qr_code,qr_image:t}})),a=(await Promise.all(e)).filter(Boolean);m.value=a,h.value=!0}catch(e){}finally{f.value=!1}}},X=()=>{window.print(),h.value=!1},ee=()=>{m.value=[]},ae=()=>{_.value="",j.value="",S.value="",C.value="nr_startowy_asc",n.value=[]},te=()=>{if(n.value.length===O.value.length&&O.value.length>0){const e=O.value.map((e=>e.nr_startowy));n.value=n.value.filter((a=>!e.includes(a)))}else $()};return y((()=>{F()})),(e,a)=>(r(),t("div",As,[l("div",Is,[l("div",Os,[u(c(G),{class:"h-8 w-8 text-indigo-600"}),a[6]||(a[6]=l("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Drukowanie QR kodów",-1))]),l("div",Zs,[l("button",{onClick:H,disabled:0===P.value.length||f.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm font-medium transition-colors duration-200"},[u(c(E),{class:"h-5 w-5"}),l("span",null,"Generuj QR ("+i(P.value.length)+")",1)],8,qs),l("button",{onClick:Y,disabled:0===N.value.length||f.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm font-medium transition-colors duration-200"},[u(c(G),{class:"h-5 w-5"}),l("span",null,"Drukuj ("+i(N.value.length)+")",1)],8,Ds)])]),l("div",Ks,[l("div",{class:"flex items-center justify-between mb-6"},[a[8]||(a[8]=l("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:ae,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[7]||(a[7]=[l("span",null,"🗑️",-1),l("span",null,"Wyczyść wszystko",-1)]))]),l("div",Ns,[l("div",null,[a[10]||(a[10]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Kategoria")])],-1)),x(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[9]||(a[9]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(A.value,(e=>(r(),t("option",{key:e,value:e},i(e)+" ("+i((e=>O.value.filter((a=>a.kategoria===e)).length)(e))+") ",9,Ps)))),128))],512),[[v,_.value]])]),l("div",null,[a[12]||(a[12]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏢"),l("span",null,"Klub")])],-1)),x(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>j.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[11]||(a[11]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(I.value,(e=>(r(),t("option",{key:e,value:e},i(e)+" ("+i((e=>O.value.filter((a=>a.klub===e)).length)(e))+") ",9,Us)))),128))],512),[[v,j.value]])]),l("div",null,[a[14]||(a[14]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"📱"),l("span",null,"Status QR")])],-1)),x(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[13]||(a[13]=l("option",{value:""},"Wszystkie",-1)),l("option",Rs,"✅ Z QR kodami ("+i(R.value.withQr)+")",1),l("option",Fs,"❌ Bez QR kodów ("+i(R.value.total-R.value.withQr)+")",1)],512),[[v,S.value]])])]),l("div",Es,[l("div",null,[a[16]||(a[16]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[15]||(a[15]=[z('<option value="nr_startowy_asc" data-v-926ab205>Nr startowy (rosnąco)</option><option value="nr_startowy_desc" data-v-926ab205>Nr startowy (malejąco)</option><option value="nazwisko_asc" data-v-926ab205>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-926ab205>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-926ab205>Kategoria (A-Z)</option><option value="klub_asc" data-v-926ab205>Klub (A-Z)</option><option value="qr_status" data-v-926ab205>Status QR (najpierw bez QR)</option>',7)]),512),[[v,C.value]])])]),l("div",Qs,[a[18]||(a[18]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"⚡"),l("span",null,"Operacje grupowe")])],-1)),l("div",$s,[l("button",{onClick:W,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2",Z.value?"bg-indigo-700 text-white shadow-inner border-2 border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-2 border-transparent"])},[l("span",null,i(Z.value?"✅":"☐"),1),l("span",null,i(Z.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" ("+i(O.value.length)+")",1)],2),l("button",{onClick:T,disabled:!_.value,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",_.value?q.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[l("span",null,i(_.value?q.value?"✅":"☐":"🏆"),1),l("span",null,i(_.value?q.value?`Odznacz: ${_.value}`:`Zaznacz: ${_.value}`:"Wybierz kategorię"),1)],10,Ws),l("button",{onClick:M,disabled:!j.value,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",j.value?D.value?"bg-purple-700 text-white shadow-inner border-purple-800":"bg-purple-600 text-white hover:bg-purple-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[l("span",null,i(j.value?D.value?"✅":"☐":"🏢"),1),l("span",null,i(j.value?D.value?`Odznacz: ${j.value}`:`Zaznacz: ${j.value}`:"Wybierz klub"),1)],10,Ts),l("button",{onClick:L,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",0===O.value.filter((e=>!e.qr_code)).length?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":K.value?"bg-orange-700 text-white shadow-inner border-orange-800":"bg-orange-600 text-white hover:bg-orange-700 border-transparent"]),disabled:0===O.value.filter((e=>!e.qr_code)).length},[l("span",null,i(K.value?"✅":"☐"),1),l("span",null,i(K.value?"Odznacz bez QR":"Zaznacz bez QR")+" ("+i(O.value.filter((e=>!e.qr_code)).length)+")",1)],10,Ms),l("button",{onClick:J,disabled:0===n.value.length,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent",n.value.length>0?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[a[17]||(a[17]=l("span",null,"🗑️",-1)),l("span",null,"Wyczyść zaznaczenia ("+i(n.value.length)+")",1)],10,Bs)])])]),l("div",Vs,[l("div",Gs,[l("div",Ls,i(R.value.total),1),a[19]||(a[19]=l("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Po filtrach",-1))]),l("div",Js,[l("div",Hs,i(R.value.selected),1),a[20]||(a[20]=l("div",{class:"text-sm text-green-700 dark:text-green-300"},"Zaznaczonych",-1))]),l("div",Ys,[l("div",Xs,i(R.value.withQr),1),a[21]||(a[21]=l("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"Z QR kodami",-1))]),l("div",eo,[l("div",ao,i(R.value.generated),1),a[22]||(a[22]=l("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Do druku",-1))])]),l("div",to,[l("div",ro,[l("h3",lo," Lista zawodników ("+i(O.value.length)+") ",1),l("div",so," Zaznaczono: "+i(n.value.length),1)]),l("div",oo,[l("div",no,[l("input",{type:"checkbox",checked:n.value.length===O.value.length&&O.value.length>0,onChange:te,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mr-3"},null,40,io),a[23]||(a[23]=g(" Nr startowy "))]),a[24]||(a[24]=l("div",null,"Imię i nazwisko",-1)),a[25]||(a[25]=l("div",null,"Kategoria",-1)),a[26]||(a[26]=l("div",null,"Klub",-1)),a[27]||(a[27]=l("div",null,"Status QR",-1)),a[28]||(a[28]=l("div",null,"Akcje",-1))]),l("div",uo,[0===O.value.length?(r(),t("div",co,a[29]||(a[29]=[l("div",{class:"text-4xl mb-2"},"🔍",-1),l("div",{class:"text-lg font-medium mb-1"},"Brak zawodników",-1),l("div",{class:"text-sm"},"Spróbuj zmienić kryteria filtrowania",-1)]))):d("",!0),l("div",go,[(r(!0),t(k,null,b(O.value,(e=>(r(),t("div",{key:e.nr_startowy,class:"p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[l("div",po,[l("input",{type:"checkbox",checked:n.value.includes(e.nr_startowy),onChange:a=>Q(e.nr_startowy),class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mt-1"},null,40,yo),l("div",xo,[l("div",vo,[l("div",ko," #"+i(e.nr_startowy),1),l("div",bo,[e.qr_code?(r(),t("div",mo,[u(c(B),{class:"h-3 w-3 mr-1"}),a[30]||(a[30]=l("span",null,"QR",-1))])):(r(),t("div",wo,[u(c(V),{class:"h-3 w-3 mr-1"}),a[31]||(a[31]=l("span",null,"Brak QR",-1))]))])]),l("div",fo,i(e.imie)+" "+i(e.nazwisko),1),l("div",ho,[l("span",zo,i(e.kategoria),1),l("span",_o,i(e.klub||"-"),1)])])])])))),128))]),l("div",jo,[(r(!0),t(k,null,b(O.value,(e=>(r(),t("div",{key:e.nr_startowy,class:"grid grid-cols-6 gap-4 p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 items-center text-sm transition-colors duration-200"},[l("div",So,[l("input",{type:"checkbox",checked:n.value.includes(e.nr_startowy),onChange:a=>Q(e.nr_startowy),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mr-3"},null,40,Co),l("span",Ao,"#"+i(e.nr_startowy),1)]),l("div",Io,i(e.imie)+" "+i(e.nazwisko),1),l("div",Oo,i(e.kategoria),1),l("div",Zo,i(e.klub||"-"),1),l("div",qo,[e.qr_code?(r(),t("div",Do,[u(c(B),{class:"h-4 w-4 mr-1"}),a[32]||(a[32]=l("span",{class:"text-xs font-medium"},"Tak",-1))])):(r(),t("div",Ko,[u(c(V),{class:"h-4 w-4 mr-1"}),a[33]||(a[33]=l("span",{class:"text-xs font-medium"},"Nie",-1))]))]),l("div",null,[e.qr_code?d("",!0):(r(),t("button",{key:0,onClick:a=>(async e=>{f.value=!0;try{const a=await fetch("/api/qr/generate-bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zawodnicy_ids:[e]})});if(a.ok){const e=await a.json();m.value=[...m.value,...e.qr_codes],await F()}}catch(a){}finally{f.value=!1}})(e.nr_startowy),class:"text-xs bg-indigo-600 text-white px-3 py-1 rounded-md hover:bg-indigo-700 font-medium transition-colors duration-200"}," Generuj QR ",8,No))])])))),128))])])]),m.value.length>0?(r(),t("div",Po,[l("div",Uo,[l("h3",Ro," Wygenerowane QR kody ("+i(m.value.length)+") ",1),l("button",{onClick:ee,class:"text-sm text-red-600 hover:text-red-800"}," Wyczyść ")]),l("div",Fo,[(r(!0),t(k,null,b(m.value,(e=>(r(),t("div",{key:e.zawodnik.nr_startowy,class:"text-center p-2 border rounded"},[l("img",{src:e.qr_image,alt:`QR ${e.zawodnik.nr_startowy}`,class:"w-16 h-16 mx-auto mb-1"},null,8,Eo),l("div",Qo,i(e.zawodnik.nr_startowy),1),l("div",$o,i(e.zawodnik.imie)+" "+i(e.zawodnik.nazwisko),1)])))),128))])])):d("",!0),h.value?(r(),t("div",Wo,[l("div",To,[l("div",Mo,[a[34]||(a[34]=l("h3",{class:"text-lg font-semibold"},"Podgląd wydruku",-1)),l("button",{onClick:a[4]||(a[4]=e=>h.value=!1),class:"text-gray-400 hover:text-gray-600"},[u(c(U),{class:"h-6 w-6"})])]),l("div",Bo,[l("button",{onClick:X,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," Drukuj teraz "),l("button",{onClick:a[5]||(a[5]=e=>h.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"}," Anuluj ")]),l("div",Vo,[l("div",Go,[(r(!0),t(k,null,b(m.value,(e=>(r(),t("div",{key:e.zawodnik.nr_startowy,class:"sticker"},[l("div",Lo,[l("div",Jo,i(e.zawodnik.nr_startowy),1),l("div",Ho,i(e.zawodnik.imie)+" "+i(e.zawodnik.nazwisko),1)]),l("div",Yo,[l("img",{src:e.qr_image,alt:`QR ${e.zawodnik.nr_startowy}`,class:"qr-code"},null,8,Xo)]),l("div",en,[l("div",an,i(e.zawodnik.kategoria),1),l("div",tn,i(e.zawodnik.klub||""),1)])])))),128))])])])])):d("",!0)]))}}),[["__scopeId","data-v-926ab205"]]),ln={class:"p-4 sm:p-6"},sn={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},on={class:"flex items-center space-x-3"},nn={class:"text-sm bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full"},dn={class:"flex items-center space-x-3"},un=["disabled"],cn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},gn={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800"},pn={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},yn={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800"},xn={class:"text-2xl font-bold text-green-600 dark:text-green-400"},vn={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800"},kn={class:"flex items-center space-x-2"},bn={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},mn={key:0,class:"animate-spin"},wn={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800"},fn={class:"flex items-center space-x-2"},hn={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},zn={key:0,class:"animate-pulse"},_n={key:1,class:"animate-spin"},jn={class:"text-sm text-purple-700 dark:text-purple-300"},Sn={key:0,class:"text-xs text-orange-600"},Cn={key:1,class:"text-xs text-blue-600"},An={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},In={class:"space-y-6"},On={key:0,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},Zn={class:"flex items-center justify-between"},qn={class:"flex items-center space-x-3"},Dn={class:"font-medium text-green-800 dark:text-green-200"},Kn={key:0,class:"text-xs text-orange-600"},Nn={key:1,class:"text-xs text-blue-600"},Pn={class:"text-sm text-green-700 dark:text-green-300"},Un=["disabled"],Rn={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},Fn={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700"},En={class:"text-lg font-semibold text-gray-900 dark:text-white"},Qn={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},$n={key:1,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Wn={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto"},Tn={class:"flex items-center justify-between"},Mn={class:"flex items-center space-x-3"},Bn={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},Vn={class:"text-blue-600 dark:text-blue-400 font-bold text-sm"},Gn={class:"font-medium text-gray-900 dark:text-white text-sm"},Ln={class:"text-xs text-gray-600 dark:text-gray-400"},Jn=["onClick","disabled"],Hn={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},Yn={class:"text-xs text-gray-600 dark:text-gray-400"},Xn=["onClick"],ei={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4"},ai={class:"flex flex-wrap gap-2"},ti={class:"space-y-6"},ri={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},li={class:"text-center"},si={class:"w-16 h-16 mx-auto mb-4 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center"},oi={class:"max-w-md mx-auto"},ni={class:"flex space-x-2"},ii=["disabled"],di={key:0,class:"mb-6"},ui={class:"flex items-start space-x-3"},ci={class:"flex-1"},gi={class:"text-sm opacity-90"},pi={class:"flex space-x-2 mt-3"},yi={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},xi={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 flex items-center justify-between"},vi={class:"text-lg font-semibold text-gray-900 dark:text-white"},ki={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},bi={key:0,class:"text-blue-600 dark:text-blue-400"},mi={key:1,class:"text-orange-600 dark:text-orange-400"},wi={class:"flex items-center space-x-2"},fi={key:0,class:"text-xs text-blue-600 dark:text-blue-400 flex items-center space-x-1"},hi={key:1,class:"text-xs text-orange-600 dark:text-orange-400 flex items-center space-x-1"},zi={key:2,class:"text-xs text-orange-600 dark:text-orange-400 flex items-center space-x-1"},_i={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},ji={class:"text-lg font-medium mb-1"},Si={key:0},Ci={key:1},Ai={key:1,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Ii={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto"},Oi={class:"flex items-center space-x-3"},Zi={class:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},qi={class:"text-blue-600 dark:text-blue-400 font-bold text-xs"},Di={class:"font-medium text-gray-900 dark:text-white text-sm"},Ki={key:0,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},Ni={key:1,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Pi={key:2,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},Ui={class:"text-xs text-gray-500 dark:text-gray-400"},Ri=["onClick"],Fi=e({__name:"StartLineScanner",setup(e){const v=p({loading:!1,error:null,lastUpdate:null,optimisticActiveGroupId:null,syncingData:!1,syncingQueue:!1,activatingGroupId:null}),m=p([]),w=p(null),f=p([]),z=p(null),j=p(""),C=p(null),A=p("30.5.0");a((()=>m.value.reduce(((e,a)=>e+a.liczba_zawodnikow),0)));const I=a((()=>m.value.length)),O=a((()=>m.value.reduce(((e,a)=>e+a.liczba_zawodnikow),0))),Z=a((()=>({total:f.value.length,skanowani:f.value.filter((e=>"SKANOWANY"===e.source_type)).length,aktywnaGrupa:f.value.filter((e=>"AKTYWNA_GRUPA"===e.source_type)).length}))),q=async()=>{if(v.value.activatingGroupId)return;const e=w.value;w.value=null,v.value.optimisticActiveGroupId=null,v.value.activatingGroupId=-1;try{if(!(await fetch("/api/grupa-aktywna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})).ok)throw new Error("Błąd czyszczenia grupy");setTimeout((async()=>{v.value.syncingData=!0;try{await D("po wyczyszczeniu grupy")}finally{v.value.syncingData=!1}}),500)}catch(a){w.value=e,v.value.optimisticActiveGroupId=(null==e?void 0:e.numer_grupy)||null,v.value.error=a.message}finally{v.value.activatingGroupId=null}},D=async(e="manual")=>{if("manual"===e){if(v.value.loading)return;v.value.loading=!0}else e.includes("kolejka")||e.includes("queue")?v.value.syncingQueue=!0:v.value.syncingData=!0;v.value.error=null;try{if(!A.value||"30.5.0"===A.value)try{const e=await fetch("/api/version");if(e.ok){const a=await e.json();A.value=a.version||"30.4.0"}}catch(a){}const e=await fetch(`/api/grupy-startowe?_t=${Date.now()}`);if(!e.ok)throw new Error("Błąd ładowania grup");const t=await e.json();m.value=t.grupy||[];try{const e=await fetch(`/api/grupa-aktywna?_t=${Date.now()}`);if(e.ok){const a=await e.json();if(a.success&&a.aktywna_grupa){const e=a.aktywna_grupa;w.value=m.value.find((a=>a.kategoria===e.kategoria&&a.plec===e.plec))||null}else w.value=null}else w.value=null}catch(a){v.value.optimisticActiveGroupId||(w.value=null)}const r=await fetch(`/api/start-queue?_t=${Date.now()}`);if(!r.ok)throw new Error("Błąd ładowania kolejki");const l=await r.json();f.value=l.queue||[],v.value.lastUpdate=new Date}catch(t){v.value.error=t.message}finally{"manual"===e&&(v.value.loading=!1),v.value.syncingData=!1,v.value.syncingQueue=!1}},P=async()=>{var e,a;if(j.value&&!v.value.loading){v.value.loading=!0;try{const t=await fetch("/api/start-line-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qr_code:j.value,kategoria:null==(e=w.value)?void 0:e.kategoria,plec:null==(a=w.value)?void 0:a.plec,device_id:"start-line-scanner-v30.4"})});if(t.ok){const e=await t.json();C.value=e,j.value="",await D("po skanie QR")}else{const e=await t.json();C.value={success:!1,action:"ODRZUC",issues:[e.error||"Nieznany błąd"],zawodnik:{},komunikat:"❌ Błąd weryfikacji"}}}catch(t){C.value={success:!1,action:"ODRZUC",issues:["Błąd połączenia z serwerem"],zawodnik:{},komunikat:"❌ Błąd połączenia"}}finally{v.value.loading=!1}}},R=async e=>{v.value.loading=!0;try{if(!(await fetch("/api/start-queue/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})})).ok)throw new Error("Błąd czyszczenia kolejki");await D("po czyszczeniu kolejki")}catch(a){}finally{v.value.loading=!1}},Q=()=>{C.value=null},$=()=>{C.value=null},W=e=>{switch(e){case"AKCEPTUJ":return"bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800";case"OSTRZEZENIE":return"bg-orange-100 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800";case"ODRZUC":return"bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800";default:return"bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600"}},T=e=>{switch(e){case"AKCEPTUJ":return"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white";case"OSTRZEZENIE":return"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center text-white";case"ODRZUC":return"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white";default:return"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white"}},M=e=>{switch(e){case"AKCEPTUJ":return"text-green-800 dark:text-green-200";case"OSTRZEZENIE":return"text-orange-800 dark:text-orange-200";case"ODRZUC":return"text-red-800 dark:text-red-200";default:return"text-gray-800 dark:text-gray-200"}},G=e=>{switch(e){case"AKCEPTUJ":return B;case"OSTRZEZENIE":return K;case"ODRZUC":return V;default:return E}},H=a((()=>v.value.optimisticActiveGroupId&&m.value.find((e=>e.numer_grupy===v.value.optimisticActiveGroupId))||w.value)),Y=e=>{var a;const t=(null==(a=H.value)?void 0:a.numer_grupy)===e.numer_grupy,r=v.value.activatingGroupId===e.numer_grupy,l=null!==v.value.activatingGroupId;return{isActive:t,isActivating:r,isDisabled:t||l,text:t?"Aktywna":r?"Aktywuję...":"Aktywuj",showSpinner:r}};return y((async()=>{await D("inicjalizacja")})),_((()=>{})),(e,a)=>(r(),t("div",ln,[l("div",sn,[l("div",on,[u(c(E),{class:"h-8 w-8 text-green-600"}),a[4]||(a[4]=l("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Centrum Startu",-1)),l("span",nn," v"+i(A.value),1)]),l("div",dn,[a[6]||(a[6]=l("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[g(" Scanner: "),l("span",{class:"text-green-600"}," 🟢 Aktywny ")],-1)),l("button",{onClick:a[0]||(a[0]=e=>D("manual")),disabled:v.value.loading,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm font-medium transition-colors duration-200"},[u(c(F),{class:o(["h-5 w-5",{"animate-spin":v.value.loading}])},null,8,["class"]),a[5]||(a[5]=l("span",null,"Odśwież wszystko",-1))],8,un)])]),l("div",cn,[l("div",gn,[l("div",pn,i(I.value),1),a[7]||(a[7]=l("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Grup startowych",-1))]),l("div",yn,[l("div",xn,i(O.value),1),a[8]||(a[8]=l("div",{class:"text-sm text-green-700 dark:text-green-300"},"Zameldowanych",-1))]),l("div",vn,[l("div",kn,[l("div",bn,i(Z.value.total),1),v.value.loading?(r(),t("div",mn,[u(c(F),{class:"h-4 w-4 text-orange-500"})])):d("",!0)]),a[9]||(a[9]=l("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"W kolejce",-1))]),l("div",wn,[l("div",fn,[l("div",hn,i(H.value?H.value.numer_grupy:"-"),1),v.value.activatingGroupId?(r(),t("div",zn,a[10]||(a[10]=[l("div",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1)]))):v.value.syncingData?(r(),t("div",_n,[u(c(F),{class:"h-4 w-4 text-purple-500"})])):d("",!0)]),l("div",jn,[a[11]||(a[11]=g(" Aktywna grupa ")),v.value.activatingGroupId?(r(),t("span",Sn,"(aktywuję...)")):v.value.syncingData?(r(),t("span",Cn,"(sync...)")):d("",!0)])])]),l("div",An,[l("div",In,[H.value?(r(),t("div",On,[l("div",Zn,[l("div",qn,[u(c(N),{class:"h-6 w-6 text-green-600 dark:text-green-400"}),l("div",null,[l("h4",Dn,[g(i(H.value.nazwa)+" ",1),v.value.activatingGroupId?(r(),t("span",Kn,"(aktywuję...)")):v.value.syncingData?(r(),t("span",Nn,"(sync...)")):d("",!0)]),l("p",Pn,i(H.value.liczba_zawodnikow)+" zawodników ",1)])]),l("button",{onClick:q,disabled:v.value.activatingGroupId,class:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200 p-1 disabled:opacity-50 disabled:cursor-not-allowed"},[u(c(U),{class:"h-5 w-5"})],8,Un)])])):d("",!0),l("div",Rn,[l("div",Fn,[l("h3",En," Grupy startowe ("+i(I.value)+") ",1)]),v.value.loading?(r(),t("div",Qn,[u(c(F),{class:"h-8 w-8 animate-spin mx-auto mb-2"}),a[12]||(a[12]=l("div",null,"Ładowanie grup...",-1))])):0===m.value.length?(r(),t("div",$n,a[13]||(a[13]=[l("div",{class:"text-4xl mb-2"},"🏁",-1),l("div",{class:"text-lg font-medium mb-1"},"Brak grup startowych",-1),l("div",{class:"text-sm"},"Upewnij się że zawodnicy są zameldowani",-1)]))):(r(),t("div",Wn,[(r(!0),t(k,null,b(m.value,(e=>(r(),t("div",{key:e.numer_grupy,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[l("div",Tn,[l("div",Mn,[l("div",Bn,[l("span",Vn,i(e.numer_grupy),1)]),l("div",null,[l("h4",Gn,i(e.nazwa),1),l("p",Ln,i(e.liczba_zawodnikow)+" zawodników • ~"+i(Math.round(e.estimated_time/60))+" min ",1)])]),l("button",{onClick:a=>(async e=>{if(e&&!v.value.activatingGroupId){v.value.optimisticActiveGroupId=e.numer_grupy,v.value.activatingGroupId=e.numer_grupy,v.value.error=null;try{const t=await fetch("/api/grupa-aktywna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numer_grupy:e.numer_grupy,kategoria:e.kategoria,plec:e.plec,nazwa:e.nazwa})});if(!t.ok){const e=await t.text();throw new Error(`Backend error: ${t.status} - ${e}`)}w.value=e,v.value.syncingData=!0;try{await D("po aktywacji grupy"),v.value.optimisticActiveGroupId=null}catch(a){}finally{v.value.syncingData=!1}}catch(a){v.value.optimisticActiveGroupId=null,v.value.error=a.message}finally{v.value.activatingGroupId=null}}})(e),disabled:Y(e).isDisabled,class:o(["inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-sm border",Y(e).isActive?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 cursor-not-allowed":Y(e).isActivating?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-800 dark:text-orange-200 cursor-not-allowed":"bg-blue-600 border-blue-600 text-white hover:bg-blue-700 hover:border-blue-700 hover:shadow-md active:transform active:scale-95"])},[Y(e).isActive?(r(),s(c(B),{key:0,class:"h-4 w-4"})):Y(e).isActivating?(r(),s(c(F),{key:1,class:"h-4 w-4 animate-spin"})):(r(),s(c(L),{key:2,class:"h-4 w-4"})),l("span",null,i(Y(e).text),1)],10,Jn)]),z.value===e.numer_grupy?(r(),t("div",Hn,[l("div",Yn,[a[14]||(a[14]=l("strong",null,"Zawodnicy:",-1)),g(" "+i(e.numery_startowe),1)])])):d("",!0),l("button",{onClick:a=>{return t=e.numer_grupy,void(z.value=z.value===t?null:t);var t},class:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200"},i(z.value===e.numer_grupy?"Ukryj szczegóły":"Pokaż szczegóły"),9,Xn)])))),128))]))]),l("div",ei,[a[15]||(a[15]=l("h4",{class:"font-medium text-gray-900 dark:text-white mb-3"},"Zarządzanie kolejką",-1)),l("div",ai,[l("button",{onClick:a[1]||(a[1]=e=>R("all")),class:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium"}," Wyczyść kolejkę "),l("button",{onClick:a[2]||(a[2]=e=>R("scanned")),class:"px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm font-medium"}," Usuń skanowanych ")])])]),l("div",ti,[l("div",ri,[l("div",li,[l("div",si,[u(c(E),{class:"h-8 w-8 text-green-600 dark:text-green-400"})]),a[16]||(a[16]=l("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," QR Scanner ",-1)),a[17]||(a[17]=l("p",{class:"text-gray-600 dark:text-gray-400 mb-4 text-sm"}," Zeskanuj QR kod lub wpisz numer startowy ",-1)),l("div",oi,[l("div",ni,[x(l("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>j.value=e),onKeyup:S(P,["enter"]),type:"text",placeholder:"QR kod lub nr startowy...",class:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},null,544),[[h,j.value]]),l("button",{onClick:P,disabled:!j.value||v.value.loading,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm"},i(v.value.loading?"⏳":"Skanuj"),9,ii)])])])]),C.value?(r(),t("div",di,[l("div",{class:o([W(C.value.action),"rounded-lg p-4"])},[l("div",ui,[l("div",{class:o(T(C.value.action))},[(r(),s(n(G(C.value.action)),{class:"h-6 w-6"}))],2),l("div",ci,[l("h4",{class:o(["font-semibold mb-2",M(C.value.action)])},i(C.value.komunikat),3),l("div",gi,[a[18]||(a[18]=l("strong",null,"Nr:",-1)),g(" "+i(C.value.zawodnik.nr_startowy)+" • ",1),a[19]||(a[19]=l("strong",null,"Imię:",-1)),g(" "+i(C.value.zawodnik.imie)+" "+i(C.value.zawodnik.nazwisko),1)]),l("div",pi,["AKCEPTUJ"===C.value.action?(r(),t("button",{key:0,onClick:Q,class:"px-3 py-1 bg-white text-green-800 rounded-md hover:bg-green-50 text-sm font-medium border border-green-200"}," ✅ Potwierdź ")):d("",!0),l("button",{onClick:$,class:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md text-sm font-medium border border-white/30"}," Wyczyść ")])])])],2)])):d("",!0),l("div",yi,[l("div",xi,[l("div",null,[l("h3",vi," Kolejka startowa ("+i(H.value?H.value.nazwa:`${f.value.length} zawodników`)+") ",1),H.value?(r(),t("div",ki,[g(i(f.value.length)+" zawodników w kolejce ",1),v.value.syncingQueue?(r(),t("span",bi,"• synchronizuję...")):v.value.syncingData?(r(),t("span",mi,"• ładuję dane...")):d("",!0)])):d("",!0)]),l("div",wi,[v.value.syncingQueue?(r(),t("div",fi,[u(c(F),{class:"h-3 w-3 animate-spin"}),a[20]||(a[20]=l("span",null,"Sync kolejki",-1))])):v.value.syncingData?(r(),t("div",hi,[u(c(F),{class:"h-3 w-3 animate-spin"}),a[21]||(a[21]=l("span",null,"Sync danych",-1))])):v.value.loading?(r(),t("div",zi,[u(c(F),{class:"h-3 w-3 animate-spin"}),a[22]||(a[22]=l("span",null,"Sync...",-1))])):d("",!0)])]),v.value.syncingQueue||v.value.syncingData?(r(),t("div",_i,[u(c(F),{class:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-500"}),l("div",ji,[v.value.syncingQueue?(r(),t("span",Si,"Synchronizuję kolejkę...")):(r(),t("span",Ci,"Ładuję dane..."))]),a[23]||(a[23]=l("div",{class:"text-sm"},"Aktualny stan może się zmienić",-1))])):0===f.value.length?(r(),t("div",Ai,a[24]||(a[24]=[l("div",{class:"text-4xl mb-2"},"🏁",-1),l("div",{class:"text-lg font-medium mb-1"},"Kolejka pusta",-1),l("div",{class:"text-sm"},"Zawodnicy pojawią się po skanowaniu lub aktywacji grupy",-1)]))):(r(),t("div",Ii,[(r(!0),t(k,null,b(f.value,((e,a)=>(r(),t("div",{key:e.nr_startowy,class:"p-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700"},[l("div",Oi,[l("div",Zi,[l("span",qi,i(a+1),1)]),l("div",null,[l("p",Di,[g(" #"+i(e.nr_startowy)+" "+i(e.imie)+" "+i(e.nazwisko)+" ",1),"AKTYWNA_GRUPA"===e.source_type?(r(),t("span",Ki," Grupa ")):"SKANOWANY"===e.source_type?(r(),t("span",Ni," Skan ")):"AKTYWNA_GRUPA_I_SKANOWANY"===e.source_type?(r(),t("span",Pi," Grupa+Skan ")):d("",!0)]),l("p",Ui,i(e.kategoria)+" "+i(e.plec)+" - "+i(e.klub),1)])]),l("button",{onClick:a=>(async e=>{const a=[...f.value];f.value=f.value.filter((a=>a.nr_startowy!==e.nr_startowy));try{const a=await fetch(`/api/start-queue/remove/${e.nr_startowy}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!a.ok){const e=await a.json();throw new Error(e.message||"Błąd usuwania")}setTimeout((async()=>{v.value.syncingQueue=!0;try{const e=await fetch(`/api/start-queue?_t=${Date.now()}`);if(e.ok){const a=await e.json();f.value=a.queue||[]}}finally{v.value.syncingQueue=!1}}),1e3)}catch(t){f.value=a}})(e),class:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 hover:bg-red-50 dark:hover:bg-red-900/20 rounded"},[u(c(J),{class:"h-4 w-4"})],8,Ri)])))),128))]))])])])]))}}),Ei={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},Qi={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200"},$i={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Wi={class:"flex justify-between items-center h-16"},Ti={class:"flex items-center flex-shrink-0"},Mi={class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white transition-colors duration-200"},Bi={key:0,class:"ml-1 sm:ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"},Vi={class:"hidden sm:block flex-1 max-w-lg mx-8"},Gi={class:"relative"},Li={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ji={class:"flex items-center space-x-2 sm:space-x-4"},Hi={class:"flex items-center space-x-1 sm:space-x-2"},Yi={class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200"},Xi=["title"],ed={class:"w-7 h-7 sm:w-8 sm:h-8 bg-indigo-500 rounded-full flex items-center justify-center"},ad={class:"text-white text-xs sm:text-sm font-medium"},td={class:"pb-4 sm:hidden"},rd={class:"relative"},ld={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},sd={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},od={class:"border-b border-gray-200 dark:border-gray-700"},nd={class:"-mb-px flex flex-wrap gap-x-4 gap-y-2 sm:space-x-8 sm:gap-y-0","aria-label":"Tabs"},id=["onClick"],dd={class:"text-xs sm:text-sm"},ud={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},cd={key:0,class:"space-y-6"},gd={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},pd={class:"bg-white dark:bg-gray-800 shadow rounded-lg transition-colors duration-200"},yd={class:"px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700"},xd={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},vd=["value"],kd=["value"],bd={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},md={class:"flex flex-wrap gap-3"},wd=["disabled"],fd=["disabled"],hd=["disabled"],zd=["disabled"],_d={class:"md:hidden p-4 space-y-4"},jd={class:"hidden md:block overflow-x-auto"},Sd={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Cd={class:"bg-gray-50 dark:bg-gray-700"},Ad={class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Id=["checked"],Od={key:0,class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Zd={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},qd={class:"px-6 py-4 whitespace-nowrap"},Dd=["checked","onChange"],Kd={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},Nd={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},Pd={class:"px-6 py-4 whitespace-nowrap"},Ud={class:"text-base font-medium text-gray-900 dark:text-white"},Rd={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},Fd={class:"px-6 py-4 whitespace-nowrap"},Ed={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},Qd={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},$d={class:"flex flex-col space-y-2"},Wd=["onClick"],Td={key:1},Md={key:2},Bd={key:3},Vd={key:4},Gd={key:5};C(e({__name:"App",setup(e){const m=p([]),w=p(""),f=p(!0),_=p("true"===localStorage.getItem("darkMode")),j=p(!0);p(null);const S=p(!1),C=p(null),I=p("zawodnicy"),O=p({kluby:[],kategorie:[],plcie:[],statusy:[]}),Z=p({kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"}),K=p([]),P=[{id:"zawodnicy",name:"Zawodnicy",icon:N,adminOnly:!1},{id:"drabinka",name:"Drabinka",icon:D,adminOnly:!1},{id:"rankingi",name:"Rankingi",icon:H,adminOnly:!1},{id:"start-line",name:"Centrum Startu",icon:E,adminOnly:!0},{id:"qr-print",name:"Drukowanie QR",icon:G,adminOnly:!0},{id:"qr-dashboard",name:"QR Dashboard",icon:E,adminOnly:!0}],U=a((()=>{let e=m.value;if(w.value){const a=w.value.toLowerCase();e=e.filter((e=>e.imie.toLowerCase().includes(a)||e.nazwisko.toLowerCase().includes(a)||e.kategoria.toLowerCase().includes(a)||e.nr_startowy.toString().includes(a)||e.klub.toLowerCase().includes(a)))}return Z.value.kategoria&&(e=e.filter((e=>e.kategoria===Z.value.kategoria))),Z.value.klub&&(e=e.filter((e=>e.klub===Z.value.klub))),"z_qr"===Z.value.statusQr?e=e.filter((e=>e.qr_code)):"bez_qr"===Z.value.statusQr&&(e=e.filter((e=>!e.qr_code))),"nr_startowy_asc"===Z.value.sortowanie?e.sort(((e,a)=>e.nr_startowy-a.nr_startowy)):"nr_startowy_desc"===Z.value.sortowanie?e.sort(((e,a)=>a.nr_startowy-e.nr_startowy)):"nazwisko_asc"===Z.value.sortowanie?e.sort(((e,a)=>`${e.nazwisko} ${e.imie}`.localeCompare(`${a.nazwisko} ${a.imie}`))):"nazwisko_desc"===Z.value.sortowanie?e.sort(((e,a)=>`${a.nazwisko} ${a.imie}`.localeCompare(`${e.nazwisko} ${e.imie}`))):"kategoria_asc"===Z.value.sortowanie?e.sort(((e,a)=>e.kategoria.localeCompare(a.kategoria))):"klub_asc"===Z.value.sortowanie?e.sort(((e,a)=>e.klub.localeCompare(a.klub))):"czas_asc"===Z.value.sortowanie?e.sort(((e,a)=>e.czas_przejazdu_s||a.czas_przejazdu_s?e.czas_przejazdu_s?a.czas_przejazdu_s?e.czas_przejazdu_s-a.czas_przejazdu_s:-1:1:0)):"czas_desc"===Z.value.sortowanie&&e.sort(((e,a)=>e.czas_przejazdu_s||a.czas_przejazdu_s?e.czas_przejazdu_s?a.czas_przejazdu_s?a.czas_przejazdu_s-e.czas_przejazdu_s:-1:1:0)),e})),R=a((()=>{const e=m.value.length,a=m.value.filter((e=>"FINISHED"===e.status)).length,t=m.value.filter((e=>"DNF"===e.status||"DSQ"===e.status)).length,r=m.value.filter((e=>"FINISHED"===e.status&&e.czas_przejazdu_s));let l="-",s="-";if(r.length>0){const e=r.reduce(((e,a)=>a.czas_przejazdu_s<e.czas_przejazdu_s?a:e));l=L(e.czas_przejazdu_s),s=`${e.imie} ${e.nazwisko}`}return{total:e,finished:a,dnfDsq:t,recordTime:l,recordHolder:s}})),F=a((()=>[...new Set(m.value.map((e=>e.klub)))])),Q=a((()=>[...new Set(m.value.map((e=>e.kategoria)))])),$=a((()=>P.filter((e=>!e.adminOnly||f.value)))),W=a((()=>U.value.length>0&&U.value.every((e=>K.value.includes(e.nr_startowy))))),T=a((()=>{if(!Z.value.kategoria)return!1;const e=U.value.filter((e=>e.kategoria===Z.value.kategoria));return e.length>0&&e.every((e=>K.value.includes(e.nr_startowy)))})),M=a((()=>{if(!Z.value.klub)return!1;const e=U.value.filter((e=>e.klub===Z.value.klub));return e.length>0&&e.every((e=>K.value.includes(e.nr_startowy)))})),B=a((()=>{const e=U.value.filter((e=>!e.qr_code));return e.length>0&&e.every((e=>K.value.includes(e.nr_startowy)))})),V=a((()=>U.value.filter((e=>!e.qr_code)).length));a((()=>{let e=m.value;if(w.value){const a=w.value.toLowerCase();e=e.filter((e=>e.imie.toLowerCase().includes(a)||e.nazwisko.toLowerCase().includes(a)||e.kategoria.toLowerCase().includes(a)||e.nr_startowy.toString().includes(a)||e.klub.toLowerCase().includes(a)))}return O.value.kluby.length>0&&(e=e.filter((e=>O.value.kluby.includes(e.klub)))),O.value.kategorie.length>0&&(e=e.filter((e=>O.value.kategorie.includes(e.kategoria)))),O.value.plcie.length>0&&(e=e.filter((e=>O.value.plcie.includes(e.plec)))),O.value.statusy.length>0&&(e=e.filter((e=>O.value.statusy.includes(e.status)))),e}));const L=e=>`${Math.floor(e/60)}:${(e%60).toFixed(2).padStart(5,"0")}`,J=async()=>{try{j.value=!0;const e=await A.get("/api/zawodnicy");m.value=e.data}catch(e){}finally{j.value=!1}},te=()=>{f.value=!f.value},re=()=>{_.value=!_.value,localStorage.setItem("darkMode",_.value.toString()),_.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},le=e=>{C.value=e,S.value=!0},se=()=>{S.value=!1,C.value=null},oe=()=>{J(),_.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ne=()=>{J(),_.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ie=()=>{Z.value={kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"},K.value=[]},de=()=>{if(W.value){const e=U.value.map((e=>e.nr_startowy));K.value=K.value.filter((a=>!e.includes(a)))}else{const e=U.value.map((e=>e.nr_startowy)),a=[...new Set([...K.value,...e])];K.value=a}},ge=()=>{if(!Z.value.kategoria)return;const e=U.value.filter((e=>e.kategoria===Z.value.kategoria)).map((e=>e.nr_startowy));if(T.value)K.value=K.value.filter((a=>!e.includes(a)));else{const a=[...new Set([...K.value,...e])];K.value=a}},pe=()=>{if(!Z.value.klub)return;const e=U.value.filter((e=>e.klub===Z.value.klub)).map((e=>e.nr_startowy));if(M.value)K.value=K.value.filter((a=>!e.includes(a)));else{const a=[...new Set([...K.value,...e])];K.value=a}},ye=()=>{const e=U.value.filter((e=>!e.qr_code)).map((e=>e.nr_startowy));if(B.value)K.value=K.value.filter((a=>!e.includes(a)));else{const a=[...new Set([...K.value,...e])];K.value=a}},xe=()=>{K.value=[]};return y((()=>{J(),_.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})),(e,a)=>(r(),t("div",Ei,[l("header",Qi,[l("div",$i,[l("div",Wi,[l("div",Ti,[l("h1",Mi,[a[7]||(a[7]=l("span",{class:"hidden sm:inline"},"SKATECROSS Dashboard",-1)),a[8]||(a[8]=l("span",{class:"sm:hidden"},"SKATECROSS",-1)),f.value?(r(),t("span",Bi,a[6]||(a[6]=[g(" 🔧 "),l("span",{class:"hidden sm:inline ml-1"},"ADMIN",-1)]))):d("",!0)])]),l("div",Vi,[l("div",Gi,[l("div",Li,[u(c(Y),{class:"h-5 w-5 text-gray-400"})]),x(l("input",{type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200 shadow-sm",placeholder:"Szukaj zawodników...","onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e)},null,512),[[h,w.value]])])]),l("div",Ji,[l("div",Hi,[a[9]||(a[9]=l("label",{class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:inline"},"Admin:",-1)),l("button",{onClick:te,class:o(["relative inline-flex h-5 w-9 sm:h-6 sm:w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",f.value?"bg-indigo-600":"bg-gray-200 dark:bg-gray-600"])},[l("span",{class:o(["pointer-events-none inline-block h-4 w-4 sm:h-5 sm:w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",f.value?"translate-x-4 sm:translate-x-5":"translate-x-0"])},null,2)],2)]),l("button",Yi,[u(c(X),{class:"h-5 w-5 sm:h-6 sm:w-6"})]),l("button",{onClick:re,class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200 transition-colors duration-200",title:_.value?"Przełącz na tryb jasny":"Przełącz na tryb ciemny"},[_.value?(r(),s(c(ee),{key:0,class:"h-5 w-5 sm:h-6 sm:w-6"})):(r(),s(c(ae),{key:1,class:"h-5 w-5 sm:h-6 sm:w-6"}))],8,Xi),l("div",ed,[l("span",ad,i(f.value?"A":"U"),1)])])]),l("div",td,[l("div",rd,[l("div",ld,[u(c(Y),{class:"h-4 w-4 text-gray-400"})]),x(l("input",{type:"text",class:"block w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200",placeholder:"Szukaj zawodników...","onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e)},null,512),[[h,w.value]])])])])]),l("div",sd,[l("div",od,[l("nav",nd,[(r(!0),t(k,null,b($.value,(e=>(r(),t("button",{key:e.id,onClick:a=>I.value=e.id,class:o([I.value===e.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center"])},[(r(),s(n(e.icon),{class:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"})),l("span",dd,i(e.name),1)],10,id)))),128))])])]),l("main",ud,["zawodnicy"===I.value?(r(),t("div",cd,[l("div",gd,[u(ue,{title:"Łącznie zawodników",value:R.value.total.toString(),icon:"👥",color:"blue",subtitle:"Wszyscy zawodnicy"},null,8,["value"]),u(ue,{title:"Ukończyli trasę",value:R.value.finished.toString(),icon:"✅",color:"green",subtitle:"Status FINISHED"},null,8,["value"]),u(ue,{title:"DNF/DSQ",value:R.value.dnfDsq.toString(),icon:"⚠️",color:"yellow",subtitle:"Nie ukończyli"},null,8,["value"]),u(ue,{title:"Najlepszy czas",value:R.value.recordTime,icon:"🏆",color:"purple",subtitle:"-"!==R.value.recordHolder?`Rekord: ${R.value.recordHolder}`:""},null,8,["value","subtitle"])]),l("div",pd,[l("div",yd,[l("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4"},[a[10]||(a[10]=l("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),l("button",{onClick:ie,class:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md hover:bg-red-200 dark:hover:bg-red-800 transition-colors duration-200 flex items-center"}," 🗑️ Wyczyść filtry ")]),l("div",xd,[l("div",null,[a[12]||(a[12]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏆"),l("span",null,"Kategoria")])],-1)),x(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>Z.value.kategoria=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[11]||(a[11]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(Q.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,vd)))),128))],512),[[v,Z.value.kategoria]])]),l("div",null,[a[14]||(a[14]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🏢"),l("span",null,"Klub")])],-1)),x(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>Z.value.klub=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[13]||(a[13]=l("option",{value:""},"Wszystkie",-1)),(r(!0),t(k,null,b(F.value,(e=>(r(),t("option",{key:e,value:e},i(e),9,kd)))),128))],512),[[v,Z.value.klub]])]),l("div",null,[a[16]||(a[16]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"📱"),l("span",null,"Status QR")])],-1)),x(l("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>Z.value.statusQr=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[15]||(a[15]=[l("option",{value:""},"Wszystkie",-1),l("option",{value:"z_qr"},"Z kodem QR",-1),l("option",{value:"bez_qr"},"Bez kodu QR",-1)]),512),[[v,Z.value.statusQr]])]),l("div",null,[a[18]||(a[18]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"🔄"),l("span",null,"Sortowanie")])],-1)),x(l("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>Z.value.sortowanie=e),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[17]||(a[17]=[z('<option value="nr_startowy_asc">Nr startowy (rosnąco)</option><option value="nr_startowy_desc">Nr startowy (malejąco)</option><option value="nazwisko_asc">Nazwisko (A-Z)</option><option value="nazwisko_desc">Nazwisko (Z-A)</option><option value="kategoria_asc">Kategoria (A-Z)</option><option value="klub_asc">Klub (A-Z)</option><option value="czas_asc">Czas (najlepszy)</option><option value="czas_desc">Czas (najgorszy)</option>',8)]),512),[[v,Z.value.sortowanie]])])]),l("div",bd,[a[20]||(a[20]=l("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[l("span",{class:"flex items-center space-x-2"},[l("span",null,"⚡"),l("span",null,"Operacje grupowe")])],-1)),l("div",md,[l("button",{onClick:de,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",W.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[l("span",null,i(W.value?"✅":"☐"),1),l("span",null,i(W.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" ("+i(U.value.length)+")",1)],2),l("button",{onClick:ge,disabled:!Z.value.kategoria,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",Z.value.kategoria?T.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[l("span",null,i(Z.value.kategoria?T.value?"✅":"☐":"🏆"),1),l("span",null,i(Z.value.kategoria?T.value?`Odznacz: ${Z.value.kategoria}`:`Zaznacz: ${Z.value.kategoria}`:"Wybierz kategorię"),1)],10,wd),l("button",{onClick:pe,disabled:!Z.value.klub,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",Z.value.klub?M.value?"bg-purple-700 text-white shadow-inner border-purple-800":"bg-purple-600 text-white hover:bg-purple-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[l("span",null,i(Z.value.klub?M.value?"✅":"☐":"🏢"),1),l("span",null,i(Z.value.klub?M.value?`Odznacz: ${Z.value.klub}`:`Zaznacz: ${Z.value.klub}`:"Wybierz klub"),1)],10,fd),l("button",{onClick:ye,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",0===V.value?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":B.value?"bg-orange-700 text-white shadow-inner border-orange-800":"bg-orange-600 text-white hover:bg-orange-700 border-transparent"]),disabled:0===V.value},[l("span",null,i(B.value?"✅":"☐"),1),l("span",null,i(B.value?"Odznacz bez QR":"Zaznacz bez QR")+" ("+i(V.value)+")",1)],10,hd),l("button",{onClick:xe,disabled:0===K.value.length,class:o(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent",K.value.length>0?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[a[19]||(a[19]=l("span",null,"🗑️",-1)),l("span",null,"Wyczyść zaznaczenia ("+i(K.value.length)+")",1)],10,zd)])])]),l("div",_d,[(r(!0),t(k,null,b(U.value,(e=>(r(),s(je,{key:e.nr_startowy,zawodnik:e,isAdmin:f.value,onEdit:le},null,8,["zawodnik","isAdmin"])))),128))]),l("div",jd,[l("table",Sd,[l("thead",Cd,[l("tr",null,[l("th",Ad,[l("input",{type:"checkbox",checked:W.value,onChange:de,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,Id)]),a[21]||(a[21]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Nr startowy ",-1)),a[22]||(a[22]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Klub ",-1)),a[23]||(a[23]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zawodnik ",-1)),a[24]||(a[24]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria ",-1)),a[25]||(a[25]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status ",-1)),a[26]||(a[26]=l("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Czas ",-1)),f.value?(r(),t("th",Od," Akcje ")):d("",!0)])]),l("tbody",Zd,[(r(!0),t(k,null,b(U.value,(e=>(r(),t("tr",{key:e.nr_startowy},[l("td",qd,[l("input",{type:"checkbox",checked:K.value.includes(e.nr_startowy),onChange:a=>(e=>{const a=K.value.indexOf(e);a>-1?K.value.splice(a,1):K.value.push(e)})(e.nr_startowy),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,Dd)]),l("td",Kd,i(e.nr_startowy),1),l("td",Nd,i(e.klub),1),l("td",Pd,[l("div",Ud,i(e.imie)+" "+i(e.nazwisko),1)]),l("td",Rd,i(e.kategoria),1),l("td",Fd,[u(ce,{status:e.status},null,8,["status"])]),l("td",Ed,i(e.czas_przejazdu_s?L(e.czas_przejazdu_s):"-"),1),f.value?(r(),t("td",Qd,[l("div",$d,[l("button",{onClick:a=>le(e),class:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors duration-200"},[u(c(q),{class:"h-3 w-3 mr-1"}),a[27]||(a[27]=g(" Edytuj "))],8,Wd)])])):d("",!0)])))),128))])])])])])):d("",!0),"drabinka"===I.value?(r(),t("div",Td,[u(ka)])):d("",!0),"rankingi"===I.value?(r(),t("div",Md,[u(hr)])):d("",!0),"start-line"===I.value?(r(),t("div",Bd,[u(Fi)])):d("",!0),"qr-dashboard"===I.value?(r(),t("div",Vd,[u(Ss)])):d("",!0),"qr-print"===I.value?(r(),t("div",Gd,[u(rn)])):d("",!0)]),u(Da,{show:S.value,zawodnik:C.value,onClose:se,onUpdated:oe,onDeleted:ne},null,8,["show","zawodnik"])]))}})).mount("#app");
