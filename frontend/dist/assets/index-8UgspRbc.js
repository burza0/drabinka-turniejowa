const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BR0oiPy3.js","assets/qrcode-NovMiFzP.js"])))=>i.map(i=>d[i]);
import{d as ve,b as O,c as r,o as s,a as e,e as xe,n as E,r as Re,t,f as Z,g as D,u as Q,h as ee,i as h,j as me,w as J,v as re,F as L,k as H,l as He,m as $e,p as Ve,q as pe,s as ne,x as qe,y as Se,z as Je,A as Ye}from"./vue-vendor-Cq_xe302.js";import{a as ye}from"./axios-vendor-xsH4HHeE.js";import{r as Ae,a as Xe,b as Pe,c as Ue,d as he,e as Ne,f as De,g as Ze,h as Le,i as Ce,j as _e,k as Ie,l as et,m as tt,n as at,o as st,p as rt,q as Me,s as Te,t as Be,u as ot,v as Ke,w as nt,x as lt,y as it}from"./heroicons-BmnY7bff.js";(function(){const M=document.createElement("link").relList;if(M&&M.supports&&M.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))p(u);new MutationObserver(u=>{for(const S of u)if(S.type==="childList")for(const I of S.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&p(I)}).observe(document,{childList:!0,subtree:!0});function g(u){const S={};return u.integrity&&(S.integrity=u.integrity),u.referrerPolicy&&(S.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?S.credentials="include":u.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function p(u){if(u.ep)return;u.ep=!0;const S=g(u);fetch(u.href,S)}})();const dt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-colors duration-200"},ut={class:"p-3 sm:p-5"},ct={class:"flex items-center"},gt={class:"flex-shrink-0"},pt={class:"ml-3 sm:ml-5 w-0 flex-1"},yt={class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},xt={class:"text-base sm:text-lg font-medium text-gray-900 dark:text-white"},vt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},ke=ve({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{},subtitle:{}},setup(K){const M=K,g=O(()=>({blue:"text-blue-400",green:"text-green-400",red:"text-red-400",purple:"text-purple-400",yellow:"text-yellow-400"})[M.color]);return(p,u)=>(s(),r("div",dt,[e("div",ut,[e("div",ct,[e("div",gt,[typeof p.icon!="string"?(s(),xe(Re(p.icon),{key:0,class:E([g.value,"h-5 w-5 sm:h-6 sm:w-6"])},null,8,["class"])):(s(),r("span",{key:1,class:E([g.value,"text-lg sm:text-xl"])},t(p.icon),3))]),e("div",pt,[e("dl",null,[e("dt",yt,t(p.title),1),e("dd",xt,t(p.value),1),p.subtitle?(s(),r("dd",vt,t(p.subtitle),1)):Z("",!0)])])])])]))}}),We=ve({__name:"StatusBadge",props:{status:{},checked_in:{type:Boolean}},setup(K){const M=K,g=O(()=>M.status?M.status:M.checked_in?"ZAMELDOWANY":"NIEZAMELDOWANY"),p=O(()=>{if(M.status)switch(M.status){case"FINISHED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"DNF":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"DSQ":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return M.checked_in?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"});return(u,S)=>(s(),r("span",{class:E([p.value,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},t(g.value),3))}}),bt={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-3 border border-gray-200 dark:border-gray-700 transition-colors duration-200"},mt={class:"flex items-center space-x-3 mb-2"},kt={class:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-base font-bold flex-shrink-0"},wt={class:"font-bold text-gray-900 dark:text-white leading-tight text-lg"},ft={class:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 mb-3 text-sm"},ht={class:"flex items-center space-x-1 min-w-0"},_t={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},zt={class:"flex items-center space-x-1 min-w-0 xs:flex-shrink-0"},$t={class:"font-medium text-gray-700 dark:text-gray-300 truncate"},Ct={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3"},jt={class:"flex items-center space-x-2"},St={class:"text-2xl font-bold text-gray-900 dark:text-white"},It={key:0,class:"flex space-x-2"},Mt=ve({__name:"ZawodnikCard",props:{zawodnik:{},isAdmin:{type:Boolean}},emits:["edit"],setup(K){const M=g=>{const p=Math.floor(g/60),u=(g%60).toFixed(2);return`${p}:${u.padStart(5,"0")}`};return(g,p)=>(s(),r("div",bt,[e("div",mt,[e("span",kt,t(g.zawodnik.nr_startowy),1),e("h3",wt,t(g.zawodnik.imie)+" "+t(g.zawodnik.nazwisko),1)]),e("div",ft,[e("div",ht,[D(Q(Ae),{class:"h-4 w-4 text-blue-500 dark:text-blue-400 flex-shrink-0"}),e("span",_t,t(g.zawodnik.klub),1)]),e("div",zt,[D(Q(Xe),{class:"h-4 w-4 text-green-500 dark:text-green-400 flex-shrink-0"}),e("span",$t,t(g.zawodnik.kategoria),1)])]),e("div",Ct,[e("div",jt,[D(Q(Pe),{class:"h-5 w-5 text-purple-500 dark:text-purple-400"}),e("span",St,t(g.zawodnik.czas_przejazdu_s?M(g.zawodnik.czas_przejazdu_s):"-"),1)]),D(We,{status:g.zawodnik.status,checked_in:g.zawodnik.checked_in},null,8,["status","checked_in"])]),g.isAdmin?(s(),r("div",It,[e("button",{onClick:p[0]||(p[0]=u=>g.$emit("edit",g.zawodnik)),class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 transition-colors duration-200"},[D(Q(Ue),{class:"h-3 w-3 mr-1"}),p[1]||(p[1]=ee(" Edytuj "))])])):Z("",!0)]))}}),Tt={class:"space-y-6"},Rt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},At={class:"flex items-center space-x-3"},Nt={key:0,class:"flex justify-center items-center h-64"},Zt={key:1,class:"bg-red-50 border border-red-200 rounded-md p-4"},Bt={class:"flex"},qt={class:"ml-3"},Pt={class:"mt-2 text-sm text-red-700"},Dt={key:2},Ot={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6"},Ft={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200 mb-6"},Gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Et=["value"],Kt={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Qt={class:"flex flex-wrap gap-3"},Vt={class:"mt-4 flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4"},Ut={class:"space-y-8"},Lt={class:"text-xl font-semibold text-gray-900 dark:text-white mb-6"},Wt={class:"space-y-8"},Ht={class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4"},Jt={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4"},Yt={class:"grid grid-cols-2 gap-4 text-sm"},Xt={class:"ml-1 text-gray-900 dark:text-white"},ea={class:"ml-1 text-gray-900 dark:text-white"},ta={key:1,class:"mb-6"},aa={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},sa={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},ra={class:"space-y-1"},oa={class:"text-xs"},na={key:2,class:"mb-6"},la={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ia={class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},da={class:"space-y-1"},ua={class:"text-xs"},ca={key:3,class:"mb-6"},ga={class:"border-2 border-yellow-300 dark:border-yellow-600 rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/20"},pa={class:"space-y-2"},ya={key:0},xa={key:1},va={key:2},ba={key:3},ma={class:"text-xs"},ka={key:4,class:"text-center py-8 text-gray-500 dark:text-gray-400"},wa=ve({__name:"DrabinkaPucharowa",setup(K){const M=h(null),g=h(!0),p=h(null),u=h({kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"}),S=h([]),I=h([]),T=O(()=>{if(!M.value)return{};const{podsumowanie:j,...k}=M.value;return k}),z=O(()=>Object.keys(T.value).sort()),F=O(()=>{var x;if(!M.value)return{};const{podsumowanie:j,...k}=M.value;let G={};if(u.value.kategoria)k[u.value.kategoria]&&(G[u.value.kategoria]=k[u.value.kategoria]);else for(const[$,V]of Object.entries(k))(S.value.length===0||S.value.includes($))&&(G[$]=V);if(u.value.plec||I.value.length>0){const $=u.value.plec||(I.value.length===1?I.value[0]:"");if($){const V={};for(const[U,le]of Object.entries(G)){const A={};for(const[b,N]of Object.entries(le))b===$&&(A[b]=N);Object.keys(A).length>0&&(V[U]=A)}G=V}}if(u.value.faza){const $=u.value.faza,V={};for(const[U,le]of Object.entries(G)){const A={};for(const[b,N]of Object.entries(le)){const ae={...N};$==="ćwierćfinały"?(delete ae.półfinały,delete ae.finał):$==="półfinały"?(delete ae.ćwierćfinały,delete ae.finał):$==="finał"&&(delete ae.ćwierćfinały,delete ae.półfinały),((x=ae[$])==null?void 0:x.length)>0&&(A[b]=ae)}Object.keys(A).length>0&&(V[U]=A)}G=V}const v=Object.keys(G).sort(($,V)=>{switch(u.value.sortowanie){case"kategoria_desc":return V.localeCompare($);case"zawodnikow_desc":return m(G[V])-m(G[$]);case"zawodnikow_asc":return m(G[$])-m(G[V]);default:return $.localeCompare(V)}}),n={};return v.forEach($=>{n[$]=G[$]}),n}),c=O(()=>S.value.length===z.value.length),_=O(()=>I.value.length===2||u.value.plec===""),y=O(()=>{let j=0;for(const k of Object.values(F.value))j+=m(k);return j}),m=j=>{var G,v;let k=0;for(const n of Object.values(j))if(typeof n=="object"&&n!==null){const x=["ćwierćfinały","półfinały","finał"];for(const $ of x)if(((G=n[$])==null?void 0:G.length)>0)for(const V of n[$])k+=((v=V.zawodnicy)==null?void 0:v.length)||0}return k},w=j=>{if(!j)return"-";const k=Math.floor(j/60),G=(j%60).toFixed(2);return`${k}:${G.padStart(5,"0")}`},P=()=>{u.value={kategoria:"",plec:"",faza:"",sortowanie:"kategoria_asc"},S.value=[],I.value=[]},Y=()=>{c.value?(S.value=[],u.value.kategoria=""):(S.value=[...z.value],u.value.kategoria="")},X=()=>{_.value?(I.value=["Mężczyźni"],u.value.plec="Mężczyźni"):(I.value=["Mężczyźni","Kobiety"],u.value.plec="")},q=()=>{u.value.faza==="finał"?u.value.faza="":u.value.faza="finał"},B=async()=>{try{g.value=!0,p.value=null;const j=await ye.get("/api/drabinka");M.value=j.data.data||j.data}catch{p.value="Nie udało się załadować drabinki turniejowej"}finally{g.value=!1}};return me(()=>{B()}),(j,k)=>{var G,v,n,x,$,V;return s(),r("div",Tt,[e("div",Rt,[e("div",At,[D(Q(he),{class:"h-8 w-8 text-yellow-600"}),k[4]||(k[4]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Drabinka Pucharowa SKATECROSS",-1))]),k[5]||(k[5]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," System turniejowy z grupami 4-osobowymi - do ćwierćfinałów awansuje maksymalnie 16 najlepszych zawodników ",-1))]),g.value?(s(),r("div",Nt,k[6]||(k[6]=[e("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-500"},null,-1)]))):p.value?(s(),r("div",Zt,[e("div",Bt,[D(Q(Ne),{class:"h-5 w-5 text-red-400"}),e("div",qt,[k[7]||(k[7]=e("h3",{class:"text-sm font-medium text-red-800"},"Błąd ładowania drabinki",-1)),e("p",Pt,t(p.value),1)])])])):(s(),r("div",Dt,[e("div",Ot,[D(ke,{title:"Zawodnicy w turnieju",value:((G=M.value.podsumowanie)==null?void 0:G.łączna_liczba_zawodników)||0,icon:Q(De),color:"blue"},null,8,["value","icon"]),D(ke,{title:"W ćwierćfinałach",value:((v=M.value.podsumowanie)==null?void 0:v.w_ćwierćfinałach)||0,icon:Q(he),color:"green"},null,8,["value","icon"]),D(ke,{title:"Mężczyźni",value:((x=(n=M.value.podsumowanie)==null?void 0:n.podział_płeć)==null?void 0:x.mężczyźni)||0,icon:Q(Ze),color:"purple"},null,8,["value","icon"]),D(ke,{title:"Kobiety",value:((V=($=M.value.podsumowanie)==null?void 0:$.podział_płeć)==null?void 0:V.kobiety)||0,icon:Q(Ze),color:"red"},null,8,["value","icon"])]),e("div",Ft,[e("div",{class:"flex items-center justify-between mb-6"},[k[9]||(k[9]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:P,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},k[8]||(k[8]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",Gt,[e("div",null,[k[11]||(k[11]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),J(e("select",{"onUpdate:modelValue":k[0]||(k[0]=U=>u.value.kategoria=U),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[k[10]||(k[10]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(z.value,U=>(s(),r("option",{key:U,value:U},t(U),9,Et))),128))],512),[[re,u.value.kategoria]])]),e("div",null,[k[13]||(k[13]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),J(e("select",{"onUpdate:modelValue":k[1]||(k[1]=U=>u.value.plec=U),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},k[12]||(k[12]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"Mężczyźni"},"Mężczyźni",-1),e("option",{value:"Kobiety"},"Kobiety",-1)]),512),[[re,u.value.plec]])]),e("div",null,[k[15]||(k[15]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🎯"),e("span",null,"Faza turnieju")])],-1)),J(e("select",{"onUpdate:modelValue":k[2]||(k[2]=U=>u.value.faza=U),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},k[14]||(k[14]=[e("option",{value:""},"Wszystkie fazy",-1),e("option",{value:"ćwierćfinały"},"Ćwierćfinały",-1),e("option",{value:"półfinały"},"Półfinały",-1),e("option",{value:"finał"},"Finał",-1)]),512),[[re,u.value.faza]])]),e("div",null,[k[17]||(k[17]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":k[3]||(k[3]=U=>u.value.sortowanie=U),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},k[16]||(k[16]=[e("option",{value:"kategoria_asc"},"Kategoria (A-Z)",-1),e("option",{value:"kategoria_desc"},"Kategoria (Z-A)",-1),e("option",{value:"zawodnikow_desc"},"Liczba zawodników (malejąco)",-1),e("option",{value:"zawodnikow_asc"},"Liczba zawodników (rosnąco)",-1)]),512),[[re,u.value.sortowanie]])])]),e("div",Kt,[k[20]||(k[20]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"⚡"),e("span",null,"Operacje grupowe")])],-1)),e("div",Qt,[e("button",{onClick:Y,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",c.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[e("span",null,t(c.value?"✅":"☐"),1),e("span",null,t(c.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" kategorie ("+t(z.value.length)+")",1)],2),e("button",{onClick:X,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",_.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent"])},[e("span",null,t(_.value?"✅":"☐"),1),e("span",null,t(_.value?"Tylko jedna płeć":"Obie płcie"),1)],2),e("button",{onClick:q,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",u.value.faza==="finał"?"bg-yellow-700 text-white shadow-inner border-yellow-800":"bg-yellow-600 text-white hover:bg-yellow-700 border-transparent"])},[k[18]||(k[18]=e("span",null,"🏆",-1)),e("span",null,t(u.value.faza==="finał"?"Pokaż wszystkie":"Tylko finały"),1)],2),e("button",{onClick:P,class:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent bg-gray-600 text-white hover:bg-gray-700"},k[19]||(k[19]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))])]),e("div",Vt,[e("div",null," Wyświetlane kategorie: "+t(Object.keys(F.value).length)+" z "+t(Object.keys(T.value).length),1),e("div",null," Łączna liczba zawodników: "+t(y.value),1)])]),e("div",Ut,[(s(!0),r(L,null,H(F.value,(U,le)=>(s(),r("div",{key:le,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},[e("h3",Lt,"🏆 "+t(le),1),e("div",Wt,[(s(!0),r(L,null,H(U,(A,b)=>{var N,ae,de,W,ue,ce;return J((s(),r("div",{key:b,class:"border-l-4 border-indigo-500 pl-4"},[e("h4",Ht,t(String(b)==="Mężczyźni"?"👨 Mężczyźni":"👩 Kobiety"),1),A.statystyki?(s(),r("div",Jt,[e("div",Yt,[e("div",null,[k[21]||(k[21]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Łącznie:",-1)),e("span",Xt,t(A.statystyki.łącznie_zawodników),1)]),e("div",null,[k[22]||(k[22]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"W ćwierćfinałach:",-1)),e("span",ea,t(A.statystyki.w_ćwierćfinałach),1)])])])):Z("",!0),((N=A.ćwierćfinały)==null?void 0:N.length)>0&&(!u.value.faza||u.value.faza==="ćwierćfinały")?(s(),r("div",ta,[k[23]||(k[23]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥇 Ćwierćfinały",-1)),e("div",aa,[(s(!0),r(L,null,H(A.ćwierćfinały,te=>(s(),r("div",{key:te.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[e("div",sa,"Grupa "+t(te.grupa)+" (awansuje "+t(te.awansują)+")",1),e("div",ra,[(s(!0),r(L,null,H(te.zawodnicy,(oe,ie)=>(s(),r("div",{key:oe.nr_startowy,class:E(["text-sm p-2 rounded",ie<te.awansują?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[ee(t(oe.nr_startowy)+". "+t(oe.imie)+" "+t(oe.nazwisko)+" ",1),e("div",oa,t(w(oe.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):Z("",!0),((ae=A.półfinały)==null?void 0:ae.length)>0&&(!u.value.faza||u.value.faza==="półfinały")?(s(),r("div",na,[k[24]||(k[24]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🥈 Półfinały",-1)),e("div",la,[(s(!0),r(L,null,H(A.półfinały,te=>(s(),r("div",{key:te.grupa,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-3"},[e("div",ia,"Grupa "+t(te.grupa)+" (awansuje "+t(te.awansują)+")",1),e("div",da,[(s(!0),r(L,null,H(te.zawodnicy,(oe,ie)=>(s(),r("div",{key:oe.nr_startowy,class:E(["text-sm p-2 rounded",ie<te.awansują?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 font-medium":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},[ee(t(oe.nr_startowy)+". "+t(oe.imie)+" "+t(oe.nazwisko)+" ",1),e("div",ua,t(w(oe.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):Z("",!0),((de=A.finał)==null?void 0:de.length)>0&&(!u.value.faza||u.value.faza==="finał")?(s(),r("div",ca,[k[25]||(k[25]=e("h5",{class:"font-medium text-gray-700 dark:text-gray-300 mb-3"},"🏆 Finał",-1)),e("div",ga,[(s(!0),r(L,null,H(A.finał,te=>(s(),r("div",{key:te.grupa},[e("div",pa,[(s(!0),r(L,null,H(te.zawodnicy,(oe,ie)=>(s(),r("div",{key:oe.nr_startowy,class:E(["text-sm p-3 rounded font-medium",ie===0?"bg-yellow-200 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-100":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[ie===0?(s(),r("span",ya,"🥇")):ie===1?(s(),r("span",xa,"🥈")):ie===2?(s(),r("span",va,"🥉")):(s(),r("span",ba,t(ie+1)+".",1)),ee(" "+t(oe.nr_startowy)+". "+t(oe.imie)+" "+t(oe.nazwisko)+" ",1),e("div",ma,t(w(oe.czas_przejazdu_s)),1)],2))),128))])]))),128))])])):Z("",!0),!((W=A.ćwierćfinały)!=null&&W.length)&&!((ue=A.półfinały)!=null&&ue.length)&&!((ce=A.finał)!=null&&ce.length)?(s(),r("div",ka,[D(Q(he),{class:"h-12 w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),k[26]||(k[26]=e("p",null,"Brak zawodników w tej kategorii",-1))])):Z("",!0)])),[[He,I.value.length===0||I.value.includes(String(b))||u.value.plec===""||u.value.plec===String(b)]])}),128))])]))),128))])]))])}}}),we=(K,M)=>{const g=K.__vccOpts||K;for(const[p,u]of M)g[p]=u;return g},fa=we(wa,[["__scopeId","data-v-cdc06006"]]),ha={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},_a={class:"relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-lg bg-white dark:bg-gray-800"},za={class:"flex justify-between items-center pb-4 border-b dark:border-gray-600"},$a={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ca={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Sa=["value"],Ia={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ma={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ta={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},Ra={class:"text-sm text-red-700"},Aa={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md"},Na={class:"text-sm text-green-700"},Za={class:"flex justify-end space-x-3 mt-6 pt-4 border-t dark:border-gray-600"},Ba=["disabled"],qa=ve({__name:"EditZawodnikModal",props:{show:{type:Boolean},zawodnik:{}},emits:["close","updated","deleted"],setup(K,{emit:M}){const g=K,p=M,u=h({nr_startowy:0,imie:"",nazwisko:"",kategoria:"",plec:"",klub:"",czas_przejazdu:"",status:""}),S=h(null),I=h(!1),T=h(""),z=h(""),F=h([]);me(async()=>{try{const m=await ye.get("/api/kluby");m.data&&m.data.nazwy_klubow&&m.data.nazwy_klubow.length>0?F.value=m.data.nazwy_klubow:g.zawodnik&&(F.value=[g.zawodnik.klub].filter(Boolean))}catch{g.zawodnik?F.value=[g.zawodnik.klub].filter(Boolean):F.value=[]}}),$e(()=>g.zawodnik,m=>{m&&g.show&&(S.value={...m},u.value={nr_startowy:m.nr_startowy,imie:m.imie,nazwisko:m.nazwisko,kategoria:m.kategoria,plec:m.plec,klub:m.klub||"",czas_przejazdu:c(m.czas_przejazdu_s),status:m.status||"DNF"},T.value="",z.value="")});const c=m=>{if(!m)return"";const w=Math.floor(m/60),P=(m%60).toFixed(3);return w>0?`${w}:${P.padStart(6,"0")}`:P},_=()=>p("close"),y=async()=>{var m,w;I.value=!0,T.value="",z.value="";try{if(S.value){const P=await ye.put(`/api/zawodnicy/${S.value.nr_startowy}`,{imie:u.value.imie,nazwisko:u.value.nazwisko,kategoria:u.value.kategoria,plec:u.value.plec,klub:u.value.klub});await ye.put("/api/wyniki",{nr_startowy:u.value.nr_startowy,czas_przejazdu_s:u.value.czas_przejazdu,status:u.value.status}),z.value="Zawodnik został zaktualizowany!"}else{const P=await ye.post("/api/zawodnicy",{nr_startowy:u.value.nr_startowy,imie:u.value.imie,nazwisko:u.value.nazwisko,kategoria:u.value.kategoria,plec:u.value.plec,klub:u.value.klub});await ye.put("/api/wyniki",{nr_startowy:u.value.nr_startowy,czas_przejazdu_s:u.value.czas_przejazdu,status:u.value.status}),z.value="Zawodnik został dodany!"}setTimeout(()=>{p("updated"),_()},1e3)}catch(P){T.value=((w=(m=P.response)==null?void 0:m.data)==null?void 0:w.error)||P.message||"Wystąpił błąd podczas zapisywania"}finally{I.value=!1}};return(m,w)=>m.show?(s(),r("div",ha,[e("div",_a,[e("div",za,[e("h3",$a,t(S.value?`Edycja zawodnika #${S.value.nr_startowy}`:"Dodaj nowego zawodnika"),1),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[D(Q(Le),{class:"h-6 w-6"})])]),e("form",{onSubmit:Ve(y,["prevent"]),class:"mt-4 text-xl space-y-6"},[e("div",Ca,[e("div",null,[w[9]||(w[9]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Imię",-1)),J(e("input",{"onUpdate:modelValue":w[0]||(w[0]=P=>u.value.imie=P),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[pe,u.value.imie]])]),e("div",null,[w[10]||(w[10]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nazwisko",-1)),J(e("input",{"onUpdate:modelValue":w[1]||(w[1]=P=>u.value.nazwisko=P),type:"text",required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[pe,u.value.nazwisko]])])]),e("div",ja,[e("div",null,[w[11]||(w[11]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Nr startowy",-1)),J(e("input",{"onUpdate:modelValue":w[2]||(w[2]=P=>u.value.nr_startowy=P),type:"number",required:"",min:"1",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[pe,u.value.nr_startowy,void 0,{number:!0}]])]),e("div",null,[w[14]||(w[14]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Klub",-1)),F.value.length>0?J((s(),r("select",{key:0,"onUpdate:modelValue":w[3]||(w[3]=P=>u.value.klub=P),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[w[12]||(w[12]=e("option",{value:"",disabled:""},"Wybierz klub...",-1)),(s(!0),r(L,null,H(F.value,P=>(s(),r("option",{key:P,value:P},t(P),9,Sa))),128))],512)),[[re,u.value.klub]]):(s(),r(L,{key:1},[J(e("input",{"onUpdate:modelValue":w[4]||(w[4]=P=>u.value.klub=P),type:"text",required:"",placeholder:"Wpisz klub",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[pe,u.value.klub]]),w[13]||(w[13]=e("p",{class:"text-xs text-red-500 mt-1"},"Brak klubów w bazie! Wpisz ręcznie.",-1))],64))])]),e("div",Ia,[e("div",null,[w[16]||(w[16]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Płeć",-1)),J(e("select",{"onUpdate:modelValue":w[5]||(w[5]=P=>u.value.plec=P),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},w[15]||(w[15]=[e("option",{value:"M"},"👨 Mężczyzna",-1),e("option",{value:"K"},"👩 Kobieta",-1)]),512),[[re,u.value.plec]])]),e("div",null,[w[18]||(w[18]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Kategoria",-1)),J(e("select",{"onUpdate:modelValue":w[6]||(w[6]=P=>u.value.kategoria=P),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},w[17]||(w[17]=[ne('<option value="Junior A">🏷️ Junior A</option><option value="Junior B">🏷️ Junior B</option><option value="Junior C">🏷️ Junior C</option><option value="Junior D">🏷️ Junior D</option><option value="Masters">🏷️ Masters</option><option value="Senior">🏷️ Senior</option>',6)]),512),[[re,u.value.kategoria]])])]),e("div",Ma,[e("div",null,[w[19]||(w[19]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Czas przejazdu",-1)),J(e("input",{"onUpdate:modelValue":w[7]||(w[7]=P=>u.value.czas_przejazdu=P),type:"text",placeholder:"MM:SS.ms lub SS.ms",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm bg-gray-100 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:text-white"},null,512),[[pe,u.value.czas_przejazdu]]),w[20]||(w[20]=e("p",{class:"text-xs text-gray-500 mt-1"},"Format: MM:SS.ms lub SS.ms (np. 1:23.456 lub 45.123)",-1))]),e("div",null,[w[22]||(w[22]=e("label",{class:"block text-lg font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),J(e("select",{"onUpdate:modelValue":w[8]||(w[8]=P=>u.value.status=P),required:"",class:"mt-1 block w-full rounded-full px-4 py-2 text-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},w[21]||(w[21]=[e("option",{value:"NOT_STARTED"},"⏳ Nie wystartował",-1),e("option",{value:"FINISHED"},"✅ Ukończył",-1),e("option",{value:"DNF"},"❌ Nie ukończył",-1),e("option",{value:"DSQ"},"🚫 Dyskwalifikacja",-1)]),512),[[re,u.value.status]])])]),T.value?(s(),r("div",Ta,[e("p",Ra,t(T.value),1)])):Z("",!0),z.value?(s(),r("div",Aa,[e("p",Na,t(z.value),1)])):Z("",!0),e("div",Za,[e("button",{type:"button",onClick:_,class:"px-6 py-2 text-base font-semibold text-indigo-700 bg-indigo-100 rounded-full hover:bg-indigo-200 transition-colors"},"✖ Anuluj"),e("button",{type:"submit",disabled:I.value,class:"px-6 py-2 text-base font-semibold text-white bg-green-400 rounded-full hover:bg-green-500 disabled:opacity-50 transition-colors"},t(I.value?"⏳ Zapisywanie...":"💾 Zapisz"),9,Ba)])],32)])])):Z("",!0)}}),Pa={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Da={class:"flex items-center space-x-3"},Oa={class:"flex items-center space-x-4"},Fa=["disabled"],Ga={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},Ea={class:"-mb-px flex space-x-8 overflow-x-auto"},Ka=["onClick"],Qa={key:0,class:"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 py-0.5 px-2 rounded-full text-xs"},Va={key:0,class:"flex justify-center py-12"},Ua={class:"text-center"},La={key:1},Wa={key:0,class:"space-y-6"},Ha={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Ja={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ya=["value"],Xa=["value"],es={class:"flex items-center justify-between"},ts={class:"text-sm text-gray-600 dark:text-gray-400"},as={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},ss={class:"overflow-x-auto"},rs={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},os={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ns={key:0},ls={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},is={key:0},ds={key:1},us={key:2},cs={key:3},gs={class:"px-6 py-4 whitespace-nowrap"},ps={class:"text-sm font-medium text-gray-900 dark:text-white"},ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},xs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},vs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600 dark:text-purple-400"},bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ms={key:1,class:"space-y-6"},ks={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},ws={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},fs=["value"],hs=["value"],_s={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},zs={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$s={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Cs={key:0},js={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Ss={key:0},Is={key:1},Ms={class:"px-6 py-4 whitespace-nowrap"},Ts={class:"text-sm font-medium text-gray-900 dark:text-white"},Rs={class:"text-sm text-gray-500 dark:text-gray-400"},As={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ns={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},Zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-red-500 dark:text-red-400"},qs={key:2,class:"space-y-6"},Ps={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},Ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Os={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Fs={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Gs={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Es={key:0},Ks={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Qs={key:0},Vs={key:1},Us={key:2},Ls={key:3},Ws={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Hs={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600 dark:text-blue-400"},Js={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Xs={key:3,class:"space-y-6"},er={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},tr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ar={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},sr={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},rr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},or={key:0},nr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},lr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},ir={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 dark:text-green-400"},dr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ur={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},cr={key:4,class:"space-y-6"},gr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors duration-200"},pr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yr={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},xr={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},vr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},br={key:0},mr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},kr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},wr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-600"},fr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-400"},hr={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-yellow-700"},_r={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-purple-600"},zr={key:2,class:"text-center py-12"},$r=3e4,Cr=ve({__name:"Rankingi",setup(K){const M=h(!1),g=h("2025"),p=h("general"),u=h(0),S=h([]),I=h([]),T=h([]),z=h([]),F=h([]),c=h(""),_=h(""),y=h(""),m=h("pozycja_asc"),w=h(""),P=h(""),Y=h(""),X=h("punkty_desc"),q=h(null),B=h("punkty_desc"),j=h(null),k=h("punkty_desc"),G=h(null),v=h("zlote_desc"),n=[{id:"general",name:"Generalna",icon:he},{id:"individual",name:"Indywidualna",icon:De},{id:"clubs-total",name:"Klubowa - Suma",icon:Ae},{id:"clubs-top3",name:"Klubowa - TOP3",icon:Ae},{id:"medals",name:"Medale",icon:he}],x=h(["Junior D","Junior C","Junior B","Junior A","Senior","Master"]),$=O(()=>[...new Set(S.value.map(a=>a.klub).filter(Boolean))].sort());O(()=>[...new Set(S.value.map(a=>a.plec).filter(Boolean))].sort());const V=O(()=>{let l=S.value;return c.value&&(l=l.filter(a=>a.kategoria===c.value)),_.value&&(l=l.filter(a=>a.klub===_.value)),y.value&&(l=l.filter(a=>a.plec===y.value)),m.value==="pozycja_asc"?l.sort((a,o)=>parseFloat(o.punkty)-parseFloat(a.punkty)):m.value==="pozycja_desc"?l.sort((a,o)=>parseFloat(a.punkty)-parseFloat(o.punkty)):m.value==="punkty_desc"?l.sort((a,o)=>parseFloat(o.punkty)-parseFloat(a.punkty)):m.value==="punkty_asc"?l.sort((a,o)=>parseFloat(a.punkty)-parseFloat(o.punkty)):m.value==="nazwisko_asc"?l.sort((a,o)=>a.nazwisko.localeCompare(o.nazwisko)):m.value==="nazwisko_desc"?l.sort((a,o)=>o.nazwisko.localeCompare(a.nazwisko)):m.value==="klub_asc"?l.sort((a,o)=>(a.klub||"").localeCompare(o.klub||"")):m.value==="kategoria_asc"?l.sort((a,o)=>a.kategoria.localeCompare(o.kategoria)):m.value==="starty_desc"&&l.sort((a,o)=>parseInt(o.liczba_zawodow)-parseInt(a.liczba_zawodow)),l}),U=O(()=>{let l=I.value;return w.value&&(l=l.filter(a=>a.kategoria===w.value)),P.value&&(l=l.filter(a=>a.klub===P.value)),Y.value&&(l=l.filter(a=>a.plec===Y.value)),X.value==="punkty_desc"?l.sort((a,o)=>parseFloat(o.punkty_koncowe)-parseFloat(a.punkty_koncowe)):X.value==="punkty_asc"?l.sort((a,o)=>parseFloat(a.punkty_koncowe)-parseFloat(o.punkty_koncowe)):X.value==="nazwisko_asc"?l.sort((a,o)=>a.nazwisko.localeCompare(o.nazwisko)):X.value==="nazwisko_desc"?l.sort((a,o)=>o.nazwisko.localeCompare(a.nazwisko)):X.value==="kategoria_asc"?l.sort((a,o)=>a.kategoria.localeCompare(o.kategoria)):X.value==="starty_desc"?l.sort((a,o)=>parseInt(o.uczestnictwa)-parseInt(a.uczestnictwa)):X.value==="odrzucone_desc"&&l.sort((a,o)=>parseInt(o.odrzucone||0)-parseInt(a.odrzucone||0)),l}),le=O(()=>{let l=T.value;return q.value&&(l=l.filter(a=>parseInt(a.liczba_zawodnikow)>=parseInt(q.value))),B.value==="punkty_desc"?l.sort((a,o)=>parseFloat(o.laczne_punkty)-parseFloat(a.laczne_punkty)):B.value==="punkty_asc"?l.sort((a,o)=>parseFloat(a.laczne_punkty)-parseFloat(o.laczne_punkty)):B.value==="srednia_desc"?l.sort((a,o)=>parseFloat(o.srednia)-parseFloat(a.srednia)):B.value==="srednia_asc"?l.sort((a,o)=>parseFloat(a.srednia)-parseFloat(o.srednia)):B.value==="zawodnicy_desc"?l.sort((a,o)=>parseInt(o.liczba_zawodnikow)-parseInt(a.liczba_zawodnikow)):B.value==="zawodnicy_asc"?l.sort((a,o)=>parseInt(a.liczba_zawodnikow)-parseInt(o.liczba_zawodnikow)):B.value==="nazwa_asc"?l.sort((a,o)=>a.klub.localeCompare(o.klub)):B.value==="nazwa_desc"&&l.sort((a,o)=>o.klub.localeCompare(a.klub)),l}),A=O(()=>{let l=z.value;return j.value&&(l=l.filter(a=>parseInt(a.aktywne_kategorie)>=parseInt(j.value))),k.value==="punkty_desc"?l.sort((a,o)=>parseFloat(o.punkty_top3)-parseFloat(a.punkty_top3)):k.value==="punkty_asc"?l.sort((a,o)=>parseFloat(a.punkty_top3)-parseFloat(o.punkty_top3)):k.value==="kategorie_desc"?l.sort((a,o)=>parseInt(o.aktywne_kategorie)-parseInt(a.aktywne_kategorie)):k.value==="kategorie_asc"?l.sort((a,o)=>parseInt(a.aktywne_kategorie)-parseInt(o.aktywne_kategorie)):k.value==="balance_desc"?l.sort((a,o)=>parseFloat(o.balance)-parseFloat(a.balance)):k.value==="balance_asc"?l.sort((a,o)=>parseFloat(a.balance)-parseFloat(o.balance)):k.value==="nazwa_asc"?l.sort((a,o)=>a.klub.localeCompare(o.klub)):k.value==="nazwa_desc"&&l.sort((a,o)=>o.klub.localeCompare(a.klub)),l}),b=O(()=>{let l=F.value;return G.value&&(l=l.filter(a=>parseInt(a.zlote)>=parseInt(G.value))),v.value==="zlote_desc"?l.sort((a,o)=>parseInt(o.zlote)-parseInt(a.zlote)||parseInt(o.srebrne)-parseInt(a.srebrne)||parseInt(o.brazowe)-parseInt(a.brazowe)):v.value==="zlote_asc"?l.sort((a,o)=>parseInt(a.zlote)-parseInt(o.zlote)):v.value==="srebrne_desc"?l.sort((a,o)=>parseInt(o.srebrne)-parseInt(a.srebrne)):v.value==="srebrne_asc"?l.sort((a,o)=>parseInt(a.srebrne)-parseInt(o.srebrne)):v.value==="brazowe_desc"?l.sort((a,o)=>parseInt(o.brazowe)-parseInt(a.brazowe)):v.value==="brazowe_asc"?l.sort((a,o)=>parseInt(a.brazowe)-parseInt(o.brazowe)):v.value==="lacznie_desc"?l.sort((a,o)=>parseInt(o.lacznie)-parseInt(a.lacznie)):v.value==="lacznie_asc"?l.sort((a,o)=>parseInt(a.lacznie)-parseInt(o.lacznie)):v.value==="nazwa_asc"?l.sort((a,o)=>a.klub.localeCompare(o.klub)):v.value==="nazwa_desc"&&l.sort((a,o)=>o.klub.localeCompare(a.klub)),l}),N=O(()=>S.value.length===0&&I.value.length===0&&T.value.length===0&&F.value.length===0),ae=async()=>{if(M.value){console.log("🚫 Refresh już w toku, przerywam");return}M.value=!0,console.log("🔄 ROZPOCZYNAM refresh rankings...");try{await Promise.all([W(),ue(),ce(),te()]),u.value=Date.now(),console.log("✅ ZAKOŃCZONO refresh rankings - wszystkie dane pobrane")}catch(l){console.error("❌ Error fetching rankings:",l)}finally{M.value=!1}},de=()=>{G.value=null,v.value="zlote_desc"};$e(p,l=>{console.log("🔀 Przełączono na zakładkę:",l);const a=Date.now();a-u.value>$r?(console.log("📅 Cache wygasł, pobieram świeże dane..."),ae()):console.log("💾 Używam cache danych (",Math.round((a-u.value)/1e3),"s temu)")}),$e(g,()=>{console.log("📅 Zmiana sezonu na:",g.value),ae()}),me(()=>{ae()});const W=async()=>{var l;console.log("🔍 Pobieranie rankingu indywidualnego...");try{const a=await fetch(`/api/rankings/individual?season=${g.value}&_t=${Date.now()}`);if(console.log("📡 Individual response status:",a.status),a.ok){const o=await a.json();console.log("✅ Individual data received:",((l=o.data)==null?void 0:l.length)||0,"items"),S.value=o.data||[],console.log("✅ individualRanking updated, length:",S.value.length)}else console.error("❌ Individual ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching individual ranking:",a)}},ue=async()=>{var l;console.log("🔍 Pobieranie rankingu generalnego...");try{const a=await fetch(`/api/rankings/general?season=${g.value}&_t=${Date.now()}`);if(console.log("📡 General response status:",a.status),a.ok){const o=await a.json();console.log("✅ General data received:",((l=o.data)==null?void 0:l.length)||0,"items"),I.value=o.data||[],console.log("✅ generalRanking updated, length:",I.value.length)}else console.error("❌ General ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching general ranking:",a)}},ce=async()=>{var l,a;console.log("🔍 Pobieranie rankingów klubowych...");try{const[o,se]=await Promise.all([fetch(`/api/rankings/clubs/total?season=${g.value}&_t=${Date.now()}`),fetch(`/api/rankings/clubs/top3?season=${g.value}&_t=${Date.now()}`)]);if(console.log("📡 Club total response status:",o.status),console.log("📡 Club top3 response status:",se.status),o.ok){const be=await o.json();console.log("✅ Club total data received:",((l=be.data)==null?void 0:l.length)||0,"items"),T.value=be.data||[],console.log("✅ clubRankingTotal updated, length:",T.value.length)}else console.error("❌ Club total ranking response not ok:",o.status,o.statusText);if(se.ok){const be=await se.json();console.log("✅ Club top3 data received:",((a=be.data)==null?void 0:a.length)||0,"items"),z.value=be.data||[],console.log("✅ clubRankingTop3 updated, length:",z.value.length)}else console.error("❌ Club top3 ranking response not ok:",se.status,se.statusText)}catch(o){console.error("❌ Error fetching club rankings:",o)}},te=async()=>{var l;console.log("🔍 Pobieranie rankingu medalowego...");try{const a=await fetch(`/api/rankings/medals?season=${g.value}&_t=${Date.now()}`);if(console.log("📡 Medal response status:",a.status),a.ok){const o=await a.json();console.log("✅ Medal data received:",((l=o.data)==null?void 0:l.length)||0,"items"),F.value=o.data||[],console.log("✅ medalRanking updated, length:",F.value.length)}else console.error("❌ Medal ranking response not ok:",a.status,a.statusText)}catch(a){console.error("❌ Error fetching medal ranking:",a)}},oe=()=>{c.value="",_.value="",y.value="",m.value="pozycja_asc"},ie=()=>{w.value="",P.value="",Y.value="",X.value="punkty_desc"},R=()=>{q.value=null,B.value="punkty_desc"},d=()=>{j.value=null,k.value="punkty_desc"};return(l,a)=>(s(),r("div",null,[e("div",Pa,[e("div",Da,[D(Q(Ce),{class:"h-8 w-8 text-purple-600 dark:text-purple-400"}),a[15]||(a[15]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Rankingi SKATECROSS",-1))]),e("div",Oa,[J(e("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>g.value=o),class:"rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},a[16]||(a[16]=[e("option",{value:"2025"},"Sezon 2025",-1),e("option",{value:"2024"},"Sezon 2024",-1)]),512),[[re,g.value]]),e("button",{onClick:ae,disabled:M.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50"},[D(Q(_e),{class:E(["h-4 w-4 mr-2",M.value?"animate-spin":""])},null,8,["class"]),a[17]||(a[17]=ee(" Odśwież "))],8,Fa)])]),e("div",Ga,[e("nav",Ea,[(s(),r(L,null,H(n,o=>e("button",{key:o.id,onClick:se=>p.value=o.id,class:E(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2",p.value===o.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(s(),xe(Re(o.icon),{class:"h-5 w-5"})),e("span",null,t(o.name),1),o.count?(s(),r("span",Qa,t(o.count),1)):Z("",!0)],10,Ka)),64))])]),M.value?(s(),r("div",Va,[e("div",Ua,[D(Q(_e),{class:"h-8 w-8 text-purple-500 animate-spin mx-auto mb-4"}),a[18]||(a[18]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Ładowanie rankingów...",-1))])])):(s(),r("div",La,[p.value==="individual"?(s(),r("div",Wa,[e("div",Ha,[e("div",{class:"flex items-center justify-between mb-6"},[a[20]||(a[20]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:oe,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[19]||(a[19]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",Ja,[e("div",null,[a[22]||(a[22]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),J(e("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>c.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[21]||(a[21]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(x.value,o=>(s(),r("option",{key:o,value:o},t(o),9,Ya))),128))],512),[[re,c.value]])]),e("div",null,[a[24]||(a[24]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),J(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>_.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[23]||(a[23]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H($.value,o=>(s(),r("option",{key:o,value:o},t(o),9,Xa))),128))],512),[[re,_.value]])]),e("div",null,[a[26]||(a[26]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),J(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>y.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[25]||(a[25]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"M"},"Mężczyźni",-1),e("option",{value:"K"},"Kobiety",-1)]),512),[[re,y.value]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>m.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[27]||(a[27]=[ne('<option value="pozycja_asc" data-v-41ea7926>Pozycja (najlepsi)</option><option value="pozycja_desc" data-v-41ea7926>Pozycja (najgorsi)</option><option value="punkty_desc" data-v-41ea7926>Punkty (malejąco)</option><option value="punkty_asc" data-v-41ea7926>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-41ea7926>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-41ea7926>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-41ea7926>Kategoria (A-Z)</option><option value="starty_desc" data-v-41ea7926>Starty (malejąco)</option>',8)]),512),[[re,m.value]])])])]),e("div",es,[a[29]||(a[29]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Indywidualna",-1)),e("div",ts," Suma wszystkich punktów ("+t(V.value.length)+" pozycji) ",1)]),e("div",as,[e("div",ss,[e("table",rs,[a[31]||(a[31]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty")])],-1)),e("tbody",os,[V.value.length===0?(s(),r("tr",ns,a[30]||(a[30]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak zawodników spełniających wybrane kryteria ",-1)]))):Z("",!0),(s(!0),r(L,null,H(V.value,(o,se)=>(s(),r("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ls,[se===0?(s(),r("span",is,"🥇")):se===1?(s(),r("span",ds,"🥈")):se===2?(s(),r("span",us,"🥉")):(s(),r("span",cs,t(se+1),1))]),e("td",gs,[e("div",ps,t(o.imie)+" "+t(o.nazwisko),1)]),e("td",ys,t(o.klub),1),e("td",xs,t(o.kategoria),1),e("td",vs,t(o.punkty)+" pkt",1),e("td",bs,t(o.liczba_zawodow),1)]))),128))])])])])])):Z("",!0),p.value==="general"?(s(),r("div",ms,[e("div",ks,[e("div",{class:"flex items-center justify-between mb-6"},[a[33]||(a[33]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:ie,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[32]||(a[32]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",ws,[e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),J(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>w.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[34]||(a[34]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(x.value,o=>(s(),r("option",{key:o,value:o},t(o),9,fs))),128))],512),[[re,w.value]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),J(e("select",{"onUpdate:modelValue":a[6]||(a[6]=o=>P.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[a[36]||(a[36]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H($.value,o=>(s(),r("option",{key:o,value:o},t(o),9,hs))),128))],512),[[re,P.value]])]),e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Płeć")])],-1)),J(e("select",{"onUpdate:modelValue":a[7]||(a[7]=o=>Y.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[38]||(a[38]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"M"},"Mężczyźni",-1),e("option",{value:"K"},"Kobiety",-1)]),512),[[re,Y.value]])]),e("div",null,[a[41]||(a[41]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":a[8]||(a[8]=o=>X.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[40]||(a[40]=[ne('<option value="punkty_desc" data-v-41ea7926>Punkty (malejąco)</option><option value="punkty_asc" data-v-41ea7926>Punkty (rosnąco)</option><option value="nazwisko_asc" data-v-41ea7926>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-41ea7926>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-41ea7926>Kategoria (A-Z)</option><option value="starty_desc" data-v-41ea7926>Starty (malejąco)</option><option value="odrzucone_desc" data-v-41ea7926>Odrzucone (malejąco)</option>',7)]),512),[[re,X.value]])])])]),a[44]||(a[44]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Generalna (n-2)"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("span",{class:"font-medium"},"Zasada n-2:"),ee(" Najlepsze wyniki minus 2 najsłabsze ")])],-1)),e("div",_s,[e("table",zs,[a[43]||(a[43]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategoria"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty końcowe"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Starty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Odrzucone")])],-1)),e("tbody",$s,[U.value.length===0?(s(),r("tr",Cs,a[42]||(a[42]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak zawodników spełniających wybrane kryteria ",-1)]))):Z("",!0),(s(!0),r(L,null,H(U.value,(o,se)=>(s(),r("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",js,[se===0?(s(),r("span",Ss,"🏆")):(s(),r("span",Is,t(se+1),1))]),e("td",Ms,[e("div",Ts,t(o.imie)+" "+t(o.nazwisko),1),e("div",Rs,t(o.klub),1)]),e("td",As,t(o.kategoria),1),e("td",Ns,t(o.punkty_koncowe)+" pkt",1),e("td",Zs,t(o.uczestnictwa),1),e("td",Bs,t(o.odrzucone||0),1)]))),128))])])])])):Z("",!0),p.value==="clubs-total"?(s(),r("div",qs,[e("div",Ps,[e("div",{class:"flex items-center justify-between mb-6"},[a[46]||(a[46]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:R,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[45]||(a[45]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",Ds,[e("div",null,[a[47]||(a[47]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"👥"),e("span",null,"Min. zawodników")])],-1)),J(e("input",{"onUpdate:modelValue":a[9]||(a[9]=o=>q.value=o),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[pe,q.value]])]),e("div",null,[a[49]||(a[49]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":a[10]||(a[10]=o=>B.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[48]||(a[48]=[ne('<option value="punkty_desc" data-v-41ea7926>Punkty (malejąco)</option><option value="punkty_asc" data-v-41ea7926>Punkty (rosnąco)</option><option value="srednia_desc" data-v-41ea7926>Średnia (malejąco)</option><option value="srednia_asc" data-v-41ea7926>Średnia (rosnąco)</option><option value="zawodnicy_desc" data-v-41ea7926>Zawodnicy (malejąco)</option><option value="zawodnicy_asc" data-v-41ea7926>Zawodnicy (rosnąco)</option><option value="nazwa_asc" data-v-41ea7926>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-41ea7926>Nazwa (Z-A)</option>',8)]),512),[[re,B.value]])])])]),a[52]||(a[52]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Suma Punktów"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Wszystkie punkty zawodników klubu ")],-1)),e("div",Os,[e("table",Fs,[a[51]||(a[51]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łączne punkty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zawodnicy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Średnia")])],-1)),e("tbody",Gs,[le.value.length===0?(s(),r("tr",Es,a[50]||(a[50]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):Z("",!0),(s(!0),r(L,null,H(le.value,(o,se)=>(s(),r("tr",{key:o.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Ks,[se===0?(s(),r("span",Qs,"🏆")):se===1?(s(),r("span",Vs,"🥈")):se===2?(s(),r("span",Us,"🥉")):(s(),r("span",Ls,t(se+1),1))]),e("td",Ws,t(o.klub),1),e("td",Hs,t(o.laczne_punkty)+" pkt",1),e("td",Js,t(o.liczba_zawodnikow),1),e("td",Ys,t(parseFloat(o.srednia).toFixed(1))+" pkt",1)]))),128))])])])])):Z("",!0),p.value==="clubs-top3"?(s(),r("div",Xs,[e("div",er,[e("div",{class:"flex items-center justify-between mb-6"},[a[54]||(a[54]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:d,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[53]||(a[53]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",tr,[e("div",null,[a[55]||(a[55]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Min. aktywnych kategorii")])],-1)),J(e("input",{"onUpdate:modelValue":a[11]||(a[11]=o=>j.value=o),type:"number",min:"1",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[pe,j.value]])]),e("div",null,[a[57]||(a[57]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":a[12]||(a[12]=o=>k.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[56]||(a[56]=[ne('<option value="punkty_desc" data-v-41ea7926>Punkty Top 3 (malejąco)</option><option value="punkty_asc" data-v-41ea7926>Punkty Top 3 (rosnąco)</option><option value="kategorie_desc" data-v-41ea7926>Kategorie (malejąco)</option><option value="kategorie_asc" data-v-41ea7926>Kategorie (rosnąco)</option><option value="balance_desc" data-v-41ea7926>Równowaga (malejąco)</option><option value="balance_asc" data-v-41ea7926>Równowaga (rosnąco)</option><option value="nazwa_asc" data-v-41ea7926>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-41ea7926>Nazwa (Z-A)</option>',8)]),512),[[re,k.value]])])])]),a[60]||(a[60]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Klubowa - Top 3"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," 3 najlepszych zawodników z każdej kategorii ")],-1)),e("div",ar,[e("table",sr,[a[59]||(a[59]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Punkty Top 3"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Kategorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Równowaga")])],-1)),e("tbody",rr,[A.value.length===0?(s(),r("tr",or,a[58]||(a[58]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):Z("",!0),(s(!0),r(L,null,H(A.value,(o,se)=>(s(),r("tr",{key:o.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",nr,t(se+1),1),e("td",lr,t(o.klub),1),e("td",ir,t(o.punkty_top3)+" pkt",1),e("td",dr,t(o.aktywne_kategorie),1),e("td",ur,t(o.balance),1)]))),128))])])])])):Z("",!0),p.value==="medals"?(s(),r("div",cr,[e("div",gr,[e("div",{class:"flex items-center justify-between mb-6"},[a[62]||(a[62]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:de,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},a[61]||(a[61]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść filtry",-1)]))]),e("div",pr,[e("div",null,[a[63]||(a[63]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🥇"),e("span",null,"Min. złotych medali")])],-1)),J(e("input",{"onUpdate:modelValue":a[13]||(a[13]=o=>G.value=o),type:"number",min:"0",placeholder:"Minimalna liczba",class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},null,512),[[pe,G.value]])]),e("div",null,[a[65]||(a[65]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":a[14]||(a[14]=o=>v.value=o),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},a[64]||(a[64]=[ne('<option value="zlote_desc" data-v-41ea7926>Złote (malejąco)</option><option value="zlote_asc" data-v-41ea7926>Złote (rosnąco)</option><option value="srebrne_desc" data-v-41ea7926>Srebrne (malejąco)</option><option value="srebrne_asc" data-v-41ea7926>Srebrne (rosnąco)</option><option value="brazowe_desc" data-v-41ea7926>Brązowe (malejąco)</option><option value="brazowe_asc" data-v-41ea7926>Brązowe (rosnąco)</option><option value="lacznie_desc" data-v-41ea7926>Łącznie (malejąco)</option><option value="lacznie_asc" data-v-41ea7926>Łącznie (rosnąco)</option><option value="nazwa_asc" data-v-41ea7926>Nazwa (A-Z)</option><option value="nazwa_desc" data-v-41ea7926>Nazwa (Z-A)</option>',10)]),512),[[re,v.value]])])])]),a[68]||(a[68]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Klasyfikacja Medalowa"),e("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Złote, srebrne i brązowe medale ")],-1)),e("div",yr,[e("table",xr,[a[67]||(a[67]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Pozycja"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Klub"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥇 Złote"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥈 Srebrne"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"🥉 Brązowe"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Łącznie")])],-1)),e("tbody",vr,[b.value.length===0?(s(),r("tr",br,a[66]||(a[66]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," Brak klubów spełniających wybrane kryteria ",-1)]))):Z("",!0),(s(!0),r(L,null,H(b.value,(o,se)=>(s(),r("tr",{key:o.klub,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",mr,t(se+1),1),e("td",kr,t(o.klub),1),e("td",wr,t(o.zlote),1),e("td",fr,t(o.srebrne),1),e("td",hr,t(o.brazowe),1),e("td",_r,t(o.lacznie),1)]))),128))])])])])):Z("",!0)])),!M.value&&N.value?(s(),r("div",zr,[D(Q(Ce),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a[70]||(a[70]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Brak danych rankingowych",-1)),a[71]||(a[71]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Rankingi będą dostępne po zakończeniu pierwszych zawodów w sezonie. ",-1)),e("button",{onClick:ae,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700"},[D(Q(_e),{class:"h-4 w-4 mr-2"}),a[69]||(a[69]=ee(" Sprawdź ponownie "))])])):Z("",!0)]))}}),jr=we(Cr,[["__scopeId","data-v-41ea7926"]]),Sr={class:"space-y-6"},Ir={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Mr={class:"flex items-center space-x-3"},Tr={class:"flex space-x-2"},Rr=["disabled"],Ar={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Nr={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Zr={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Br={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},qr={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Pr={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Dr={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg"},Or={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Fr={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Gr={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Er={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 rounded-lg"},Kr={class:"flex"},Qr={class:"ml-3"},Vr={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},Ur={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},Lr={class:"list-disc list-inside space-y-1"},Wr={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Hr={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Jr={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Yr={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},Xr={class:"space-y-3 max-h-80 overflow-y-auto"},eo={class:"flex items-center space-x-3"},to={class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},ao={class:"text-sm font-medium text-indigo-600 dark:text-indigo-400"},so={class:"text-sm font-medium text-gray-900 dark:text-white"},ro={class:"text-xs text-gray-500 dark:text-gray-400"},oo={class:"text-right"},no={class:"text-xs text-gray-500 dark:text-gray-400"},lo={class:"text-xs text-gray-400 dark:text-gray-500"},io={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},uo={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},co={class:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},go={class:"space-y-3"},po={class:"flex items-center space-x-3"},yo={class:"text-sm font-medium text-gray-900 dark:text-white"},xo={class:"text-xs text-gray-500 dark:text-gray-400"},vo={class:"text-right"},bo={class:"text-xs text-gray-500 dark:text-gray-400"},mo={class:"flex space-x-1 text-xs"},ko={class:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded"},wo={class:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded"},fo={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},ho={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},_o={class:"overflow-x-auto"},zo={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$o={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Co={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},jo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},So={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Io={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Mo={class:"px-6 py-4 whitespace-nowrap"},To={class:"flex items-center"},Ro={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Ao={class:"ml-2 text-sm text-gray-500 dark:text-gray-300"},No={key:1,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Zo={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Bo={class:"space-y-2"},qo={class:"text-sm font-medium text-gray-600 dark:text-gray-300 w-20"},Po={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-4 relative"},Do={class:"text-sm text-gray-500 dark:text-gray-400 w-24 text-right"},Oo={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Fo={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Go={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Eo={class:"text-xs text-gray-500"},Ko={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Qo={class:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center"},Vo={class:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4 mb-6"},Uo={class:"flex"},Lo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Wo={class:"space-y-4"},Ho=["disabled"],Jo=["disabled"],Yo={key:0},Xo=["disabled"],en=["disabled"],tn={class:"space-y-4"},an={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},sn={class:"flex items-center space-x-4 mb-3"},rn={class:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center"},on={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},nn={class:"text-lg font-medium text-gray-900 dark:text-white"},ln={class:"text-sm text-gray-500 dark:text-gray-400"},dn={class:"grid grid-cols-2 gap-3 text-sm"},un={class:"font-medium text-gray-900 dark:text-white"},cn={class:"flex items-center mt-1"},gn={key:0,class:"inline-flex items-center px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full"},pn={key:1,class:"inline-flex items-center px-2 py-1 text-xs bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-full"},yn={class:"font-medium text-gray-900 dark:text-white"},xn={class:"font-medium text-gray-900 dark:text-white"},vn={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},bn={class:"text-xs text-gray-500 dark:text-gray-400"},mn={key:1,class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},kn={class:"flex"},wn={class:"ml-3"},fn={class:"text-sm text-red-700 dark:text-red-300 mt-1"},hn={key:2,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},_n={key:3,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center"},zn={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},$n={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Cn={class:"space-y-2 max-h-40 overflow-y-auto"},jn={class:"flex items-center space-x-3"},Sn={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center"},In={class:"text-sm font-medium text-orange-600 dark:text-orange-400"},Mn={class:"text-sm font-medium text-gray-900 dark:text-white"},Tn={class:"text-xs text-gray-500 dark:text-gray-400"},Rn={class:"text-xs text-gray-500 dark:text-gray-400"},An=ve({__name:"QrAdminDashboard",setup(K){const M=h(!1),g=h({total_zawodnikow:0,z_qr_kodami:0,zameldowanych:0,bez_qr_kodow:0,procent_zameldowanych:0}),p=h([]),u=h([]),S=h([]),I=h([]),T=h([]),z=h({nr_startowy:0,powod:"",opis:""}),F=h(!1),c=h(null),_=h(!1),y=h([]);let m=null,w=null;const P=O(()=>I.value.length===0?1:Math.max(...I.value.map(A=>Math.max(A.check_ins,A.results)))),Y=O(()=>{const A=z.value.nr_startowy>0,b=z.value.powod!=="",N=c.value!==null,ae=c.value?!c.value.checked_in:!1;return console.log("🔍 canPerformManualCheckIn debug:",{hasNumber:A,hasReason:b,hasPreview:N,notCheckedIn:ae,manualCheckInForm:z.value,previewZawodnik:c.value}),A&&b&&N&&ae});$e(()=>z.value.nr_startowy,A=>{w&&clearTimeout(w),A&&A>0?w=setTimeout(()=>{V(A)},500):c.value=null});const X=async()=>{try{M.value=!0;const A=await ye.get("/api/unified/dashboard-data");A.data.success&&(g.value={total_zawodnikow:A.data.stats.zawodnicy.total_zawodnicy,z_qr_kodami:A.data.stats.zawodnicy.total_zawodnicy,zameldowanych:A.data.stats.zawodnicy.zameldowani,bez_qr_kodow:0,procent_zameldowanych:Math.round(A.data.stats.zawodnicy.zameldowani/A.data.stats.zawodnicy.total_zawodnicy*100)},p.value=[],u.value=[],S.value=[],I.value=[],T.value=[])}catch(A){console.error("Błąd podczas pobierania danych dashboard:",A)}finally{M.value=!1}},q=()=>{X()},B=async()=>{try{console.log("Export functionality temporarily disabled - waiting for unified API endpoint")}catch(A){console.error("Błąd podczas eksportu:",A)}},j=async()=>{},k=async()=>{},G=()=>{},v=A=>new Date(A).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),n=A=>new Date(A).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}),x=A=>({"check-in":"Zameldowanie",finish:"Meta",verify:"Weryfikacja"})[A]||A,$=A=>({awaria_skanera:"Awaria skanera QR",brak_kodu:"Brak/uszkodzony kod QR",problem_techniczny:"Problem techniczny",decyzja_organizatora:"Decyzja organizatora",inne:"Inne"})[A]||A,V=async A=>{if(!A||A<=0){c.value=null;return}try{_.value=!0;const b=await ye.get(`/api/zawodnicy/${A}`);b.data.success?c.value=b.data.data:c.value=null}catch(b){console.error("Błąd podczas pobierania podglądu zawodnika:",b),c.value=null}finally{_.value=!1}},U=async()=>{var A,b,N,ae,de,W,ue,ce,te;if(console.log("🔍 performManualCheckIn called, canPerformManualCheckIn:",Y.value),console.log("🔍 manualCheckInForm:",z.value),console.log("🔍 previewZawodnik:",c.value),!Y.value){console.log("❌ Cannot perform manual check-in");return}try{F.value=!0;const oe={identifier:z.value.nr_startowy,action:"checkin"};console.log("🚀 Sending payload:",oe);const ie=await ye.post("/api/unified/register-athlete",oe);console.log("✅ Response received:",ie.data),ie.data.success?(await X(),await V(z.value.nr_startowy),y.value.unshift({nr_startowy:z.value.nr_startowy,imie:((A=c.value)==null?void 0:A.imie)||"",nazwisko:((b=c.value)==null?void 0:b.nazwisko)||"",kategoria:((N=c.value)==null?void 0:N.kategoria)||"",checked_in:!0,check_in_time:new Date().toISOString(),qr_code:((ae=c.value)==null?void 0:ae.qr_code)||!1,ma_wynik:((de=c.value)==null?void 0:de.ma_wynik)||!1,klub:((W=c.value)==null?void 0:W.klub)||"",plec:((ue=c.value)==null?void 0:ue.plec)||"",powod:z.value.powod,timestamp:new Date().toISOString()}),console.log("✅ Manual check-in successful, resetting form"),z.value={nr_startowy:0,powod:"",opis:""}):console.log("❌ Manual check-in failed:",ie.data)}catch(oe){console.error("❌ Błąd podczas ręcznego zameldowania:",oe);const ie=((te=(ce=oe.response)==null?void 0:ce.data)==null?void 0:te.message)||"Nieznany błąd serwera";console.error("❌ Manual check-in error:",ie)}finally{F.value=!1}},le=async()=>{try{console.log("Manual check-ins history temporarily disabled - waiting for unified API endpoint"),y.value=[]}catch(A){console.error("Błąd podczas pobierania ręcznych zameldowań:",A)}};return me(()=>{X(),le(),m=setInterval(X,1e4)}),qe(()=>{m&&clearInterval(m),w&&clearTimeout(w)}),(A,b)=>(s(),r("div",Sr,[e("div",Ir,[e("div",Mr,[D(Q(Ie),{class:"h-8 w-8 text-indigo-600"}),b[3]||(b[3]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"QR Admin Dashboard",-1))]),e("div",Tr,[e("button",{onClick:q,disabled:M.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center"},[D(Q(_e),{class:E(["h-4 w-4 mr-2",{"animate-spin":M.value}])},null,8,["class"]),b[4]||(b[4]=ee(" Odśwież "))],8,Rr),e("button",{onClick:B,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center"},[D(Q(et),{class:"h-4 w-4 mr-2"}),b[5]||(b[5]=ee(" Eksport CSV "))])])]),e("div",Ar,[e("div",Nr,[e("div",Zr,[e("div",Br,t(g.value.total_zawodnikow||0),1),b[6]||(b[6]=e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Wszyscy zawodnicy",-1))]),e("div",qr,[e("div",Pr,t(g.value.z_qr_kodami||0),1),b[7]||(b[7]=e("div",{class:"text-sm text-green-700 dark:text-green-300"},"Z QR kodami",-1))]),e("div",Dr,[e("div",Or,t(g.value.zameldowanych||0),1),b[8]||(b[8]=e("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Zameldowanych",-1))]),e("div",Fr,[e("div",Gr,t(g.value.procent_zameldowanych||0)+"% ",1),b[9]||(b[9]=e("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"% zameldowanych",-1))])])]),T.value.length>0?(s(),r("div",Er,[e("div",Kr,[D(Q(Ne),{class:"h-5 w-5 text-yellow-400"}),e("div",Qr,[e("h3",Vr," Wykryto problemy ("+t(T.value.length)+") ",1),e("div",Ur,[e("ul",Lr,[(s(!0),r(L,null,H(T.value,N=>(s(),r("li",{key:N.type},t(N.title)+": "+t(N.count),1))),128))])])])])])):Z("",!0),e("div",Wr,[e("div",Hr,[e("h2",Jr,[D(Q(Pe),{class:"h-5 w-5 mr-2 text-gray-500"}),b[10]||(b[10]=ee(" Ostatnia aktywność ")),e("span",Yr,t(p.value.length),1)]),e("div",Xr,[(s(!0),r(L,null,H(p.value.slice(0,10),N=>(s(),r("div",{key:`${N.nr_startowy}-${N.scan_time}`,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",eo,[e("div",to,[e("span",ao,t(N.nr_startowy),1)]),e("div",null,[e("div",so,t(N.imie)+" "+t(N.nazwisko),1),e("div",ro,t(N.kategoria)+" • "+t(x(N.checkpoint_name)),1)])]),e("div",oo,[e("div",no,t(v(N.scan_time)),1),e("div",lo,t(N.device_id),1)])]))),128))])]),e("div",io,[e("h2",uo,[D(Q(tt),{class:"h-5 w-5 mr-2 text-gray-500"}),b[11]||(b[11]=ee(" Aktywne urządzenia ")),e("span",co,t(u.value.length),1)]),e("div",go,[(s(!0),r(L,null,H(u.value,N=>(s(),r("div",{key:N.device_id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",po,[b[12]||(b[12]=e("div",{class:"w-3 h-3 bg-green-400 rounded-full animate-pulse"},null,-1)),e("div",null,[e("div",yo,t(N.device_id),1),e("div",xo,t(N.total_scans)+" skanów • "+t(N.unique_zawodnicy)+" zawodników ",1)])]),e("div",vo,[e("div",bo,t(v(N.last_activity)),1),e("div",mo,[e("span",ko,t(N.check_ins)+" check-in ",1),e("span",wo,t(N.results)+" wyniki ",1)])])]))),128))])])]),e("div",fo,[e("h2",ho,[D(Q(Ce),{class:"h-5 w-5 mr-2 text-gray-500"}),b[13]||(b[13]=ee(" Statystyki według kategorii "))]),e("div",_o,[e("table",zo,[b[14]||(b[14]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Łącznie "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zameldowanych "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Z wynikami "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Postęp ")])],-1)),e("tbody",$o,[(s(!0),r(L,null,H(S.value,N=>(s(),r("tr",{key:N.kategoria},[e("td",Co,t(N.kategoria),1),e("td",jo,t(N.total),1),e("td",So,t(N.zameldowanych),1),e("td",Io,t(N.z_wynikami),1),e("td",Mo,[e("div",To,[e("div",Ro,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Se({width:`${Math.round(N.z_wynikami/N.total*100)}%`})},null,4)]),e("span",Ao,t(Math.round(N.z_wynikami/N.total*100))+"% ",1)])])]))),128))])])])]),I.value.length>0?(s(),r("div",No,[e("h2",Zo,[D(Q(Ce),{class:"h-5 w-5 mr-2 text-gray-500"}),b[15]||(b[15]=ee(" Postęp w ciągu dnia "))]),e("div",Bo,[(s(!0),r(L,null,H(I.value,N=>(s(),r("div",{key:N.hour,class:"flex items-center space-x-4"},[e("div",qo,t(n(N.hour)),1),e("div",Po,[e("div",{class:"bg-blue-500 h-full rounded-full transition-all duration-300",style:Se({width:`${Math.min(N.check_ins/P.value*100,100)}%`})},null,4),e("div",{class:"bg-green-500 h-full rounded-full absolute top-0 transition-all duration-300",style:Se({width:`${Math.min(N.results/P.value*100,100)}%`,left:`${Math.min(N.check_ins/P.value*100,100)}%`})},null,4)]),e("div",Do,t(N.check_ins)+" / "+t(N.results),1)]))),128))]),b[16]||(b[16]=ne('<div class="flex items-center space-x-4 mt-4 text-xs text-gray-500"><div class="flex items-center"><div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div> Check-ins </div><div class="flex items-center"><div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div> Wyniki </div></div>',1))])):Z("",!0),e("div",Oo,[e("h2",Fo,[D(Q(at),{class:"h-5 w-5 mr-2 text-gray-500"}),b[17]||(b[17]=ee(" Narzędzia diagnostyczne "))]),e("div",Go,[e("button",{onClick:j,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[D(Q(Ie),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),b[18]||(b[18]=e("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Generuj brakujące QR ",-1)),e("div",Eo,t(g.value.bez_qr_kodow)+" zawodników ",1)]),e("button",{onClick:k,class:"p-4 border-2 border-dashed border-red-300 dark:border-red-600 rounded-lg hover:border-red-400 transition-colors"},[D(Q(_e),{class:"h-8 w-8 mx-auto text-red-400 mb-2"}),b[19]||(b[19]=e("div",{class:"text-sm font-medium text-red-600 dark:text-red-300"}," Reset check-inów ",-1)),b[20]||(b[20]=e("div",{class:"text-xs text-red-500"}," Usuń wszystkie meldunki ",-1))]),e("button",{onClick:G,class:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-indigo-400 transition-colors"},[D(Q(st),{class:"h-8 w-8 mx-auto text-gray-400 mb-2"}),b[21]||(b[21]=e("div",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Logi systemu ",-1)),b[22]||(b[22]=e("div",{class:"text-xs text-gray-500"}," Ostatnie wydarzenia ",-1))])])]),e("div",Ko,[e("h2",Qo,[D(Q(rt),{class:"h-5 w-5 mr-2 text-orange-500"}),b[23]||(b[23]=ee(" Ręczne zameldowanie ")),b[24]||(b[24]=e("span",{class:"ml-2 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-2 py-1 rounded-full"}," BACKUP ",-1))]),e("div",Vo,[e("div",Uo,[D(Q(Ne),{class:"h-5 w-5 text-orange-400"}),b[25]||(b[25]=e("div",{class:"ml-3"},[e("p",{class:"text-sm text-orange-700 dark:text-orange-300"},[e("strong",null,"Uwaga:"),ee(' Używaj tylko gdy skaner QR nie działa lub w sytuacjach awaryjnych. Każde ręczne zameldowanie jest rejestrowane z identyfikatorem urządzenia "manual-admin". ')])],-1))])]),e("div",Lo,[e("div",Wo,[b[30]||(b[30]=e("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Zamelduj zawodnika",-1)),e("div",null,[b[26]||(b[26]=e("label",{for:"nr_startowy",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Numer startowy ",-1)),J(e("input",{id:"nr_startowy","onUpdate:modelValue":b[0]||(b[0]=N=>z.value.nr_startowy=N),type:"number",min:"1",disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Wprowadź numer startowy..."},null,8,Ho),[[pe,z.value.nr_startowy]])]),e("div",null,[b[28]||(b[28]=e("label",{for:"powod",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Powód ręcznego zameldowania ",-1)),J(e("select",{id:"powod","onUpdate:modelValue":b[1]||(b[1]=N=>z.value.powod=N),disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},b[27]||(b[27]=[ne('<option value="">Wybierz powód...</option><option value="awaria_skanera">Awaria skanera QR</option><option value="brak_kodu">Brak/uszkodzony kod QR</option><option value="problem_techniczny">Problem techniczny</option><option value="decyzja_organizatora">Decyzja organizatora</option><option value="inne">Inne</option>',6)]),8,Jo),[[re,z.value.powod]])]),z.value.powod==="inne"?(s(),r("div",Yo,[b[29]||(b[29]=e("label",{for:"opis",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Opis szczegółowy ",-1)),J(e("textarea",{id:"opis","onUpdate:modelValue":b[2]||(b[2]=N=>z.value.opis=N),rows:"2",disabled:F.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Opisz powód ręcznego zameldowania..."},null,8,Xo),[[pe,z.value.opis]])])):Z("",!0),e("button",{onClick:U,disabled:!Y.value||F.value,class:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[F.value?Z("",!0):(s(),xe(Q(Me),{key:0,class:"h-4 w-4 mr-2"})),F.value?(s(),xe(Q(_e),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):Z("",!0),ee(" "+t(F.value?"Meldowanie...":"Zamelduj zawodnika"),1)],8,en)]),e("div",tn,[b[40]||(b[40]=e("h3",{class:"text-md font-medium text-gray-900 dark:text-white"},"Podgląd zawodnika",-1)),c.value?(s(),r("div",an,[e("div",sn,[e("div",rn,[e("span",on,t(c.value.nr_startowy),1)]),e("div",null,[e("div",nn,t(c.value.imie)+" "+t(c.value.nazwisko),1),e("div",ln,t(c.value.kategoria)+" • "+t(c.value.plec==="M"?"Mężczyzna":"Kobieta"),1)])]),e("div",dn,[e("div",null,[b[31]||(b[31]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Klub:",-1)),e("div",un,t(c.value.klub||"Brak danych"),1)]),e("div",null,[b[34]||(b[34]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Status:",-1)),e("div",cn,[c.value.checked_in?(s(),r("span",gn,[D(Q(Me),{class:"h-3 w-3 mr-1"}),b[32]||(b[32]=ee(" Zameldowany "))])):(s(),r("span",pn,[D(Q(Te),{class:"h-3 w-3 mr-1"}),b[33]||(b[33]=ee(" Nie zameldowany "))]))])]),e("div",null,[b[35]||(b[35]=e("span",{class:"text-gray-500 dark:text-gray-400"},"QR kod:",-1)),e("div",yn,t(c.value.qr_code?"Dostępny":"Brak"),1)]),e("div",null,[b[36]||(b[36]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Wynik:",-1)),e("div",xn,t(c.value.ma_wynik?"Tak":"Nie"),1)])]),c.value.checked_in&&c.value.check_in_time?(s(),r("div",vn,[e("span",bn," Zameldowany: "+t(v(c.value.check_in_time)),1)])):Z("",!0)])):z.value.nr_startowy&&!_.value?(s(),r("div",mn,[e("div",kn,[D(Q(Te),{class:"h-5 w-5 text-red-400"}),e("div",wn,[b[37]||(b[37]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Zawodnik nie znaleziony ",-1)),e("p",fn," Nie znaleziono zawodnika z numerem startowym "+t(z.value.nr_startowy)+". ",1)])])])):_.value?(s(),r("div",hn,b[38]||(b[38]=[ne('<div class="animate-pulse"><div class="flex items-center space-x-4"><div class="w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-32"></div><div class="h-3 bg-gray-300 dark:bg-gray-600 rounded w-24"></div></div></div></div>',1)]))):(s(),r("div",_n,[D(Q(Ze),{class:"h-12 w-12 mx-auto text-gray-400 mb-2"}),b[39]||(b[39]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Wprowadź numer startowy, aby zobaczyć podgląd zawodnika ",-1))]))])]),y.value.length>0?(s(),r("div",zn,[e("h3",$n," Ostatnie ręczne zameldowania ("+t(y.value.length)+") ",1),e("div",Cn,[(s(!0),r(L,null,H(y.value.slice(0,5),N=>(s(),r("div",{key:`manual-${N.nr_startowy}-${N.timestamp}`,class:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},[e("div",jn,[e("div",Sn,[e("span",In,t(N.nr_startowy),1)]),e("div",null,[e("div",Mn,t(N.imie)+" "+t(N.nazwisko),1),e("div",Tn,t($(N.powod)),1)])]),e("div",Rn,t(v(N.timestamp)),1)]))),128))])])):Z("",!0)])]))}}),Nn="modulepreload",Zn=function(K){return"/"+K},Qe={},Bn=function(M,g,p){let u=Promise.resolve();if(g&&g.length>0){let I=function(F){return Promise.all(F.map(c=>Promise.resolve(c).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const T=document.querySelector("meta[property=csp-nonce]"),z=(T==null?void 0:T.nonce)||(T==null?void 0:T.getAttribute("nonce"));u=I(g.map(F=>{if(F=Zn(F),F in Qe)return;Qe[F]=!0;const c=F.endsWith(".css"),_=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${F}"]${_}`))return;const y=document.createElement("link");if(y.rel=c?"stylesheet":Nn,c||(y.as="script"),y.crossOrigin="",y.href=F,z&&y.setAttribute("nonce",z),document.head.appendChild(y),c)return new Promise((m,w)=>{y.addEventListener("load",m),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${F}`)))})}))}function S(I){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=I,window.dispatchEvent(T),!T.defaultPrevented)throw I}return u.then(I=>{for(const T of I||[])T.status==="rejected"&&S(T.reason);return M().catch(S)})},qn={class:"p-4 sm:p-6"},Pn={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0"},Dn={class:"flex items-center space-x-3"},On={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3"},Fn=["disabled"],Gn=["disabled"],En={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 mb-6 transition-colors duration-200"},Kn={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Qn=["value"],Vn=["value"],Un={value:"with_qr"},Ln={value:"without_qr"},Wn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Hn={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},Jn={class:"flex flex-wrap gap-3"},Yn=["disabled"],Xn=["disabled"],el=["disabled"],tl=["disabled"],al={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},sl={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 transition-colors duration-200"},rl={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},ol={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800 transition-colors duration-200"},nl={class:"text-2xl font-bold text-green-600 dark:text-green-400"},ll={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800 transition-colors duration-200"},il={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},dl={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800 transition-colors duration-200"},ul={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},cl={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200"},gl={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 flex items-center justify-between transition-colors duration-200"},pl={class:"text-lg font-semibold text-gray-900 dark:text-white"},yl={class:"text-sm text-gray-600 dark:text-gray-400"},xl={class:"hidden md:grid grid-cols-6 gap-4 p-4 bg-gray-100 dark:bg-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 transition-colors duration-200"},vl={class:"flex items-center"},bl=["checked"],ml={class:"max-h-96 overflow-y-auto"},kl={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},wl={class:"md:hidden"},fl={class:"flex items-start space-x-3"},hl=["checked","onChange"],_l={class:"flex-1"},zl={class:"flex items-center justify-between mb-2"},$l={class:"font-semibold text-lg text-gray-900 dark:text-white"},Cl={class:"flex items-center"},jl={key:0,class:"flex items-center text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full text-xs font-medium"},Sl={key:1,class:"flex items-center text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full text-xs font-medium"},Il={class:"text-base font-medium text-gray-900 dark:text-white mb-2"},Ml={class:"flex flex-wrap gap-2 text-sm"},Tl={class:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 px-2 py-1 rounded font-medium"},Rl={class:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded font-medium"},Al={class:"hidden md:block"},Nl={class:"flex items-center"},Zl=["checked","onChange"],Bl={class:"font-medium text-gray-900 dark:text-white"},ql={class:"font-medium text-gray-900 dark:text-white"},Pl={class:"text-gray-600 dark:text-gray-400"},Dl={class:"text-gray-600 dark:text-gray-400 truncate"},Ol={class:"flex items-center"},Fl={key:0,class:"flex items-center text-green-600 dark:text-green-400"},Gl={key:1,class:"flex items-center text-red-600 dark:text-red-400"},El=["onClick"],Kl={key:0,class:"mt-6 bg-white rounded-lg shadow-sm border"},Ql={class:"p-4 border-b bg-gray-50 flex items-center justify-between"},Vl={class:"text-lg font-semibold text-gray-900"},Ul={class:"p-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-80 overflow-y-auto"},Ll=["src","alt"],Wl={class:"text-xs font-medium"},Hl={class:"text-xs text-gray-600"},Jl={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Yl={class:"bg-white rounded-lg p-6 max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto"},Xl={class:"flex items-center justify-between mb-4"},ei={class:"mb-4 flex space-x-4"},ti={id:"printArea",class:"print-content"},ai={class:"sticker-grid"},si={class:"sticker-header"},ri={class:"nr-startowy"},oi={class:"zawodnik-name"},ni={class:"qr-container"},li=["src","alt"],ii={class:"sticker-footer"},di={class:"kategoria"},ui={class:"klub"},ci=ve({__name:"QrPrint",setup(K){const M=h([]),g=h([]),p=h([]),u=h(!1),S=h(!1),I=h(!1),T=h(""),z=h(""),F=h(""),c=h("nr_startowy_asc"),_=O(()=>[...new Set(M.value.map(R=>R.kategoria))].sort()),y=O(()=>[...new Set(M.value.map(R=>R.klub).filter(Boolean))].sort()),m=O(()=>{let R=M.value;return T.value&&(R=R.filter(d=>d.kategoria===T.value)),z.value&&(R=R.filter(d=>d.klub===z.value)),F.value==="with_qr"?R=R.filter(d=>d.qr_code):F.value==="without_qr"&&(R=R.filter(d=>!d.qr_code)),c.value==="nr_startowy_asc"?R.sort((d,l)=>d.nr_startowy-l.nr_startowy):c.value==="nr_startowy_desc"?R.sort((d,l)=>l.nr_startowy-d.nr_startowy):c.value==="nazwisko_asc"?R.sort((d,l)=>d.nazwisko.localeCompare(l.nazwisko)):c.value==="nazwisko_desc"&&R.sort((d,l)=>l.nazwisko.localeCompare(d.nazwisko)),R}),w=O(()=>m.value.length===0?!1:m.value.every(R=>g.value.includes(R.nr_startowy))),P=O(()=>{if(!T.value)return!1;const R=m.value.filter(d=>d.kategoria===T.value);return R.length>0&&R.every(d=>g.value.includes(d.nr_startowy))}),Y=O(()=>{if(!z.value)return!1;const R=m.value.filter(d=>d.klub===z.value);return R.length>0&&R.every(d=>g.value.includes(d.nr_startowy))}),X=O(()=>{const R=m.value.filter(d=>!d.qr_code);return R.length>0&&R.every(d=>g.value.includes(d.nr_startowy))}),q=O(()=>g.value.filter(R=>{const d=M.value.find(l=>l.nr_startowy===R);return d&&d.qr_code})),B=O(()=>g.value.filter(R=>{const d=M.value.find(l=>l.nr_startowy===R);return d&&!d.qr_code})),j=O(()=>{const R=m.value.length,d=g.value.filter(o=>m.value.some(se=>se.nr_startowy===o)).length,l=m.value.filter(o=>o.qr_code).length,a=p.value.length;return{total:R,selected:d,withQr:l,generated:a}}),k=async()=>{u.value=!0;try{const R=await fetch("/api/zawodnicy?limit=1000");if(R.ok){const d=await R.json();M.value=d.data||d||[],console.log(`🔍 QrPrint: Załadowano ${M.value.length} zawodników`)}}catch(R){console.error("Błąd podczas ładowania zawodników:",R)}finally{u.value=!1}},G=R=>{const d=g.value.indexOf(R);d>-1?g.value.splice(d,1):g.value.push(R)},v=()=>{const R=m.value.map(d=>d.nr_startowy);g.value=[...new Set([...g.value,...R])]},n=()=>{if(w.value){const R=m.value.map(d=>d.nr_startowy);g.value=g.value.filter(d=>!R.includes(d))}else v()},x=()=>{if(!T.value)return;const R=m.value.filter(d=>d.kategoria===T.value).map(d=>d.nr_startowy);g.value=[...new Set([...g.value,...R])]},$=()=>{if(T.value)if(P.value){const R=m.value.filter(d=>d.kategoria===T.value).map(d=>d.nr_startowy);g.value=g.value.filter(d=>!R.includes(d))}else x()},V=()=>{if(!z.value)return;const R=m.value.filter(d=>d.klub===z.value).map(d=>d.nr_startowy);g.value=[...new Set([...g.value,...R])]},U=()=>{if(z.value)if(Y.value){const R=m.value.filter(d=>d.klub===z.value).map(d=>d.nr_startowy);g.value=g.value.filter(d=>!R.includes(d))}else V()},le=()=>{const R=m.value.filter(d=>!d.qr_code).map(d=>d.nr_startowy);g.value=[...new Set([...g.value,...R])]},A=()=>{if(X.value){const R=m.value.filter(d=>!d.qr_code).map(d=>d.nr_startowy);g.value=g.value.filter(d=>!R.includes(d))}else le()},b=()=>{g.value=[]},N=async()=>{if(B.value.length!==0){S.value=!0;try{const R=await fetch("/api/qr/bulk-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numery_startowe:B.value})});if(R.ok){const d=await R.json(),l=p.value.map(o=>o.zawodnik.nr_startowy),a=d.data.codes.filter(o=>!l.includes(o.zawodnik.nr_startowy));p.value=[...p.value,...a],await k()}else console.error("Błąd podczas generowania QR kodów")}catch(R){console.error("Błąd:",R)}finally{S.value=!1}}},ae=async()=>{if(q.value.length!==0){S.value=!0;try{const d=q.value.map(o=>M.value.find(se=>se.nr_startowy===o)).filter(Boolean).map(async o=>{if(!o.qr_code)return null;const be=await(await Bn(()=>import("./browser-BR0oiPy3.js").then(f=>f.b),__vite__mapDeps([0,1]))).toDataURL(o.qr_code,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});return{zawodnik:o,qr_code:o.qr_code,qr_image:be}}),a=(await Promise.all(d)).filter(Boolean);p.value=a,I.value=!0}catch(R){console.error("Błąd podczas przygotowywania QR kodów do druku:",R)}finally{S.value=!1}}},de=()=>{window.print(),I.value=!1},W=()=>{p.value=[]},ue=()=>{T.value="",z.value="",F.value="",c.value="nr_startowy_asc",g.value=[]},ce=()=>{if(g.value.length===m.value.length&&m.value.length>0){const R=m.value.map(d=>d.nr_startowy);g.value=g.value.filter(d=>!R.includes(d))}else v()},te=async R=>{S.value=!0;try{const d=await fetch("/api/qr/bulk-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numery_startowe:[R]})});if(d.ok){const l=await d.json();p.value=[...p.value,...l.data.codes],await k()}else console.error("Błąd podczas generowania QR kodu")}catch(d){console.error("Błąd:",d)}finally{S.value=!1}},oe=R=>m.value.filter(d=>d.kategoria===R).length,ie=R=>m.value.filter(d=>d.klub===R).length;return me(()=>{k()}),(R,d)=>(s(),r("div",qn,[e("div",Pn,[e("div",Dn,[D(Q(Be),{class:"h-8 w-8 text-indigo-600"}),d[6]||(d[6]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Drukowanie QR kodów",-1))]),e("div",On,[e("button",{onClick:N,disabled:B.value.length===0||S.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm font-medium transition-colors duration-200"},[D(Q(Ie),{class:"h-5 w-5"}),e("span",null,"Generuj QR ("+t(B.value.length)+")",1)],8,Fn),e("button",{onClick:ae,disabled:q.value.length===0||S.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm font-medium transition-colors duration-200"},[D(Q(Be),{class:"h-5 w-5"}),e("span",null,"Drukuj ("+t(q.value.length)+")",1)],8,Gn)])]),e("div",En,[e("div",{class:"flex items-center justify-between mb-6"},[d[8]||(d[8]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:ue,class:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 flex items-center space-x-1 transition-colors duration-200"},d[7]||(d[7]=[e("span",null,"🗑️",-1),e("span",null,"Wyczyść wszystko",-1)]))]),e("div",Kn,[e("div",null,[d[10]||(d[10]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),J(e("select",{"onUpdate:modelValue":d[0]||(d[0]=l=>T.value=l),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[d[9]||(d[9]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(_.value,l=>(s(),r("option",{key:l,value:l},t(l)+" ("+t(oe(l))+") ",9,Qn))),128))],512),[[re,T.value]])]),e("div",null,[d[12]||(d[12]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),J(e("select",{"onUpdate:modelValue":d[1]||(d[1]=l=>z.value=l),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[d[11]||(d[11]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(y.value,l=>(s(),r("option",{key:l,value:l},t(l)+" ("+t(ie(l))+") ",9,Vn))),128))],512),[[re,z.value]])]),e("div",null,[d[14]||(d[14]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"📱"),e("span",null,"Status QR")])],-1)),J(e("select",{"onUpdate:modelValue":d[2]||(d[2]=l=>F.value=l),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[d[13]||(d[13]=e("option",{value:""},"Wszystkie",-1)),e("option",Un,"✅ Z QR kodami ("+t(j.value.withQr)+")",1),e("option",Ln,"❌ Bez QR kodów ("+t(j.value.total-j.value.withQr)+")",1)],512),[[re,F.value]])])]),e("div",Wn,[e("div",null,[d[16]||(d[16]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":d[3]||(d[3]=l=>c.value=l),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},d[15]||(d[15]=[ne('<option value="nr_startowy_asc" data-v-915efc9f>Nr startowy (rosnąco)</option><option value="nr_startowy_desc" data-v-915efc9f>Nr startowy (malejąco)</option><option value="nazwisko_asc" data-v-915efc9f>Nazwisko (A-Z)</option><option value="nazwisko_desc" data-v-915efc9f>Nazwisko (Z-A)</option><option value="kategoria_asc" data-v-915efc9f>Kategoria (A-Z)</option><option value="klub_asc" data-v-915efc9f>Klub (A-Z)</option><option value="qr_status" data-v-915efc9f>Status QR (najpierw bez QR)</option>',7)]),512),[[re,c.value]])])]),e("div",Hn,[d[18]||(d[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"⚡"),e("span",null,"Operacje grupowe")])],-1)),e("div",Jn,[e("button",{onClick:n,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2",w.value?"bg-indigo-700 text-white shadow-inner border-2 border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-2 border-transparent"])},[e("span",null,t(w.value?"✅":"☐"),1),e("span",null,t(w.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" ("+t(m.value.length)+")",1)],2),e("button",{onClick:$,disabled:!T.value,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",T.value?P.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(T.value?P.value?"✅":"☐":"🏆"),1),e("span",null,t(T.value?P.value?`Odznacz: ${T.value}`:`Zaznacz: ${T.value}`:"Wybierz kategorię"),1)],10,Yn),e("button",{onClick:U,disabled:!z.value,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",z.value?Y.value?"bg-purple-700 text-white shadow-inner border-purple-800":"bg-purple-600 text-white hover:bg-purple-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(z.value?Y.value?"✅":"☐":"🏢"),1),e("span",null,t(z.value?Y.value?`Odznacz: ${z.value}`:`Zaznacz: ${z.value}`:"Wybierz klub"),1)],10,Xn),e("button",{onClick:A,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",m.value.filter(l=>!l.qr_code).length===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":X.value?"bg-orange-700 text-white shadow-inner border-orange-800":"bg-orange-600 text-white hover:bg-orange-700 border-transparent"]),disabled:m.value.filter(l=>!l.qr_code).length===0},[e("span",null,t(X.value?"✅":"☐"),1),e("span",null,t(X.value?"Odznacz bez QR":"Zaznacz bez QR")+" ("+t(m.value.filter(l=>!l.qr_code).length)+")",1)],10,el),e("button",{onClick:b,disabled:g.value.length===0,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent",g.value.length>0?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[d[17]||(d[17]=e("span",null,"🗑️",-1)),e("span",null,"Wyczyść zaznaczenia ("+t(g.value.length)+")",1)],10,tl)])])]),e("div",al,[e("div",sl,[e("div",rl,t(j.value.total),1),d[19]||(d[19]=e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Po filtrach",-1))]),e("div",ol,[e("div",nl,t(j.value.selected),1),d[20]||(d[20]=e("div",{class:"text-sm text-green-700 dark:text-green-300"},"Zaznaczonych",-1))]),e("div",ll,[e("div",il,t(j.value.withQr),1),d[21]||(d[21]=e("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"Z QR kodami",-1))]),e("div",dl,[e("div",ul,t(j.value.generated),1),d[22]||(d[22]=e("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Do druku",-1))])]),e("div",cl,[e("div",gl,[e("h3",pl," Lista zawodników ("+t(m.value.length)+") ",1),e("div",yl," Zaznaczono: "+t(g.value.length),1)]),e("div",xl,[e("div",vl,[e("input",{type:"checkbox",checked:g.value.length===m.value.length&&m.value.length>0,onChange:ce,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mr-3"},null,40,bl),d[23]||(d[23]=ee(" Nr startowy "))]),d[24]||(d[24]=e("div",null,"Imię i nazwisko",-1)),d[25]||(d[25]=e("div",null,"Kategoria",-1)),d[26]||(d[26]=e("div",null,"Klub",-1)),d[27]||(d[27]=e("div",null,"Status QR",-1)),d[28]||(d[28]=e("div",null,"Akcje",-1))]),e("div",ml,[m.value.length===0?(s(),r("div",kl,d[29]||(d[29]=[e("div",{class:"text-4xl mb-2"},"🔍",-1),e("div",{class:"text-lg font-medium mb-1"},"Brak zawodników",-1),e("div",{class:"text-sm"},"Spróbuj zmienić kryteria filtrowania",-1)]))):Z("",!0),e("div",wl,[(s(!0),r(L,null,H(m.value,l=>(s(),r("div",{key:l.nr_startowy,class:"p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[e("div",fl,[e("input",{type:"checkbox",checked:g.value.includes(l.nr_startowy),onChange:a=>G(l.nr_startowy),class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mt-1"},null,40,hl),e("div",_l,[e("div",zl,[e("div",$l," #"+t(l.nr_startowy),1),e("div",Cl,[l.qr_code?(s(),r("div",jl,[D(Q(Me),{class:"h-3 w-3 mr-1"}),d[30]||(d[30]=e("span",null,"QR",-1))])):(s(),r("div",Sl,[D(Q(Te),{class:"h-3 w-3 mr-1"}),d[31]||(d[31]=e("span",null,"Brak QR",-1))]))])]),e("div",Il,t(l.imie)+" "+t(l.nazwisko),1),e("div",Ml,[e("span",Tl,t(l.kategoria),1),e("span",Rl,t(l.klub||"-"),1)])])])]))),128))]),e("div",Al,[(s(!0),r(L,null,H(m.value,l=>(s(),r("div",{key:l.nr_startowy,class:"grid grid-cols-6 gap-4 p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 items-center text-sm transition-colors duration-200"},[e("div",Nl,[e("input",{type:"checkbox",checked:g.value.includes(l.nr_startowy),onChange:a=>G(l.nr_startowy),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded mr-3"},null,40,Zl),e("span",Bl,"#"+t(l.nr_startowy),1)]),e("div",ql,t(l.imie)+" "+t(l.nazwisko),1),e("div",Pl,t(l.kategoria),1),e("div",Dl,t(l.klub||"-"),1),e("div",Ol,[l.qr_code?(s(),r("div",Fl,[D(Q(Me),{class:"h-4 w-4 mr-1"}),d[32]||(d[32]=e("span",{class:"text-xs font-medium"},"Tak",-1))])):(s(),r("div",Gl,[D(Q(Te),{class:"h-4 w-4 mr-1"}),d[33]||(d[33]=e("span",{class:"text-xs font-medium"},"Nie",-1))]))]),e("div",null,[l.qr_code?Z("",!0):(s(),r("button",{key:0,onClick:a=>te(l.nr_startowy),class:"text-xs bg-indigo-600 text-white px-3 py-1 rounded-md hover:bg-indigo-700 font-medium transition-colors duration-200"}," Generuj QR ",8,El))])]))),128))])])]),p.value.length>0?(s(),r("div",Kl,[e("div",Ql,[e("h3",Vl," Wygenerowane QR kody ("+t(p.value.length)+") ",1),e("button",{onClick:W,class:"text-sm text-red-600 hover:text-red-800"}," Wyczyść ")]),e("div",Ul,[(s(!0),r(L,null,H(p.value,l=>(s(),r("div",{key:l.zawodnik.nr_startowy,class:"text-center p-2 border rounded"},[e("img",{src:l.qr_image,alt:`QR ${l.zawodnik.nr_startowy}`,class:"w-16 h-16 mx-auto mb-1"},null,8,Ll),e("div",Wl,t(l.zawodnik.nr_startowy),1),e("div",Hl,t(l.zawodnik.imie)+" "+t(l.zawodnik.nazwisko),1)]))),128))])])):Z("",!0),I.value?(s(),r("div",Jl,[e("div",Yl,[e("div",Xl,[d[34]||(d[34]=e("h3",{class:"text-lg font-semibold"},"Podgląd wydruku",-1)),e("button",{onClick:d[4]||(d[4]=l=>I.value=!1),class:"text-gray-400 hover:text-gray-600"},[D(Q(Le),{class:"h-6 w-6"})])]),e("div",ei,[e("button",{onClick:de,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," Drukuj teraz "),e("button",{onClick:d[5]||(d[5]=l=>I.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"}," Anuluj ")]),e("div",ti,[e("div",ai,[(s(!0),r(L,null,H(p.value,l=>(s(),r("div",{key:l.zawodnik.nr_startowy,class:"sticker"},[e("div",si,[e("div",ri,t(l.zawodnik.nr_startowy),1),e("div",oi,t(l.zawodnik.imie)+" "+t(l.zawodnik.nazwisko),1)]),e("div",ni,[e("img",{src:l.qr_image,alt:`QR ${l.zawodnik.nr_startowy}`,class:"qr-code"},null,8,li)]),e("div",ii,[e("div",di,t(l.zawodnik.kategoria),1),e("div",ui,t(l.zawodnik.klub||""),1)])]))),128))])])])])):Z("",!0)]))}}),gi=we(ci,[["__scopeId","data-v-915efc9f"]]),pi={class:"group relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105"},yi={class:"relative p-6"},xi={class:"flex items-center justify-between mb-4"},vi={key:0,class:"flex items-center space-x-1"},bi={key:0,class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mi={key:1,class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ki={key:2,class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wi={class:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2"},fi={class:"flex items-baseline justify-between"},hi={class:"text-3xl font-bold text-gray-900 dark:text-white"},_i={key:0,class:"text-sm text-gray-500 dark:text-gray-400 ml-2"},zi={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},$i={key:1,class:"mt-4"},Ci={class:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1"},ji={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Si={key:0,class:"px-6 pb-6"},je=ve({__name:"EnhancedStatsCard",props:{title:{},value:{},icon:{},color:{},subtitle:{},unit:{},trend:{},trendValue:{},progress:{},actionLabel:{}},emits:["action"],setup(K,{emit:M}){const g=K,p=O(()=>typeof g.value=="number"?g.value.toLocaleString():g.value),u=O(()=>({blue:"bg-gradient-to-br from-blue-500 to-blue-600",green:"bg-gradient-to-br from-green-500 to-green-600",red:"bg-gradient-to-br from-red-500 to-red-600",purple:"bg-gradient-to-br from-purple-500 to-purple-600",yellow:"bg-gradient-to-br from-yellow-500 to-yellow-600",indigo:"bg-gradient-to-br from-indigo-500 to-indigo-600",pink:"bg-gradient-to-br from-pink-500 to-pink-600",cyan:"bg-gradient-to-br from-cyan-500 to-cyan-600"})[g.color]),S=O(()=>({blue:"text-blue-600",green:"text-green-600",red:"text-red-600",purple:"text-purple-600",yellow:"text-yellow-600",indigo:"text-indigo-600",pink:"text-pink-600",cyan:"text-cyan-600"})[g.color]),I=O(()=>({blue:"bg-blue-100 dark:bg-blue-900",green:"bg-green-100 dark:bg-green-900",red:"bg-red-100 dark:bg-red-900",purple:"bg-purple-100 dark:bg-purple-900",yellow:"bg-yellow-100 dark:bg-yellow-900",indigo:"bg-indigo-100 dark:bg-indigo-900",pink:"bg-pink-100 dark:bg-pink-900",cyan:"bg-cyan-100 dark:bg-cyan-900"})[g.color]),T=O(()=>({blue:"bg-blue-500",green:"bg-green-500",red:"bg-red-500",purple:"bg-purple-500",yellow:"bg-yellow-500",indigo:"bg-indigo-500",pink:"bg-pink-500",cyan:"bg-cyan-500"})[g.color]),z=O(()=>({blue:"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800",green:"bg-green-50 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-800",red:"bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800",purple:"bg-purple-50 dark:bg-purple-900 text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-800",yellow:"bg-yellow-50 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 hover:bg-yellow-100 dark:hover:bg-yellow-800",indigo:"bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-100 dark:hover:bg-indigo-800",pink:"bg-pink-50 dark:bg-pink-900 text-pink-700 dark:text-pink-300 hover:bg-pink-100 dark:hover:bg-pink-800",cyan:"bg-cyan-50 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300 hover:bg-cyan-100 dark:hover:bg-cyan-800"})[g.color]),F=O(()=>g.trend==="up"?"text-green-600 dark:text-green-400":g.trend==="down"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400");return(c,_)=>(s(),r("div",pi,[e("div",{class:E(["absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity duration-300",u.value])},null,2),e("div",yi,[e("div",xi,[e("div",{class:E(["p-3 rounded-xl shadow-lg",I.value])},[typeof c.icon!="string"?(s(),xe(Re(c.icon),{key:0,class:E([S.value,"h-6 w-6"])},null,8,["class"])):(s(),r("span",{key:1,class:E([S.value,"text-xl font-semibold"])},t(c.icon),3))],2),c.trend?(s(),r("div",vi,[c.trend==="up"?(s(),r("svg",bi,_[1]||(_[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 17l9.2-9.2M17 17V7h-10"},null,-1)]))):c.trend==="down"?(s(),r("svg",mi,_[2]||(_[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 7l-9.2 9.2M7 7v10h10"},null,-1)]))):(s(),r("svg",ki,_[3]||(_[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h8"},null,-1)]))),c.trendValue?(s(),r("span",{key:3,class:E([F.value,"text-sm font-medium"])},t(c.trendValue),3)):Z("",!0)])):Z("",!0)]),e("h3",wi,t(c.title),1),e("div",fi,[e("span",hi,t(p.value),1),c.unit?(s(),r("span",_i,t(c.unit),1)):Z("",!0)]),c.subtitle?(s(),r("p",zi,t(c.subtitle),1)):Z("",!0),c.progress!==void 0?(s(),r("div",$i,[e("div",Ci,[_[4]||(_[4]=e("span",null,"Progress",-1)),e("span",null,t(Math.round(c.progress))+"%",1)]),e("div",ji,[e("div",{class:E([T.value,"h-2 rounded-full transition-all duration-500 ease-out"]),style:Se(`width: ${Math.min(c.progress,100)}%`)},null,6)])])):Z("",!0)]),c.actionLabel?(s(),r("div",Si,[e("button",{onClick:_[0]||(_[0]=y=>c.$emit("action")),class:E(["w-full py-2 px-4 rounded-lg text-sm font-medium transition-all duration-200",z.value])},t(c.actionLabel),3)])):Z("",!0)]))}}),Ii={class:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"},Mi={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},Ti={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ri={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},Ai={class:"mt-4 lg:mt-0 grid grid-cols-3 gap-4"},Ni={class:"text-center"},Zi={class:"text-xl lg:text-2xl font-bold text-indigo-600 dark:text-indigo-400"},Bi={class:"text-center"},qi={class:"text-xl lg:text-2xl font-bold text-green-600 dark:text-green-400"},Pi={class:"text-center"},Di={class:"text-xl lg:text-2xl font-bold text-purple-600 dark:text-purple-400"},Oi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Fi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Gi={class:"mb-8"},Ei={class:"relative overflow-hidden rounded-3xl bg-white dark:bg-gray-800 shadow-xl"},Ki={class:"relative px-8 py-12 text-center"},Qi={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Vi={class:"bg-white bg-opacity-20 rounded-lg p-3"},Ui={class:"text-2xl font-bold"},Li={class:"bg-white bg-opacity-20 rounded-lg p-3"},Wi={class:"text-2xl font-bold"},Hi={class:"bg-white bg-opacity-20 rounded-lg p-3"},Ji={class:"text-2xl font-bold"},Yi={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},Xi={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500 to-purple-700 shadow-xl hover:shadow-2xl"},ed={class:"relative px-8 py-12 text-center"},td={class:"text-lg font-semibold text-white"},ad={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-500 to-cyan-600 shadow-xl hover:shadow-2xl"},sd={class:"relative px-8 py-12 text-center"},rd={class:"text-lg font-semibold text-white"},od={class:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-500 to-emerald-600 shadow-xl hover:shadow-2xl"},nd={class:"relative px-8 py-12 text-center"},ld={class:"text-lg font-semibold text-white"},id={class:"mb-8"},dd={class:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-orange-500 to-red-600 shadow-xl hover:shadow-2xl"},ud={class:"relative px-8 py-16 text-center"},cd={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},gd={class:"bg-white bg-opacity-20 rounded-lg p-3"},pd={class:"text-xl font-bold"},yd={class:"bg-white bg-opacity-20 rounded-lg p-3"},xd={class:"text-xl font-bold"},vd={class:"bg-white bg-opacity-20 rounded-lg p-3"},bd={class:"text-xl font-bold"},md={class:"mb-8"},kd={class:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-yellow-500 to-orange-500 shadow-xl hover:shadow-2xl"},wd={class:"relative px-8 py-16 text-center"},fd={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},hd={class:"bg-white bg-opacity-20 rounded-lg p-3"},_d={class:"text-xl font-bold"},zd={class:"bg-white bg-opacity-20 rounded-lg p-3"},$d={class:"text-xl font-bold"},Cd={class:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8"},jd={class:"flex items-center justify-between mb-6"},Sd=["disabled"],Id={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},Md={key:0,class:"space-y-4"},Td={class:"text-white text-lg"},Rd={class:"flex-1"},Ad={class:"text-sm font-medium text-gray-900 dark:text-white"},Nd={class:"text-xs text-gray-500 dark:text-gray-400"},Zd={class:"text-xs text-gray-400 dark:text-gray-500"},Bd={key:1,class:"text-center py-8"},qd=ve({__name:"Dashboard",emits:["navigate"],setup(K,{emit:M}){const g=M,p=h({totalZawodnicy:0,qrGenerated:0,checkedIn:0,activeCategories:0,clubsCount:0}),u=h(!1),S=h([{id:1,title:"System QR aktywny",description:"Dashboard gotowy do pracy",time:"Teraz",icon:"🔲",color:"bg-blue-500"}]),I=O(()=>({qrProgress:p.value.totalZawodnicy>0?Math.round(p.value.qrGenerated/p.value.totalZawodnicy*100):0,checkinProgress:p.value.totalZawodnicy>0?Math.round(p.value.checkedIn/p.value.totalZawodnicy*100):0,readiness:p.value.totalZawodnicy>0?Math.round((p.value.checkedIn+p.value.qrGenerated)/(p.value.totalZawodnicy*2)*100):0})),T=_=>{g("navigate",_)},z=async()=>{try{u.value=!0;const y=(await ye.get("/api/zawodnicy?limit=1000")).data.data||[];console.log(`📊 Dashboard: Załadowano ${y.length} zawodników`),p.value.totalZawodnicy=y.length,p.value.qrGenerated=y.filter(P=>P.qr_code).length,p.value.checkedIn=y.filter(P=>P.checked_in).length;const m=[...new Set(y.map(P=>P.kategoria).filter(Boolean))];p.value.activeCategories=m.length;const w=[...new Set(y.map(P=>P.klub).filter(Boolean))];p.value.clubsCount=w.length,F()}catch(_){console.error("Błąd ładowania statystyk:",_),p.value={totalZawodnicy:8,qrGenerated:6,checkedIn:4,activeCategories:4,clubsCount:3}}finally{u.value=!1}},F=()=>{const _=[];p.value.totalZawodnicy>0&&_.push({id:Date.now(),title:`${p.value.totalZawodnicy} zawodników zarejestrowanych`,description:`${p.value.activeCategories} kategorii, ${p.value.clubsCount} klubów`,time:"5 min temu",icon:"👥",color:"bg-blue-500"}),p.value.qrGenerated>0&&_.push({id:Date.now()+1,title:`${p.value.qrGenerated} kodów QR wygenerowanych`,description:`${I.value.qrProgress}% pokrycie QR`,time:"10 min temu",icon:"🔲",color:"bg-purple-500"}),p.value.checkedIn>0&&_.push({id:Date.now()+2,title:`${p.value.checkedIn} zawodników zameldowanych`,description:`${I.value.checkinProgress}% gotowości do startu`,time:"15 min temu",icon:"✅",color:"bg-green-500"}),S.value=_},c=()=>{z()};return me(()=>{z(),setInterval(z,3e4)}),(_,y)=>(s(),r("div",Ii,[e("div",Mi,[e("div",Ti,[e("div",Ri,[y[12]||(y[12]=ne('<div class="flex items-center space-x-4" data-v-51d7a59c><div class="p-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl" data-v-51d7a59c><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-51d7a59c></path></svg></div><div data-v-51d7a59c><h1 class="text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white" data-v-51d7a59c> SKATECROSS QR Dashboard </h1><p class="text-gray-600 dark:text-gray-400 text-sm lg:text-base" data-v-51d7a59c> Zarządzanie systemem QR turnieju SKATECROSS </p></div></div>',1)),e("div",Ai,[e("div",Ni,[e("div",Zi,t(p.value.totalZawodnicy),1),y[9]||(y[9]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"👤 Zawodnicy",-1))]),e("div",Bi,[e("div",qi,t(p.value.qrGenerated),1),y[10]||(y[10]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"🔲 Kody QR",-1))]),e("div",Pi,[e("div",Di,t(p.value.checkedIn),1),y[11]||(y[11]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"✅ Zameldowani",-1))])])])])]),e("div",Oi,[e("div",Fi,[D(je,{title:"Łączna liczba zawodników",value:p.value.totalZawodnicy,icon:"👥",color:"blue",subtitle:`${p.value.activeCategories} kategorii aktywnych`,progress:p.value.checkedIn/p.value.totalZawodnicy*100,trend:p.value.totalZawodnicy>0?"up":"neutral",actionLabel:"Zobacz wszystkich",onAction:y[0]||(y[0]=m=>T("zawodnicy"))},null,8,["value","subtitle","progress","trend"]),D(je,{title:"Kody QR wygenerowane",value:p.value.qrGenerated,icon:"🔲",color:"purple",subtitle:`${Math.round(p.value.qrGenerated/p.value.totalZawodnicy*100)}% pokrycie`,progress:p.value.qrGenerated/p.value.totalZawodnicy*100,trend:p.value.qrGenerated>0?"up":"neutral",actionLabel:"Generuj QR",onAction:y[1]||(y[1]=m=>T("qr-print"))},null,8,["value","subtitle","progress","trend"]),D(je,{title:"Zameldowani zawodnicy",value:p.value.checkedIn,icon:"✅",color:"green",subtitle:`${Math.round(p.value.checkedIn/p.value.totalZawodnicy*100)}% zameldowanych`,progress:p.value.checkedIn/p.value.totalZawodnicy*100,trend:p.value.checkedIn>0?"up":"neutral",actionLabel:"Centrum startu",onAction:y[2]||(y[2]=m=>T("unified-start"))},null,8,["value","subtitle","progress","trend"]),D(je,{title:"Aktywne kategorie",value:p.value.activeCategories,icon:"🏆",color:"yellow",subtitle:`${p.value.clubsCount} klubów uczestniczy`,progress:100,trend:"neutral",actionLabel:"Zobacz rankingi",onAction:y[3]||(y[3]=m=>T("rankingi"))},null,8,["value","subtitle"])]),e("div",Gi,[e("div",Ei,[y[17]||(y[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 opacity-90"},null,-1)),e("div",Ki,[y[16]||(y[16]=ne('<div class="flex items-center justify-center mb-4" data-v-51d7a59c><svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-51d7a59c></path></svg></div><h2 class="text-3xl lg:text-4xl font-bold text-white mb-2" data-v-51d7a59c>Visualization</h2><p class="text-indigo-100 text-lg" data-v-51d7a59c>Dane turnieju prezentowane w przejrzysty sposób</p>',3)),e("div",Qi,[e("div",Vi,[e("div",Ui,t(I.value.qrProgress)+"%",1),y[13]||(y[13]=e("div",{class:"text-indigo-100"},"QR Coverage",-1))]),e("div",Li,[e("div",Wi,t(I.value.checkinProgress)+"%",1),y[14]||(y[14]=e("div",{class:"text-indigo-100"},"Check-in Rate",-1))]),e("div",Hi,[e("div",Ji,t(I.value.readiness)+"%",1),y[15]||(y[15]=e("div",{class:"text-indigo-100"},"Tournament Ready",-1))])])])])]),e("div",Yi,[e("div",{onClick:y[4]||(y[4]=m=>T("zawodnicy")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",Xi,[y[19]||(y[19]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",ed,[y[18]||(y[18]=ne('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-51d7a59c></path></svg></div><h3 class="text-2xl font-bold text-white mb-3" data-v-51d7a59c>👤 Management</h3><p class="text-purple-100 text-sm mb-4" data-v-51d7a59c>Zarządzanie zawodnikami</p>',3)),e("div",td,t(p.value.totalZawodnicy)+" zawodników",1)])])]),e("div",{onClick:y[5]||(y[5]=m=>T("qr-dashboard")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",ad,[y[21]||(y[21]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",sd,[y[20]||(y[20]=ne('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-51d7a59c></path></svg></div><h3 class="text-2xl font-bold text-white mb-1" data-v-51d7a59c>🔲 QR System</h3><h3 class="text-xl font-semibold text-white mb-3" data-v-51d7a59c>Solutions</h3><p class="text-blue-100 text-sm mb-4" data-v-51d7a59c>Admin Dashboard QR</p>',4)),e("div",rd,t(p.value.qrGenerated)+" kodów QR",1)])])]),e("div",{onClick:y[6]||(y[6]=m=>T("unified-start")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",od,[y[23]||(y[23]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",nd,[y[22]||(y[22]=ne('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-51d7a59c></path></svg></div><h3 class="text-xl font-bold text-white mb-1" data-v-51d7a59c>🏁 Start Line</h3><h3 class="text-xl font-bold text-white mb-1" data-v-51d7a59c>Response</h3><h3 class="text-xl font-bold text-white mb-3" data-v-51d7a59c>Management</h3><p class="text-green-100 text-sm mb-4" data-v-51d7a59c>Centrum startu i skaner</p>',5)),e("div",ld,t(p.value.checkedIn)+" zameldowanych",1)])])])]),e("div",id,[e("div",{onClick:y[7]||(y[7]=m=>T("rankingi")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",dd,[y[28]||(y[28]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",ud,[y[27]||(y[27]=ne('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-51d7a59c></path></svg></div><h2 class="text-3xl lg:text-4xl font-bold text-white mb-3" data-v-51d7a59c>Key Analytics</h2><p class="text-orange-100 text-lg mb-6" data-v-51d7a59c>Rankingi i statystyki turnieju</p>',3)),e("div",cd,[e("div",gd,[e("div",pd,t(p.value.activeCategories),1),y[24]||(y[24]=e("div",{class:"text-orange-100"},"Kategorie",-1))]),e("div",yd,[e("div",xd,t(p.value.clubsCount),1),y[25]||(y[25]=e("div",{class:"text-orange-100"},"Kluby",-1))]),e("div",vd,[e("div",bd,t(I.value.readiness)+"%",1),y[26]||(y[26]=e("div",{class:"text-orange-100"},"Gotowość",-1))])])])])])]),e("div",md,[e("div",{onClick:y[8]||(y[8]=m=>T("qr-print")),class:"group cursor-pointer transform hover:scale-105 transition-all duration-300"},[e("div",kd,[y[32]||(y[32]=e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),e("div",wd,[y[31]||(y[31]=ne('<div class="flex items-center justify-center mb-6" data-v-51d7a59c><svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51d7a59c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" data-v-51d7a59c></path></svg></div><h2 class="text-2xl lg:text-3xl font-bold text-white mb-3" data-v-51d7a59c>Building blocks: QR Print System</h2><p class="text-yellow-100 text-lg mb-6" data-v-51d7a59c>System generowania i druku kodów QR</p>',3)),e("div",fd,[e("div",hd,[e("div",_d,t(p.value.qrGenerated)+"/"+t(p.value.totalZawodnicy),1),y[29]||(y[29]=e("div",{class:"text-yellow-100"},"QR Generated",-1))]),e("div",zd,[e("div",$d,t(I.value.qrProgress)+"%",1),y[30]||(y[30]=e("div",{class:"text-yellow-100"},"Coverage",-1))])])])])])]),e("div",Cd,[e("div",jd,[y[34]||(y[34]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white flex items-center"},[e("span",{class:"mr-2"},"📈"),ee(" Ostatnia aktywność turnieju ")],-1)),e("button",{onClick:c,disabled:u.value,class:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 text-sm font-medium disabled:opacity-50 flex items-center"},[u.value?(s(),r("svg",Id,y[33]||(y[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Z("",!0),ee(" "+t(u.value?"Ładowanie...":"Odśwież"),1)],8,Sd)]),S.value.length>0?(s(),r("div",Md,[(s(!0),r(L,null,H(S.value,m=>(s(),r("div",{key:m.id,class:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200"},[e("div",{class:E(["p-2 rounded-lg",m.color])},[e("span",Td,t(m.icon),1)],2),e("div",Rd,[e("p",Ad,t(m.title),1),e("p",Nd,t(m.description),1)]),e("div",Zd,t(m.time),1)]))),128))])):(s(),r("div",Bd,y[35]||(y[35]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"Brak aktywności",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Rozpocznij turniej, aby zobaczyć aktywność",-1)])))])])]))}}),Pd=we(qd,[["__scopeId","data-v-51d7a59c"]]),Dd={class:"start-groups-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Od={class:"flex items-center justify-between mb-6"},Fd={class:"flex items-center space-x-2"},Gd=["disabled"],Ed={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Kd={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qd={key:0,class:"space-y-4"},Vd={key:0,class:"bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-xl p-4 mb-6"},Ud={class:"flex items-center justify-between"},Ld={class:"flex items-center space-x-3"},Wd={class:"text-sm opacity-90"},Hd={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Jd={class:"flex items-center justify-between mb-3"},Yd={class:"flex items-center space-x-2"},Xd={class:"font-semibold text-gray-900 dark:text-white"},e0={class:"text-sm text-gray-600 dark:text-gray-400"},t0={class:"flex items-center justify-between mb-4"},a0={class:"font-semibold text-gray-900 dark:text-white"},s0={class:"space-y-2"},r0=["onClick","disabled"],o0=["onClick"],n0={key:2,class:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-lg text-center text-sm"},l0={key:3,class:"flex space-x-2"},i0=["onClick"],d0=["onClick","disabled"],u0={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},c0={class:"text-xs text-gray-700 dark:text-gray-300 max-h-16 overflow-y-auto"},g0={key:0,class:"text-gray-500 dark:text-gray-400"},p0={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},y0={class:"text-xl font-bold text-gray-900 dark:text-white"},x0={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},v0={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},b0={key:0,class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},m0={class:"text-sm text-blue-800 dark:text-blue-200"},k0={key:0,class:"space-y-2"},w0={class:"flex items-center space-x-3"},f0={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center text-sm font-bold text-blue-600 dark:text-blue-400"},h0={class:"font-medium text-gray-900 dark:text-white"},_0={class:"text-sm text-gray-600 dark:text-gray-400"},z0=["onClick"],$0={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},C0={class:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700"},j0={key:1},S0={key:2,class:"text-center py-12"},I0={__name:"StartGroupsCard",props:{groups:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["group-activated","group-deactivated","refresh-requested"],setup(K,{emit:M}){const g=K,p=M,u=h(!1),S=h(null),I=h(null),T=h(!1),z=O(()=>g.groups.find(n=>n.status==="ACTIVE"||n.status==="TIMING")),F=n=>n.status==="ACTIVE"||n.status==="TIMING"?"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-700":n.liczba_zawodnikow>0?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700",c=n=>n.status==="ACTIVE"||n.status==="TIMING"?"bg-purple-600 text-white":n.liczba_zawodnikow>0?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",_=n=>n.status==="ACTIVE"||n.status==="TIMING"?"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":n.liczba_zawodnikow>0?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",y=n=>n.status==="ACTIVE"?"AKTYWNA":n.status==="TIMING"?"POMIARY":n.status==="COMPLETED"?"ZAKOŃCZONA":n.liczba_zawodnikow>0?"GOTOWA":"PUSTA",m=n=>n.kategoria?n.kategoria.substring(0,3):"",w=async n=>{console.log("🏁 Activating group:",n);try{const $=await(await fetch("/api/unified/activate-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:n.kategoria,plec:n.plec})})).json();$.success?p("group-activated",{group:n,session:$.session,message:$.message}):(console.error("❌ Group activation failed:",$.error),alert(`Błąd aktywacji grupy: ${$.error}`))}catch(x){console.error("❌ Group activation error:",x),alert("Błąd połączenia podczas aktywacji grupy")}},P=async n=>{console.log("⏹️ Deactivating group:",n);try{const $=await(await fetch("/api/unified/deactivate-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:n.kategoria,plec:n.plec})})).json();$.success?p("group-deactivated",{group:n,message:$.message}):(console.error("❌ Group deactivation failed:",$.error),alert(`Błąd dezaktywacji grupy: ${$.error}`))}catch(x){console.error("❌ Group deactivation error:",x),alert("Błąd połączenia podczas dezaktywacji grupy")}},Y=()=>{p("refresh-requested")},X=async n=>{S.value=n,T.value=!0,u.value=!0;try{const $=await(await fetch(`/api/unified/group-details/${encodeURIComponent(n.kategoria)}/${encodeURIComponent(n.plec)}`)).json();$.success?I.value=$.data:(console.error("❌ Group details failed:",$.error),alert(`Błąd pobierania szczegółów: ${$.error}`))}catch(x){console.error("❌ Group details error:",x),alert("Błąd połączenia podczas pobierania szczegółów grupy")}finally{T.value=!1}},q=async n=>{var x,$;if(confirm(`Czy na pewno chcesz usunąć zawodnika #${n} z grupy?`))try{const U=await(await fetch("/api/unified/remove-athlete-from-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nr_startowy:n,kategoria:(x=S.value)==null?void 0:x.kategoria,plec:($=S.value)==null?void 0:$.plec})})).json();U.success?(alert(`✅ ${U.message}`),await X(S.value),p("refresh-requested")):alert(`❌ ${U.error}`)}catch(V){console.error("❌ Remove athlete error:",V),alert("Błąd połączenia podczas usuwania zawodnika")}},B=async n=>{const x=n.status==="ACTIVE"||n.status==="TIMING",$=x?`Grupa "${n.kategoria} ${n.plec}" jest aktywna i ma sesję SECTRO. Czy na pewno chcesz ją wymusić usunięcie?`:`Czy na pewno chcesz usunąć grupę "${n.kategoria} ${n.plec}" z ${n.liczba_zawodnikow} zawodnikami?`;confirm($)&&await k(n,x)},j=async()=>{if(!S.value||!I.value)return;const n=S.value,x=n.status==="ACTIVE"||n.status==="TIMING",$=x?"Grupa ma aktywną sesję SECTRO. Czy na pewno chcesz wymusić usunięcie całej grupy?":`Czy na pewno chcesz usunąć całą grupę z ${I.value.group.athletes_count} zawodnikami?`;confirm($)&&(G(),await k(n,x))},k=async(n,x=!1)=>{try{const V=await(await fetch("/api/unified/delete-group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kategoria:n.kategoria,plec:n.plec,force:x})})).json();if(V.success){let U=`✅ ${V.message}`;V.errors&&V.errors.length>0&&(U+=`

Błędy:
${V.errors.join(`
`)}`),V.session_cancelled&&(U+=`

⚠️ Sesja SECTRO została anulowana`),alert(U),p("refresh-requested")}else alert(`❌ ${V.error}`)}catch($){console.error("❌ Delete group error:",$),alert("Błąd połączenia podczas usuwania grupy")}},G=()=>{u.value=!1,S.value=null,I.value=null},v=n=>n?new Date(n).toLocaleString("pl-PL"):"Brak danych";return(n,x)=>{var $,V,U,le,A,b,N,ae,de;return s(),r("div",Dd,[e("div",Od,[x[5]||(x[5]=ne('<div class="flex items-center space-x-3" data-v-64a19cda><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center" data-v-64a19cda><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-64a19cda><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-64a19cda></path></svg></div><div data-v-64a19cda><h2 class="text-xl font-bold text-gray-900 dark:text-white" data-v-64a19cda>Grupy Startowe</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-64a19cda>Zarządzanie grupami i aktywacja SECTRO</p></div></div>',1)),e("div",Fd,[e("button",{onClick:Y,disabled:K.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[K.loading?(s(),r("svg",Ed,x[2]||(x[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",Kd,x[3]||(x[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),x[4]||(x[4]=e("span",{class:"ml-2"},"Odśwież",-1))],8,Gd)])]),K.groups&&K.groups.length>0?(s(),r("div",Qd,[z.value?(s(),r("div",Vd,[e("div",Ud,[e("div",Ld,[x[7]||(x[7]=e("div",{class:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[x[6]||(x[6]=e("div",{class:"font-semibold"},"🎯 Aktywna grupa",-1)),e("div",Wd,t(z.value.kategoria_nazwa)+" "+t(z.value.plec)+" • "+t(z.value.liczba_zawodnikow)+" zawodników",1)])]),e("button",{onClick:x[0]||(x[0]=W=>P(z.value)),class:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg font-medium transition-colors duration-200"}," ⏹️ Zakończ ")])])):Z("",!0),e("div",Hd,[(s(!0),r(L,null,H(K.groups,W=>{var ue,ce;return s(),r("div",{key:W.id,class:E([F(W),"p-4 rounded-xl border transition-all duration-200 hover:shadow-md"])},[e("div",Jd,[e("div",Yd,[e("div",{class:E([c(W),"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold"])},t(m(W)),3),e("div",null,[e("div",Xd,t(W.kategoria),1),e("div",e0,t(W.plec),1)])]),e("div",{class:E([_(W),"px-2 py-1 rounded-full text-xs font-medium"])},t(y(W)),3)]),e("div",t0,[x[8]||(x[8]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Zawodnicy:")],-1)),e("span",a0,t(W.liczba_zawodnikow),1)]),e("div",s0,[W.status!=="ACTIVE"&&W.status!=="TIMING"&&W.liczba_zawodnikow>0?(s(),r("button",{key:0,onClick:te=>w(W),disabled:K.loading,class:"w-full px-4 py-2 bg-blue-600 disabled:bg-gray-400 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2"},x[9]||(x[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",null,"Aktywuj grupę",-1)]),8,r0)):W.status==="ACTIVE"||W.status==="TIMING"?(s(),r("button",{key:1,onClick:te=>P(W),class:"w-full px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 flex items-center justify-center space-x-2"},x[10]||(x[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 9l6 6m0-6l-6 6"})],-1),e("span",null,"Dezaktywuj",-1)]),8,o0)):W.liczba_zawodnikow===0?(s(),r("div",n0," Brak zawodników ")):Z("",!0),W.liczba_zawodnikow>0?(s(),r("div",l0,[e("button",{onClick:te=>X(W),class:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center justify-center space-x-1"},x[11]||(x[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",null,"Szczegóły",-1)]),8,i0),e("button",{onClick:te=>B(W),disabled:W.status==="ACTIVE"||W.status==="TIMING",class:"flex-1 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors duration-200 flex items-center justify-center space-x-1 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"},x[12]||(x[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",null,"Usuń",-1)]),8,d0)])):Z("",!0)]),W.liczba_zawodnikow>0?(s(),r("div",u0,[x[13]||(x[13]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"Zameldowani zawodnicy:",-1)),e("div",c0,[(s(!0),r(L,null,H((ue=W.zawodnicy)==null?void 0:ue.slice(0,3),te=>(s(),r("div",{key:te.nr_startowy,class:"truncate"}," • "+t(te.imie)+" "+t(te.nazwisko)+" (#"+t(te.nr_startowy)+") ",1))),128)),((ce=W.zawodnicy)==null?void 0:ce.length)>3?(s(),r("div",g0," ... i "+t(W.zawodnicy.length-3)+" więcej ",1)):Z("",!0)])])):Z("",!0)],2)}),128))])])):Z("",!0),u.value?(s(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:G},[e("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:x[1]||(x[1]=Ve(()=>{},["stop"]))},[e("div",p0,[e("div",null,[e("h3",y0," Szczegóły grupy: "+t(($=S.value)==null?void 0:$.kategoria)+" "+t((V=S.value)==null?void 0:V.plec),1),e("p",x0,t((le=(U=I.value)==null?void 0:U.group)==null?void 0:le.athletes_count)+" zawodników ",1)]),e("button",{onClick:G,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},x[14]||(x[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",v0,[(A=I.value)!=null&&A.session?(s(),r("div",b0,[x[18]||(x[18]=e("h4",{class:"font-semibold text-blue-900 dark:text-blue-100 mb-2"},"Sesja SECTRO",-1)),e("div",m0,[e("p",null,[x[15]||(x[15]=e("strong",null,"Nazwa:",-1)),ee(" "+t(I.value.session.nazwa),1)]),e("p",null,[x[16]||(x[16]=e("strong",null,"Status:",-1)),ee(" "+t(I.value.session.status),1)]),e("p",null,[x[17]||(x[17]=e("strong",null,"Utworzona:",-1)),ee(" "+t(v(I.value.session.created_at)),1)])])])):Z("",!0),e("div",null,[x[19]||(x[19]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-4"},"Lista zawodników",-1)),((N=(b=I.value)==null?void 0:b.athletes)==null?void 0:N.length)>0?(s(),r("div",k0,[(s(!0),r(L,null,H(I.value.athletes,W=>(s(),r("div",{key:W.nr_startowy,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",w0,[e("div",f0,t(W.nr_startowy),1),e("div",null,[e("div",h0,t(W.imie)+" "+t(W.nazwisko),1),e("div",_0,t(W.klub)+" • Zameldowany: "+t(v(W.check_in_time)),1)])]),e("button",{onClick:ue=>q(W.nr_startowy),class:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors duration-200"}," Usuń ",8,z0)]))),128))])):(s(),r("div",$0," Brak zawodników w grupie "))])]),e("div",C0,[((de=(ae=I.value)==null?void 0:ae.group)==null?void 0:de.athletes_count)>0?(s(),r("button",{key:0,onClick:j,class:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200"}," Usuń całą grupę ")):(s(),r("div",j0)),e("button",{onClick:G,class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200"}," Zamknij ")])])])):!K.groups||K.groups.length===0?(s(),r("div",S0,x[20]||(x[20]=[ne('<svg class="w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-64a19cda><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-64a19cda></path></svg><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2" data-v-64a19cda>Brak grup startowych</h3><p class="text-gray-600 dark:text-gray-400 mb-4" data-v-64a19cda> Grupy startowe tworzone są automatycznie po zameldowaniu zawodników </p><div class="text-sm text-gray-500 dark:text-gray-400" data-v-64a19cda> 💡 Przejdź do QR Scanner aby zameldować pierwszych zawodników </div>',4)]))):Z("",!0)])}}},M0=we(I0,[["__scopeId","data-v-64a19cda"]]),T0={class:"live-timing-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},R0={class:"flex items-center justify-between mb-6"},A0={class:"flex items-center space-x-3"},N0={class:"text-sm text-gray-600 dark:text-gray-400"},Z0={key:0},B0={key:1},q0={class:"flex items-center space-x-2"},P0=["disabled"],D0={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},O0={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F0={key:0,class:"mb-8"},G0={class:"bg-gradient-to-br from-purple-500 to-blue-600 text-white rounded-xl p-6"},E0={class:"flex items-center justify-between mb-4"},K0={class:"text-2xl font-bold"},Q0={class:"text-sm opacity-90"},V0={class:"text-right"},U0={class:"text-3xl font-mono font-bold"},L0={class:"flex items-center justify-between text-sm"},W0={class:"flex items-center space-x-4"},H0={class:"flex-1 h-0.5 bg-white/30 mx-2 relative"},J0={key:0,class:"absolute left-0 top-0 h-full bg-green-300 animate-pulse",style:{width:"50%"}},Y0={class:"mb-8"},X0={key:0,class:"space-y-3"},eu={class:"flex items-center justify-between"},tu={class:"flex items-center space-x-3"},au={class:"font-medium text-gray-900 dark:text-white"},su={class:"text-sm text-gray-600 dark:text-gray-400"},ru={class:"text-right"},ou={key:0,class:"text-sm font-mono font-semibold text-gray-900 dark:text-white"},nu={key:1,class:"text-sm font-mono text-blue-600 dark:text-blue-400"},lu={key:0,class:"text-center py-2 text-sm text-gray-500 dark:text-gray-400"},iu={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},du={class:"border-t border-gray-200 dark:border-gray-600 pt-6"},uu={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},cu={class:"mb-4"},gu=["value"],pu={class:"flex space-x-2 mb-4"},yu=["disabled"],xu={class:"flex space-x-2"},vu={class:"text-xs font-medium"},bu={__name:"LiveTimingCard",props:{sessions:{type:Array,required:!0,default:()=>[]},queue:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["timing-started","measurement-recorded","refresh-requested"],setup(K,{emit:M}){const g=K,p=M,u=h(""),S=h(""),I=h(null);h(0);const T=h(null),z=h(0);h(null),h(new Map);const F=O(()=>g.sessions.map(v=>`${v.kategoria} ${v.plec}`).join(", ")),c=O(()=>{const v=g.queue.find($=>$.unified_status==="RUNNING"||$.unified_status==="TIMING");if(v)return{...v,current_time:_(v)};const n=g.queue.find($=>$.start_time&&!$.finish_time);if(n)return{...n,current_time:_(n)};const x=g.queue.filter($=>$.start_time).sort(($,V)=>new Date(V.start_time)-new Date($.start_time))[0];return x&&(Date.now()-new Date(x.start_time))/1e3<30?{...x,current_time:_(x)}:null}),_=v=>{if(!v.start_time)return 0;z.value;const n=new Date(v.start_time).getTime(),x=v.finish_time?new Date(v.finish_time).getTime():Date.now();return Math.max(0,(x-n)/1e3)},y=()=>g.sessions.every(n=>n.status==="active")&&g.sessions.length>0?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",m=()=>{if(g.sessions.length===0)return"BRAK SESJI";const v=g.sessions.filter(n=>n.status==="active").length;return v===g.sessions.length?`${v} AKTYWNA${v>1?"E":""}`:`${v}/${g.sessions.length} AKTYWNE`},w=(v,n)=>v.unified_status==="RUNNING"||v.unified_status==="TIMING"?"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-700":v.unified_status==="FINISHED"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":n===0?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",P=v=>v===0?"bg-blue-600 text-white":v===1?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",Y=v=>{switch(v){case"RUNNING":case"TIMING":return"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400";case"FINISHED":return"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400";case"READY":return"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}},X=v=>{switch(v){case"RUNNING":return"BIEGNIE";case"TIMING":return"TIMING";case"FINISHED":return"UKOŃCZONE";case"READY":return"GOTOWY";default:return"OCZEKUJE"}},q=v=>{if(!v||v<0)return"00:00.00";const n=Math.floor(v/60),x=v%60;return`${n.toString().padStart(2,"0")}:${x.toFixed(2).padStart(5,"0")}`},B=async()=>{u.value.trim()&&(await k(u.value.trim()),u.value="")},j=async v=>{const n=new Date,x=n.getHours().toString().padStart(2,"0"),$=n.getMinutes().toString().padStart(2,"0"),V=n.getSeconds().toString().padStart(2,"0"),U=n.getMilliseconds().toString().padStart(3,"0"),le=`${x}${$}${V}${U}`;let A="";switch(v){case"START":A=`CZL1${le}`;break;case"FINISH":A=`CZL4${le}`;break;case"INVALID":A=`INVALID${le}`;break}console.log(`🧪 Generuję ramkę testową: ${A}`),await k(A)},k=async v=>{var n;try{const $=await(await fetch("/api/unified/record-measurement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:(n=g.sessions[0])==null?void 0:n.id,raw_frame:v,nr_startowy:S.value})})).json();I.value={success:$.success,message:$.message||$.error},$.success&&p("measurement-recorded",$),setTimeout(()=>{I.value=null},5e3)}catch(x){console.error("❌ Frame processing error:",x),I.value={success:!1,message:"Błąd połączenia z serwerem"}}},G=()=>{p("refresh-requested")};return me(()=>{g.queue.length>0&&(S.value=g.queue[0].nr_startowy),T.value=setInterval(()=>{z.value=Date.now();const v=c.value;v?console.log("⏱️ Timer tick:",{name:`${v.imie} ${v.nazwisko}`,start_time:v.start_time,current_time:v.current_time,unified_status:v.unified_status}):(console.log("⏱️ Timer tick: Brak currentRunner"),console.log("📊 Queue data:",g.queue.map(n=>({nr:n.nr_startowy,name:`${n.imie} ${n.nazwisko}`,status:n.unified_status,start_time:n.start_time,finish_time:n.finish_time}))))},1e3)}),qe(()=>{T.value&&clearInterval(T.value)}),(v,n)=>(s(),r("div",T0,[e("div",R0,[e("div",A0,[n[6]||(n[6]=e("div",{class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[n[5]||(n[5]=e("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"SECTRO Live Timing",-1)),e("p",N0,[K.sessions.length===1?(s(),r("span",Z0,t(K.sessions[0].kategoria)+" "+t(K.sessions[0].plec)+" • "+t(K.sessions[0].nazwa),1)):(s(),r("span",B0,t(K.sessions.length)+" aktywnych grup: "+t(F.value),1))])])]),e("div",q0,[e("div",{class:E([y(),"px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-2"])},[e("div",{class:E(["w-2 h-2 rounded-full animate-pulse",K.sessions.some(x=>x.status==="active")?"bg-green-400":"bg-yellow-400"])},null,2),e("span",null,t(m()),1)],2),e("button",{onClick:G,disabled:K.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[K.loading?(s(),r("svg",D0,n[7]||(n[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",O0,n[8]||(n[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,P0)])]),c.value?(s(),r("div",F0,[e("div",G0,[e("div",E0,[e("div",null,[n[9]||(n[9]=e("div",{class:"text-sm opacity-90"},"🏃 Aktualnie na trasie:",-1)),e("div",K0,t(c.value.imie)+" "+t(c.value.nazwisko),1),e("div",Q0,t(c.value.klub),1)]),e("div",V0,[e("div",U0,t(q(c.value.current_time)),1),n[10]||(n[10]=e("div",{class:"text-sm opacity-90"},"Czas biegu",-1))])]),e("div",L0,[e("div",W0,[e("div",{class:E([c.value.start_time?"text-green-300":"text-white/50","flex items-center space-x-1"])},[e("div",{class:E(["w-3 h-3 rounded-full",c.value.start_time?"bg-green-300":"bg-white/50"])},null,2),n[11]||(n[11]=e("span",null,"START",-1))],2),e("div",H0,[c.value.start_time&&!c.value.finish_time?(s(),r("div",J0)):Z("",!0)]),e("div",{class:E([c.value.finish_time?"text-green-300":"text-white/50","flex items-center space-x-1"])},[e("div",{class:E(["w-3 h-3 rounded-full",c.value.finish_time?"bg-green-300":"bg-white/50"])},null,2),n[12]||(n[12]=e("span",null,"FINISH",-1))],2)])])])])):Z("",!0),e("div",Y0,[n[13]||(n[13]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Kolejka startowa",-1)),K.queue.length>0?(s(),r("div",X0,[(s(!0),r(L,null,H(K.queue.slice(0,10),(x,$)=>(s(),r("div",{key:x.nr_startowy,class:E([w(x,$),"p-4 rounded-lg border transition-all duration-200"])},[e("div",eu,[e("div",tu,[e("div",{class:E([P($),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t($+1),3),e("div",null,[e("div",au,t(x.imie)+" "+t(x.nazwisko)+" (#"+t(x.nr_startowy)+") ",1),e("div",su,t(x.klub),1)])]),e("div",ru,[e("div",{class:E([Y(x.unified_status),"px-2 py-1 rounded-full text-xs font-medium mb-1"])},t(X(x.unified_status)),3),x.final_time?(s(),r("div",ou,t(q(x.final_time)),1)):x.current_time?(s(),r("div",nu,t(q(x.current_time)),1)):Z("",!0)])])],2))),128)),K.queue.length>10?(s(),r("div",lu," ... i "+t(K.queue.length-10)+" więcej w kolejce ",1)):Z("",!0)])):(s(),r("div",iu," Brak zawodników w kolejce "))]),e("div",du,[n[15]||(n[15]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Manual Testing",-1)),e("div",uu,[e("div",cu,[J(e("select",{"onUpdate:modelValue":n[0]||(n[0]=x=>S.value=x),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"},[n[14]||(n[14]=e("option",{value:""},"-- Wybierz zawodnika do testów --",-1)),(s(!0),r(L,null,H(K.queue.slice(0,5),x=>(s(),r("option",{key:x.nr_startowy,value:x.nr_startowy}," #"+t(x.nr_startowy)+" - "+t(x.imie)+" "+t(x.nazwisko)+" ("+t(x.unified_status)+") ",9,gu))),128))],512),[[re,S.value]])]),e("div",pu,[J(e("input",{"onUpdate:modelValue":n[1]||(n[1]=x=>u.value=x),onKeyup:Je(B,["enter"]),placeholder:"Wpisz ramkę SECTRO (np. CZL1123456789)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"},null,544),[[pe,u.value]]),e("button",{onClick:B,disabled:!u.value.trim()||!S.value,class:"px-4 py-2 bg-purple-600 disabled:bg-gray-400 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 text-sm"}," Wyślij ",8,yu)]),e("div",xu,[e("button",{onClick:n[2]||(n[2]=x=>j("START")),class:"px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors"}," Test START "),e("button",{onClick:n[3]||(n[3]=x=>j("FINISH")),class:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors"}," Test FINISH "),e("button",{onClick:n[4]||(n[4]=x=>j("INVALID")),class:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors"}," Test Invalid ")]),I.value?(s(),r("div",{key:0,class:E(["mt-3 p-2 rounded",I.value.success?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400"])},[e("div",vu,t(I.value.message),1)],2)):Z("",!0)])])]))}},mu=we(bu,[["__scopeId","data-v-66dbbd7b"]]),ku={class:"results-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},wu={class:"flex items-center justify-between mb-6"},fu={class:"flex items-center space-x-2"},hu=["disabled"],_u={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},zu={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$u={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},Cu={class:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},ju={class:"flex items-center justify-between"},Su={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Iu={class:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},Mu={class:"flex items-center justify-between"},Tu={class:"text-2xl font-bold text-green-900 dark:text-green-100"},Ru={class:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800"},Au={class:"flex items-center justify-between"},Nu={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},Zu={class:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800"},Bu={class:"flex items-center justify-between"},qu={class:"text-2xl font-bold text-orange-900 dark:text-orange-100"},Pu={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},Du={key:0,class:"divide-y divide-gray-200 dark:divide-gray-600"},Ou={class:"grid grid-cols-12 gap-4 items-center"},Fu={class:"col-span-1"},Gu={class:"col-span-4"},Eu={class:"flex items-center space-x-3"},Ku={class:"flex-1"},Qu={class:"font-semibold text-gray-900 dark:text-white"},Vu={class:"text-sm text-gray-600 dark:text-gray-400"},Uu={key:0,class:"text-yellow-500"},Lu={key:1,class:"text-gray-400"},Wu={key:2,class:"text-amber-600"},Hu={class:"col-span-3"},Ju={class:"text-sm text-gray-900 dark:text-white"},Yu={class:"col-span-2"},Xu={key:0,class:"text-lg font-mono font-bold text-gray-900 dark:text-white"},ec={key:1,class:"text-lg font-mono text-blue-600 dark:text-blue-400"},tc={key:2,class:"text-sm text-gray-500 dark:text-gray-400"},ac={key:3,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},sc={key:0},rc={key:1},oc={class:"col-span-2"},nc={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},lc={class:"text-xs text-gray-400 mt-1"},ic={key:1,class:"px-6 py-12 text-center"},dc={__name:"ResultsCard",props:{sessionId:{type:Number,required:!0},results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh-requested"],setup(K,{emit:M}){const g=K,p=M,u=O(()=>{const q=g.results.filter(j=>j.unified_status==="FINISHED"&&j.total_time).sort((j,k)=>j.total_time-k.total_time).map((j,k)=>({...j,position:k+1})),B=g.results.filter(j=>j.unified_status!=="FINISHED"||!j.total_time).map(j=>({...j,position:null}));return[...q,...B]}),S=O(()=>u.value.filter(q=>q.unified_status==="FINISHED"&&q.total_time)),I=O(()=>S.value.length),T=O(()=>u.value.filter(q=>q.unified_status!=="FINISHED").length),z=O(()=>{const q=S.value;return q.length===0?null:Math.min(...q.map(B=>B.total_time))}),F=O(()=>z.value?w(z.value):"--:--"),c=O(()=>{const q=S.value;if(q.length===0)return"--:--";const j=q.reduce((k,G)=>k+G.total_time,0)/q.length;return w(j)}),_=(q,B)=>q.unified_status==="RUNNING"||q.unified_status==="TIMING"?"bg-purple-50 dark:bg-purple-900/10":q.position===1?"bg-yellow-50 dark:bg-yellow-900/10":q.position===2?"bg-gray-50 dark:bg-gray-800":q.position===3?"bg-amber-50 dark:bg-amber-900/10":"bg-white dark:bg-gray-800",y=q=>{const B=u.value[q];return B.position===1?"bg-yellow-500 text-white":B.position===2?"bg-gray-400 text-white":B.position===3?"bg-amber-600 text-white":B.total_time?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},m=q=>{switch(q){case"FINISHED":return"UKOŃCZONE";case"RUNNING":return"BIEGNIE";case"TIMING":return"TIMING";case"READY":return"GOTOWY";default:return"OCZEKUJE"}},w=q=>{if(!q||q<0)return"00:00.00";const B=Math.floor(q/60),j=q%60;return`${B.toString().padStart(2,"0")}:${j.toFixed(2).padStart(5,"0")}`},P=q=>new Date(q).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Y=async()=>{p("refresh-requested")},X=()=>{const B=[["Pozycja","Zawodnik","Klub","Czas","Start","Finish","Status"].join(",")];u.value.forEach(v=>{const n=[v.position||"",`"${v.imie} ${v.nazwisko}"`,`"${v.klub||""}"`,v.total_time?w(v.total_time):"",v.start_time?P(v.start_time):"",v.finish_time?P(v.finish_time):"",m(v.unified_status)];B.push(n.join(","))});const j=B.join(`
`),k=new Blob([j],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a");if(G.download!==void 0){const v=URL.createObjectURL(k);G.setAttribute("href",v),G.setAttribute("download",`wyniki_sesja_${g.sessionId}_${new Date().toISOString().slice(0,10)}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G)}};return(q,B)=>(s(),r("div",ku,[e("div",wu,[B[2]||(B[2]=ne('<div class="flex items-center space-x-3" data-v-3e005c7d><div class="w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center" data-v-3e005c7d><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3e005c7d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" data-v-3e005c7d></path></svg></div><div data-v-3e005c7d><h2 class="text-xl font-bold text-gray-900 dark:text-white" data-v-3e005c7d>Wyniki</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-3e005c7d>Ranking i analiza sesji</p></div></div>',1)),e("div",fu,[e("button",{onClick:X,class:"px-4 py-2 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg font-medium hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors duration-200"}," 📊 Eksport "),e("button",{onClick:Y,disabled:K.loading,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},[K.loading?(s(),r("svg",_u,B[0]||(B[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",zu,B[1]||(B[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,hu)])]),e("div",$u,[e("div",Cu,[e("div",ju,[e("div",null,[B[3]||(B[3]=e("div",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"Ukończone",-1)),e("div",Su,t(I.value),1)]),B[4]||(B[4]=e("div",{class:"w-10 h-10 bg-blue-200 dark:bg-blue-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Iu,[e("div",Mu,[e("div",null,[B[5]||(B[5]=e("div",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"Najlepszy czas",-1)),e("div",Tu,t(F.value),1)]),B[6]||(B[6]=e("div",{class:"w-10 h-10 bg-green-200 dark:bg-green-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",Ru,[e("div",Au,[e("div",null,[B[7]||(B[7]=e("div",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"Średni czas",-1)),e("div",Nu,t(c.value),1)]),B[8]||(B[8]=e("div",{class:"w-10 h-10 bg-purple-200 dark:bg-purple-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])]),e("div",Zu,[e("div",Bu,[e("div",null,[B[9]||(B[9]=e("div",{class:"text-sm font-medium text-orange-600 dark:text-orange-400"},"W kolejce",-1)),e("div",qu,t(T.value),1)]),B[10]||(B[10]=e("div",{class:"w-10 h-10 bg-orange-200 dark:bg-orange-800 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),e("div",Pu,[B[12]||(B[12]=ne('<div class="bg-gray-50 dark:bg-gray-700 px-6 py-3 border-b border-gray-200 dark:border-gray-600" data-v-3e005c7d><div class="grid grid-cols-12 gap-4 text-sm font-medium text-gray-600 dark:text-gray-400" data-v-3e005c7d><div class="col-span-1" data-v-3e005c7d>Poz.</div><div class="col-span-4" data-v-3e005c7d>Zawodnik</div><div class="col-span-3" data-v-3e005c7d>Klub</div><div class="col-span-2" data-v-3e005c7d>Czas</div><div class="col-span-2" data-v-3e005c7d>Status</div></div></div>',1)),u.value.length>0?(s(),r("div",Du,[(s(!0),r(L,null,H(u.value,(j,k)=>(s(),r("div",{key:j.nr_startowy,class:E([_(j),"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"])},[e("div",Ou,[e("div",Fu,[e("div",{class:E([y(k),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t(j.position||"-"),3)]),e("div",Gu,[e("div",Eu,[e("div",Ku,[e("div",Qu,t(j.imie)+" "+t(j.nazwisko),1),e("div",Vu," ID: "+t(j.nr_startowy),1)]),j.position===1?(s(),r("div",Uu,"🥇")):j.position===2?(s(),r("div",Lu,"🥈")):j.position===3?(s(),r("div",Wu,"🥉")):Z("",!0)])]),e("div",Hu,[e("div",Ju,t(j.klub||"Brak klubu"),1)]),e("div",Yu,[j.total_time?(s(),r("div",Xu,t(w(j.total_time)),1)):j.current_time?(s(),r("div",ec,t(w(j.current_time)),1)):(s(),r("div",tc," -:--.-- ")),j.start_time||j.finish_time?(s(),r("div",ac,[j.start_time?(s(),r("div",sc,"Start: "+t(P(j.start_time)),1)):Z("",!0),j.finish_time?(s(),r("div",rc,"Finish: "+t(P(j.finish_time)),1)):Z("",!0)])):Z("",!0)]),e("div",oc,[j.position>1&&j.total_time&&z.value?(s(),r("div",nc," +"+t(w(j.total_time-z.value)),1)):Z("",!0),e("div",lc," Status: "+t(j.unified_status),1)])])],2))),128))])):(s(),r("div",ic,B[11]||(B[11]=[e("svg",{class:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Brak wyników",-1),e("p",{class:"text-gray-600 dark:text-gray-400"}," Wyniki pojawią się po ukończeniu biegu przez zawodników ",-1)])))])]))}},uc=we(dc,[["__scopeId","data-v-3e005c7d"]]),cc={class:"unified-start-control min-h-screen bg-gray-50 dark:bg-gray-900 p-6"},gc={class:"mb-8"},pc={class:"flex items-center justify-between"},yc={class:"text-right"},xc={class:"mt-4 flex items-center space-x-2"},vc={class:"mt-2 flex space-x-10"},bc={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},mc={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},kc={class:"flex items-center justify-between"},wc={class:"text-2xl font-bold text-green-600 dark:text-green-400"},fc={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},hc={class:"flex items-center justify-between"},_c={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},zc={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},$c={class:"flex items-center justify-between"},Cc={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},jc={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Sc={class:"flex items-center justify-between"},Ic={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Mc={class:"space-y-8"},Tc={class:"fixed bottom-8 right-8"},Rc=["disabled"],Ac={key:0,class:"w-6 h-6 animate-spin",fill:"none",viewBox:"0 0 24 24"},Nc={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zc={__name:"UnifiedStartControl",setup(K){const M=h(!1),g=h([]),p=h([]),u=h(null),S=h([]),I=h({}),T=h(null),z=["Grupy","Timing","Wyniki"],F=O(()=>g.value.some(v=>v.liczba_zawodnikow>0)),c=O(()=>g.value.filter(v=>v.liczba_zawodnikow>0).length),_=O(()=>p.value.some(v=>v.unified_status==="FINISHED"||v.unified_status==="TIMING")),y=O(()=>u.value&&_.value?"3. Wyniki":u.value?"2. Live Timing":(F.value,"1. Grupy Startowe")),m=()=>{const v=y.value;return v.includes("Wyniki")?"text-green-600 dark:text-green-400":v.includes("Timing")?"text-purple-600 dark:text-purple-400":v.includes("Grupy")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"},w=v=>{const n=X();return v<n?"bg-green-500 text-white":v===n?"bg-blue-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400"},P=v=>{const n=X();return v<n?"bg-green-500":"bg-gray-300 dark:bg-gray-600"},Y=v=>{const n=X();return v<n?"text-green-600 dark:text-green-400":v===n?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"},X=()=>u.value&&_.value?2:u.value?1:(F.value,0),q=async()=>{var v;M.value=!0;try{const x=await(await fetch("/api/unified/dashboard-data")).json();x.success?(g.value=x.groups||[],p.value=x.queue||[],u.value=x.activeSession,S.value=x.activeSessions||[],I.value=x.stats||{},console.log("✅ Unified dashboard data refreshed:",{groups:g.value.length,queue:p.value.length,activeSession:((v=u.value)==null?void 0:v.id)||"none",currentPhase:y.value})):console.error("❌ Error refreshing unified data:",x.error)}catch(n){console.error("❌ Network error refreshing unified data:",n)}finally{M.value=!1}},B=async v=>{console.log("🏁 Group activated:",v),await q(),setTimeout(()=>{const n=document.querySelector(".live-timing-card");n&&n.scrollIntoView({behavior:"smooth"})},500)},j=async v=>{console.log("⏹️ Group deactivated:",v),await q()},k=async v=>{console.log("⏱️ Timing started:",v),await q()},G=async v=>{console.log("📊 Measurement recorded:",v),await q(),_.value&&setTimeout(()=>{const n=document.querySelector(".results-card");n&&n.scrollIntoView({behavior:"smooth"})},500)};return me(()=>{q(),T.value=setInterval(q,1e4)}),qe(()=>{T.value&&clearInterval(T.value)}),(v,n)=>{var x,$;return s(),r("div",cc,[e("div",gc,[e("div",pc,[n[1]||(n[1]=ne('<div class="flex items-center space-x-4" data-v-3d3ad122><div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center" data-v-3d3ad122><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3d3ad122><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-3d3ad122></path></svg></div><div data-v-3d3ad122><h1 class="text-3xl font-bold text-gray-900 dark:text-white" data-v-3d3ad122>Unified Start Control</h1><p class="text-gray-600 dark:text-gray-400" data-v-3d3ad122>Centrum Startu + SECTRO Live Timing</p></div></div>',1)),e("div",yc,[n[0]||(n[0]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faza workflow:",-1)),e("div",{class:E(["text-lg font-semibold",m()])},t(y.value),3)])]),e("div",xc,[(s(),r(L,null,H(z,(V,U)=>e("div",{key:U,class:"flex items-center"},[e("div",{class:E([w(U),"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold"])},t(U+1),3),U<z.length-1?(s(),r("div",{key:0,class:E([P(U),"w-8 h-0.5 mx-2"])},null,2)):Z("",!0)])),64))]),e("div",vc,[(s(),r(L,null,H(z,(V,U)=>e("div",{key:U,class:E([Y(U),"text-xs font-medium"])},t(V),3)),64))])]),e("div",bc,[e("div",mc,[e("div",kc,[e("div",null,[n[2]||(n[2]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Zameldowani",-1)),e("p",wc,t(((x=I.value.zawodnicy)==null?void 0:x.zameldowani)||0),1)]),n[3]||(n[3]=e("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",fc,[e("div",hc,[e("div",null,[n[4]||(n[4]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Grupy gotowe",-1)),e("p",_c,t(c.value),1)]),n[5]||(n[5]=e("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),e("div",zc,[e("div",$c,[e("div",null,[n[6]||(n[6]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Sesje SECTRO",-1)),e("p",Cc,t((($=I.value.sectro)==null?void 0:$.active_sessions)||0),1)]),n[7]||(n[7]=e("div",{class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",jc,[e("div",Sc,[e("div",null,[n[8]||(n[8]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"W kolejce",-1)),e("p",Ic,t(p.value.length),1)]),n[9]||(n[9]=e("div",{class:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1))])])]),e("div",Mc,[D(M0,{groups:g.value,loading:M.value,onGroupActivated:B,onGroupDeactivated:j,onRefreshRequested:q},null,8,["groups","loading"]),S.value&&S.value.length>0?(s(),xe(mu,{key:0,sessions:S.value,queue:p.value,loading:M.value,onTimingStarted:k,onMeasurementRecorded:G,onRefreshRequested:q},null,8,["sessions","queue","loading"])):Z("",!0),u.value&&_.value?(s(),xe(uc,{key:1,"session-id":u.value.id,results:p.value,loading:M.value,onRefreshRequested:q},null,8,["session-id","results","loading"])):Z("",!0)]),e("div",Tc,[e("button",{onClick:q,disabled:M.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-4 rounded-full shadow-lg transition-all duration-200"},[M.value?(s(),r("svg",Ac,n[10]||(n[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(s(),r("svg",Nc,n[11]||(n[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,Rc)])])}}},Bc=we(Zc,[["__scopeId","data-v-3d3ad122"]]),qc={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},Pc={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200"},Dc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Oc={class:"flex justify-between items-center h-16"},Fc={class:"flex items-center flex-shrink-0"},Gc={class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white transition-colors duration-200"},Ec={key:0,class:"ml-1 sm:ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"},Kc={class:"hidden sm:block flex-1 max-w-lg mx-8"},Qc={class:"relative"},Vc={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Uc={class:"flex items-center space-x-2 sm:space-x-4"},Lc={class:"flex items-center space-x-1 sm:space-x-2"},Wc={class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200"},Hc=["title"],Jc={class:"w-7 h-7 sm:w-8 sm:h-8 bg-indigo-500 rounded-full flex items-center justify-center"},Yc={class:"text-white text-xs sm:text-sm font-medium"},Xc={class:"pb-4 sm:hidden"},eg={class:"relative"},tg={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ag={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},sg={class:"border-b border-gray-200 dark:border-gray-700"},rg={class:"-mb-px flex flex-wrap gap-x-4 gap-y-2 sm:space-x-8 sm:gap-y-0","aria-label":"Tabs"},og=["onClick"],ng={class:"text-xs sm:text-sm"},lg={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},ig={key:0},dg={key:1,class:"space-y-6"},ug={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},cg={class:"bg-white dark:bg-gray-800 shadow rounded-lg transition-colors duration-200"},gg={class:"px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700"},pg={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},yg=["value"],xg=["value"],vg={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},bg={class:"flex flex-wrap gap-3"},mg=["disabled"],kg=["disabled"],wg=["disabled"],fg=["disabled"],hg={class:"md:hidden p-4 space-y-4"},_g={class:"hidden md:block overflow-x-auto"},zg={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$g={class:"bg-gray-50 dark:bg-gray-700"},Cg={class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},jg=["checked"],Sg={key:0,class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ig={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Mg={class:"px-6 py-4 whitespace-nowrap"},Tg=["checked","onChange"],Rg={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},Ag={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},Ng={class:"px-6 py-4 whitespace-nowrap"},Zg={class:"text-base font-medium text-gray-900 dark:text-white"},Bg={class:"px-6 py-4 whitespace-nowrap text-base text-gray-600 dark:text-gray-300"},qg={class:"px-6 py-4 whitespace-nowrap"},Pg={class:"px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900 dark:text-white"},Dg={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Og={class:"flex flex-col space-y-2"},Fg=["onClick"],Gg={key:0,class:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6"},Eg={class:"flex-1 flex justify-between sm:hidden"},Kg=["disabled"],Qg=["disabled"],Vg={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ug={class:"text-sm text-gray-700 dark:text-gray-300"},Lg={class:"font-medium"},Wg={class:"font-medium"},Hg={class:"font-medium"},Jg={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Yg=["disabled"],Xg=["disabled"],ep=["onClick"],tp={key:0,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300"},ap=["disabled"],sp=["disabled"],rp={key:2},op={key:3},np={key:4},lp={key:5},ip={key:6},ze=50,dp=ve({__name:"App",setup(K){const M=h([]),g=h(""),p=h(!0),u=h(localStorage.getItem("darkMode")==="true"),S=h(!0);h(null);const I=h(!1),T=h(null),z=h("unified-start"),F=h({kluby:[],kategorie:[],plcie:[],statusy:[]}),c=h({kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"}),_=h([]),y=h(1),m=O(()=>Y.value.length),w=O(()=>Math.ceil(m.value/ze)),P=[{id:"dashboard",name:"Dashboard",icon:Ce,adminOnly:!1},{id:"zawodnicy",name:"Zawodnicy",icon:De,adminOnly:!1},{id:"drabinka",name:"Drabinka",icon:he,adminOnly:!1},{id:"rankingi",name:"Rankingi",icon:ot,adminOnly:!1},{id:"unified-start",name:"Start Control",icon:Pe,adminOnly:!0},{id:"qr-print",name:"Drukowanie QR",icon:Be,adminOnly:!0},{id:"qr-dashboard",name:"QR Dashboard",icon:Ie,adminOnly:!0}],Y=O(()=>{let f=M.value;if(g.value){const i=g.value.toLowerCase();f=f.filter(C=>C.imie.toLowerCase().includes(i)||C.nazwisko.toLowerCase().includes(i)||C.kategoria.toLowerCase().includes(i)||C.nr_startowy.toString().includes(i)||C.klub.toLowerCase().includes(i))}return c.value.kategoria&&(f=f.filter(i=>i.kategoria===c.value.kategoria)),c.value.klub&&(f=f.filter(i=>i.klub===c.value.klub)),c.value.statusQr==="z_qr"?f=f.filter(i=>i.qr_code):c.value.statusQr==="bez_qr"&&(f=f.filter(i=>!i.qr_code)),c.value.sortowanie==="nr_startowy_asc"?f.sort((i,C)=>i.nr_startowy-C.nr_startowy):c.value.sortowanie==="nr_startowy_desc"?f.sort((i,C)=>C.nr_startowy-i.nr_startowy):c.value.sortowanie==="nazwisko_asc"?f.sort((i,C)=>`${i.nazwisko} ${i.imie}`.localeCompare(`${C.nazwisko} ${C.imie}`)):c.value.sortowanie==="nazwisko_desc"?f.sort((i,C)=>`${C.nazwisko} ${C.imie}`.localeCompare(`${i.nazwisko} ${i.imie}`)):c.value.sortowanie==="kategoria_asc"?f.sort((i,C)=>i.kategoria.localeCompare(C.kategoria)):c.value.sortowanie==="klub_asc"?f.sort((i,C)=>i.klub.localeCompare(C.klub)):c.value.sortowanie==="czas_asc"?f.sort((i,C)=>!i.czas_przejazdu_s&&!C.czas_przejazdu_s?0:i.czas_przejazdu_s?C.czas_przejazdu_s?i.czas_przejazdu_s-C.czas_przejazdu_s:-1:1):c.value.sortowanie==="czas_desc"&&f.sort((i,C)=>!i.czas_przejazdu_s&&!C.czas_przejazdu_s?0:i.czas_przejazdu_s?C.czas_przejazdu_s?C.czas_przejazdu_s-i.czas_przejazdu_s:-1:1),f}),X=O(()=>{const f=(y.value-1)*ze,i=f+ze;return Y.value.slice(f,i)}),q=O(()=>{const f=M.value.length,i=M.value.filter(ge=>ge.status==="FINISHED"||ge.checked_in===!0).length,C=M.value.filter(ge=>ge.status==="DNF"||ge.status==="DSQ"||ge.checked_in===!1).length,fe=M.value.filter(ge=>(ge.status==="FINISHED"||ge.checked_in===!0)&&ge.czas_przejazdu_s);let Oe="-",Fe="-";if(fe.length>0){const ge=fe.reduce((Ge,Ee)=>Ee.czas_przejazdu_s<Ge.czas_przejazdu_s?Ee:Ge);Oe=V(ge.czas_przejazdu_s),Fe=`${ge.imie} ${ge.nazwisko}`}return{total:f,finished:i,dnfDsq:C,recordTime:Oe,recordHolder:Fe}}),B=O(()=>[...new Set(M.value.map(f=>f.klub))]),j=O(()=>[...new Set(M.value.map(f=>f.kategoria))]),k=O(()=>P.filter(f=>!f.adminOnly||p.value)),G=O(()=>Y.value.length>0&&Y.value.every(f=>_.value.includes(f.nr_startowy))),v=O(()=>{if(!c.value.kategoria)return!1;const f=Y.value.filter(i=>i.kategoria===c.value.kategoria);return f.length>0&&f.every(i=>_.value.includes(i.nr_startowy))}),n=O(()=>{if(!c.value.klub)return!1;const f=Y.value.filter(i=>i.klub===c.value.klub);return f.length>0&&f.every(i=>_.value.includes(i.nr_startowy))}),x=O(()=>{const f=Y.value.filter(i=>!i.qr_code);return f.length>0&&f.every(i=>_.value.includes(i.nr_startowy))}),$=O(()=>Y.value.filter(f=>!f.qr_code).length);O(()=>{let f=M.value;if(g.value){const i=g.value.toLowerCase();f=f.filter(C=>C.imie.toLowerCase().includes(i)||C.nazwisko.toLowerCase().includes(i)||C.kategoria.toLowerCase().includes(i)||C.nr_startowy.toString().includes(i)||C.klub.toLowerCase().includes(i))}return F.value.kluby.length>0&&(f=f.filter(i=>F.value.kluby.includes(i.klub))),F.value.kategorie.length>0&&(f=f.filter(i=>F.value.kategorie.includes(i.kategoria))),F.value.plcie.length>0&&(f=f.filter(i=>F.value.plcie.includes(i.plec))),F.value.statusy.length>0&&(f=f.filter(i=>F.value.statusy.includes(i.status))),f});const V=f=>{const i=Math.floor(f/60),C=(f%60).toFixed(2);return`${i}:${C.padStart(5,"0")}`},U=async()=>{try{S.value=!0;const f=await ye.get("/api/zawodnicy?limit=1000");f.data.success?M.value=f.data.data||[]:M.value=f.data.data||f.data||[],console.log(`✅ Pobrano ${M.value.length} zawodników dla client-side pagination`)}catch(f){console.error("Błąd podczas pobierania zawodników:",f),f.value="Nie udało się pobrać danych zawodników"}finally{S.value=!1}},le=()=>{p.value=!p.value},A=()=>{u.value=!u.value,localStorage.setItem("darkMode",u.value.toString()),u.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},b=f=>{T.value=f,I.value=!0},N=()=>{I.value=!1,T.value=null},ae=()=>{U(),u.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},de=()=>{U(),u.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},W=()=>{c.value={kategoria:"",klub:"",statusQr:"",sortowanie:"nr_startowy_asc"},_.value=[]},ue=f=>{const i=_.value.indexOf(f);i>-1?_.value.splice(i,1):_.value.push(f)},ce=()=>{if(G.value){const f=Y.value.map(i=>i.nr_startowy);_.value=_.value.filter(i=>!f.includes(i))}else{const f=Y.value.map(C=>C.nr_startowy),i=[...new Set([..._.value,...f])];_.value=i}},te=()=>{if(!c.value.kategoria)return;const f=Y.value.filter(i=>i.kategoria===c.value.kategoria).map(i=>i.nr_startowy);if(v.value)_.value=_.value.filter(i=>!f.includes(i));else{const i=[...new Set([..._.value,...f])];_.value=i}},oe=()=>{if(!c.value.klub)return;const f=Y.value.filter(i=>i.klub===c.value.klub).map(i=>i.nr_startowy);if(n.value)_.value=_.value.filter(i=>!f.includes(i));else{const i=[...new Set([..._.value,...f])];_.value=i}},ie=()=>{const f=Y.value.filter(i=>!i.qr_code).map(i=>i.nr_startowy);if(x.value)_.value=_.value.filter(i=>!f.includes(i));else{const i=[...new Set([..._.value,...f])];_.value=i}},R=()=>{_.value=[]},d=f=>{z.value=f},l=f=>{f>=1&&f<=w.value&&(y.value=f)},a=()=>{y.value<w.value&&(y.value+=1)},o=()=>{y.value>1&&(y.value-=1)},se=()=>{y.value=1},be=()=>{y.value=w.value};return $e([c,g],()=>{y.value=1},{deep:!0}),me(()=>{U(),u.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),(f,i)=>(s(),r("div",qc,[e("header",Pc,[e("div",Dc,[e("div",Oc,[e("div",Fc,[e("h1",Gc,[i[7]||(i[7]=e("span",{class:"hidden sm:inline"},"SKATECROSS Dashboard",-1)),i[8]||(i[8]=e("span",{class:"sm:hidden"},"SKATECROSS",-1)),p.value?(s(),r("span",Ec,i[6]||(i[6]=[ee(" 🔧 "),e("span",{class:"hidden sm:inline ml-1"},"ADMIN",-1)]))):Z("",!0)])]),e("div",Kc,[e("div",Qc,[e("div",Vc,[D(Q(Ke),{class:"h-5 w-5 text-gray-400"})]),J(e("input",{type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200 shadow-sm",placeholder:"Szukaj zawodników...","onUpdate:modelValue":i[0]||(i[0]=C=>g.value=C)},null,512),[[pe,g.value]])])]),e("div",Uc,[e("div",Lc,[i[9]||(i[9]=e("label",{class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:inline"},"Admin:",-1)),e("button",{onClick:le,class:E(["relative inline-flex h-5 w-9 sm:h-6 sm:w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",p.value?"bg-indigo-600":"bg-gray-200 dark:bg-gray-600"])},[e("span",{class:E(["pointer-events-none inline-block h-4 w-4 sm:h-5 sm:w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",p.value?"translate-x-4 sm:translate-x-5":"translate-x-0"])},null,2)],2)]),e("button",Wc,[D(Q(nt),{class:"h-5 w-5 sm:h-6 sm:w-6"})]),e("button",{onClick:A,class:"p-1 sm:p-2 text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-200 transition-colors duration-200",title:u.value?"Przełącz na tryb jasny":"Przełącz na tryb ciemny"},[u.value?(s(),xe(Q(lt),{key:0,class:"h-5 w-5 sm:h-6 sm:w-6"})):(s(),xe(Q(it),{key:1,class:"h-5 w-5 sm:h-6 sm:w-6"}))],8,Hc),e("div",Jc,[e("span",Yc,t(p.value?"A":"U"),1)])])]),e("div",Xc,[e("div",eg,[e("div",tg,[D(Q(Ke),{class:"h-4 w-4 text-gray-400"})]),J(e("input",{type:"text",class:"block w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-colors duration-200",placeholder:"Szukaj zawodników...","onUpdate:modelValue":i[1]||(i[1]=C=>g.value=C)},null,512),[[pe,g.value]])])])])]),e("div",ag,[e("div",sg,[e("nav",rg,[(s(!0),r(L,null,H(k.value,C=>(s(),r("button",{key:C.id,onClick:fe=>z.value=C.id,class:E([z.value===C.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center"])},[(s(),xe(Re(C.icon),{class:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"})),e("span",ng,t(C.name),1)],10,og))),128))])])]),e("main",lg,[z.value==="dashboard"?(s(),r("div",ig,[D(Pd,{onNavigate:d})])):Z("",!0),z.value==="zawodnicy"?(s(),r("div",dg,[e("div",ug,[D(ke,{title:"Łącznie zawodników",value:q.value.total.toString(),icon:"👥",color:"blue",subtitle:"Wszyscy zawodnicy"},null,8,["value"]),D(ke,{title:"Ukończyli trasę",value:q.value.finished.toString(),icon:"✅",color:"green",subtitle:"Status FINISHED"},null,8,["value"]),D(ke,{title:"DNF/DSQ",value:q.value.dnfDsq.toString(),icon:"⚠️",color:"yellow",subtitle:"Nie ukończyli"},null,8,["value"]),D(ke,{title:"Najlepszy czas",value:q.value.recordTime,icon:"🏆",color:"purple",subtitle:q.value.recordHolder!=="-"?`Rekord: ${q.value.recordHolder}`:""},null,8,["value","subtitle"])]),e("div",cg,[e("div",gg,[e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4"},[i[10]||(i[10]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Filtry i sortowanie",-1)),e("button",{onClick:W,class:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md hover:bg-red-200 dark:hover:bg-red-800 transition-colors duration-200 flex items-center"}," 🗑️ Wyczyść filtry ")]),e("div",pg,[e("div",null,[i[12]||(i[12]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏆"),e("span",null,"Kategoria")])],-1)),J(e("select",{"onUpdate:modelValue":i[2]||(i[2]=C=>c.value.kategoria=C),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[i[11]||(i[11]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(j.value,C=>(s(),r("option",{key:C,value:C},t(C),9,yg))),128))],512),[[re,c.value.kategoria]])]),e("div",null,[i[14]||(i[14]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🏢"),e("span",null,"Klub")])],-1)),J(e("select",{"onUpdate:modelValue":i[3]||(i[3]=C=>c.value.klub=C),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},[i[13]||(i[13]=e("option",{value:""},"Wszystkie",-1)),(s(!0),r(L,null,H(B.value,C=>(s(),r("option",{key:C,value:C},t(C),9,xg))),128))],512),[[re,c.value.klub]])]),e("div",null,[i[16]||(i[16]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"📱"),e("span",null,"Status QR")])],-1)),J(e("select",{"onUpdate:modelValue":i[4]||(i[4]=C=>c.value.statusQr=C),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},i[15]||(i[15]=[e("option",{value:""},"Wszystkie",-1),e("option",{value:"z_qr"},"Z kodem QR",-1),e("option",{value:"bez_qr"},"Bez kodu QR",-1)]),512),[[re,c.value.statusQr]])]),e("div",null,[i[18]||(i[18]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"🔄"),e("span",null,"Sortowanie")])],-1)),J(e("select",{"onUpdate:modelValue":i[5]||(i[5]=C=>c.value.sortowanie=C),class:"w-full rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md focus:border-purple-500 focus:ring-2 focus:ring-purple-500 text-sm font-medium py-2.5 px-3 transition-all duration-200 hover:shadow-lg"},i[17]||(i[17]=[ne('<option value="nr_startowy_asc">Nr startowy (rosnąco)</option><option value="nr_startowy_desc">Nr startowy (malejąco)</option><option value="nazwisko_asc">Nazwisko (A-Z)</option><option value="nazwisko_desc">Nazwisko (Z-A)</option><option value="kategoria_asc">Kategoria (A-Z)</option><option value="klub_asc">Klub (A-Z)</option><option value="czas_asc">Czas (najlepszy)</option><option value="czas_desc">Czas (najgorszy)</option>',8)]),512),[[re,c.value.sortowanie]])])]),e("div",vg,[i[20]||(i[20]=e("label",{class:"block text-sm font-semibold text-gray-800 dark:text-gray-200 mb-3"},[e("span",{class:"flex items-center space-x-2"},[e("span",null,"⚡"),e("span",null,"Operacje grupowe")])],-1)),e("div",bg,[e("button",{onClick:ce,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",G.value?"bg-indigo-700 text-white shadow-inner border-indigo-800":"bg-indigo-600 text-white hover:bg-indigo-700 border-transparent"])},[e("span",null,t(G.value?"✅":"☐"),1),e("span",null,t(G.value?"Odznacz wszystkie":"Zaznacz wszystkie")+" ("+t(Y.value.length)+")",1)],2),e("button",{onClick:te,disabled:!c.value.kategoria,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",c.value.kategoria?v.value?"bg-green-700 text-white shadow-inner border-green-800":"bg-green-600 text-white hover:bg-green-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(c.value.kategoria?v.value?"✅":"☐":"🏆"),1),e("span",null,t(c.value.kategoria?v.value?`Odznacz: ${c.value.kategoria}`:`Zaznacz: ${c.value.kategoria}`:"Wybierz kategorię"),1)],10,mg),e("button",{onClick:oe,disabled:!c.value.klub,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",c.value.klub?n.value?"bg-purple-700 text-white shadow-inner border-purple-800":"bg-purple-600 text-white hover:bg-purple-700 border-transparent":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent"])},[e("span",null,t(c.value.klub?n.value?"✅":"☐":"🏢"),1),e("span",null,t(c.value.klub?n.value?`Odznacz: ${c.value.klub}`:`Zaznacz: ${c.value.klub}`:"Wybierz klub"),1)],10,kg),e("button",{onClick:ie,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2",$.value===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-transparent":x.value?"bg-orange-700 text-white shadow-inner border-orange-800":"bg-orange-600 text-white hover:bg-orange-700 border-transparent"]),disabled:$.value===0},[e("span",null,t(x.value?"✅":"☐"),1),e("span",null,t(x.value?"Odznacz bez QR":"Zaznacz bez QR")+" ("+t($.value)+")",1)],10,wg),e("button",{onClick:R,disabled:_.value.length===0,class:E(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 border-2 border-transparent",_.value.length>0?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[i[19]||(i[19]=e("span",null,"🗑️",-1)),e("span",null,"Wyczyść zaznaczenia ("+t(_.value.length)+")",1)],10,fg)])])]),e("div",hg,[(s(!0),r(L,null,H(X.value,C=>(s(),xe(Mt,{key:C.nr_startowy,zawodnik:C,isAdmin:p.value,onEdit:b},null,8,["zawodnik","isAdmin"]))),128))]),e("div",_g,[e("table",zg,[e("thead",$g,[e("tr",null,[e("th",Cg,[e("input",{type:"checkbox",checked:G.value,onChange:ce,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,jg)]),i[21]||(i[21]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Nr startowy ",-1)),i[22]||(i[22]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Klub ",-1)),i[23]||(i[23]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Zawodnik ",-1)),i[24]||(i[24]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Kategoria ",-1)),i[25]||(i[25]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status ",-1)),i[26]||(i[26]=e("th",{class:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Czas ",-1)),p.value?(s(),r("th",Sg," Akcje ")):Z("",!0)])]),e("tbody",Ig,[(s(!0),r(L,null,H(X.value,C=>(s(),r("tr",{key:C.nr_startowy},[e("td",Mg,[e("input",{type:"checkbox",checked:_.value.includes(C.nr_startowy),onChange:fe=>ue(C.nr_startowy),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,40,Tg)]),e("td",Rg,t(C.nr_startowy),1),e("td",Ag,t(C.klub),1),e("td",Ng,[e("div",Zg,t(C.imie)+" "+t(C.nazwisko),1)]),e("td",Bg,t(C.kategoria),1),e("td",qg,[D(We,{status:C.status,checked_in:C.checked_in},null,8,["status","checked_in"])]),e("td",Pg,t(C.czas_przejazdu_s?V(C.czas_przejazdu_s):"-"),1),p.value?(s(),r("td",Dg,[e("div",Og,[e("button",{onClick:fe=>b(C),class:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors duration-200"},[D(Q(Ue),{class:"h-3 w-3 mr-1"}),i[27]||(i[27]=ee(" Edytuj "))],8,Fg)])])):Z("",!0)]))),128))])])]),w.value>1?(s(),r("div",Gg,[e("div",Eg,[e("button",{onClick:o,disabled:y.value<=1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Poprzednie 50 ",8,Kg),e("button",{onClick:a,disabled:y.value>=w.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Następne 50 ",8,Qg)]),e("div",Vg,[e("div",null,[e("p",Ug,[i[28]||(i[28]=ee(" Pokazano ")),e("span",Lg,t((y.value-1)*ze+1),1),i[29]||(i[29]=ee(" do ")),e("span",Wg,t(Math.min(y.value*ze,m.value)),1),i[30]||(i[30]=ee(" z ")),e("span",Hg,t(m.value),1),i[31]||(i[31]=ee(" wyników "))])]),e("div",null,[e("nav",Jg,[e("button",{onClick:se,disabled:y.value<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},i[32]||(i[32]=[e("span",{class:"sr-only"},"Pierwsza strona",-1),ee(" « ")]),8,Yg),e("button",{onClick:o,disabled:y.value<=1,class:"relative inline-flex items-center px-2 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},i[33]||(i[33]=[e("span",{class:"sr-only"},"Poprzednia strona",-1),ee(" ‹ ")]),8,Xg),(s(!0),r(L,null,H(Math.min(5,w.value),C=>(s(),r(L,{key:C},[C<=w.value?(s(),r("button",{key:0,onClick:fe=>l(C),class:E(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",C===y.value?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"])},t(C),11,ep)):Z("",!0)],64))),128)),w.value>5?(s(),r("span",tp," ... ")):Z("",!0),e("button",{onClick:a,disabled:y.value>=w.value,class:"relative inline-flex items-center px-2 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},i[34]||(i[34]=[e("span",{class:"sr-only"},"Następna strona",-1),ee(" › ")]),8,ap),e("button",{onClick:be,disabled:y.value>=w.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},i[35]||(i[35]=[e("span",{class:"sr-only"},"Ostatnia strona",-1),ee(" » ")]),8,sp)])])])])):Z("",!0)])])):Z("",!0),z.value==="drabinka"?(s(),r("div",rp,[D(fa)])):Z("",!0),z.value==="rankingi"?(s(),r("div",op,[D(jr)])):Z("",!0),z.value==="unified-start"?(s(),r("div",np,[D(Bc)])):Z("",!0),z.value==="qr-dashboard"?(s(),r("div",lp,[D(An)])):Z("",!0),z.value==="qr-print"?(s(),r("div",ip,[D(gi)])):Z("",!0)]),D(qa,{show:I.value,zawodnik:T.value,onClose:N,onUpdated:ae,onDeleted:de},null,8,["show","zawodnik"])]))}});Ye(dp).mount("#app");
